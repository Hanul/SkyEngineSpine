SkyEngineSpine.Node=CLASS({preset:()=>{return SkyEngine.Node},init:(e,n,t)=>{let i=t.json,o=t.atlas,a=t.png,d=t.animation,s=t.skin,c=t.mixInfos;void 0===s&&(s="default");let u,r,f,l;PARALLEL([e=>{GET(i,n=>{r=JSON.parse(n),e()})},e=>{GET(o,n=>{f=n,e()})},e=>{if(l=PIXI.utils.TextureCache[a],void 0===l){let t=new Image;t.onload=(()=>{t.onload=void 0,n.checkIsRemoved()!==!0&&(void 0!==PIXI.utils.TextureCache[a]?l=PIXI.utils.TextureCache[a]:(l=new PIXI.Texture.from(t),PIXI.Texture.addToCache(l,a)),e())}),t.src=a}else e()},()=>{if(n.checkIsRemoved()!==!0){let e=new PIXI.spine.core.TextureAtlas(f,(e,n)=>{n(l.baseTexture)}),t=new PIXI.spine.core.AtlasAttachmentLoader(e),i=new PIXI.spine.core.SkeletonJson(t);u=new PIXI.spine.Spine(i.readSkeletonData(r)),u.skeleton.setSkinByName(s),u.state.setAnimation(0,d,!0),void 0!==c&&EACH(c,e=>{u.stateData.setMixByName(e.from,e.to,e.duration)}),u.zIndex=-9999999,u.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(n.getBlendMode()),u.state.addListener({event:(e,t)=>{n.fireEvent(t.data.name)},complete:()=>{n.fireEvent("animationend")}}),n.addToPixiContainer(u),n.fireEvent("load")}}]);n.changeSkin=(e=>{s=e,void 0!==u&&u.skeleton.setSkinByName(s)}),n.changeAnimation=(e=>{d=e,void 0!==u&&(u.state.setAnimation(0,d,!0),u.state.apply(u.skeleton),u.skeleton.updateWorldTransform())}),n.getAnimation=(()=>{return d})}});
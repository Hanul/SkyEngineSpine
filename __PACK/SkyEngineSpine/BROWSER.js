SkyEngineSpine.Node=CLASS({preset:()=>{return SkyEngine.Node},init:(n,e,t)=>{let i=t.json,o=t.atlas,a=t.png,s=t.animation,d=t.skin,c=t.mixInfos;void 0===d&&(d="default");let f,r,u;PARALLEL([n=>{GET(i,e=>{r=JSON.parse(e),n()})},n=>{GET(o,e=>{u=e,n()})},()=>{SkyEngine.LoadTexture(a,n=>{if(e.checkIsRemoved()!==!0){let t=new PIXI.spine.core.TextureAtlas(u,(e,t)=>{t(n.baseTexture)}),i=new PIXI.spine.core.AtlasAttachmentLoader(t),o=new PIXI.spine.core.SkeletonJson(i);f=new PIXI.spine.Spine(o.readSkeletonData(r)),f.skeleton.setSkinByName(d),f.state.setAnimation(0,s,!0),void 0!==c&&EACH(c,n=>{f.stateData.setMixByName(n.from,n.to,n.duration)}),f.zIndex=-9999999,f.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(e.getBlendMode()),f.state.addListener({event:(n,t)=>{e.fireEvent(t.data.name)},complete:()=>{e.fireEvent("animationend")}}),e.addToPixiContainer(f),e.fireEvent("load")}})}]);e.changeSkin=(n=>{d=n,void 0!==f&&f.skeleton.setSkinByName(d)}),e.changeAnimation=(n=>{s=n,void 0!==f&&(f.state.setAnimation(0,s,!0),f.state.apply(f.skeleton),f.skeleton.updateWorldTransform())}),e.getAnimation=(()=>{return s}),e.setAttachment=(n=>{let e=n.slot,t=n.attachment;f.skeleton.setAttachment(e,t)})}});
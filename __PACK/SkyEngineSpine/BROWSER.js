SkyEngineSpine.Node=CLASS({preset:()=>{return SkyEngine.Node},init:(e,n,t)=>{let i=t.json,o=t.atlas,a=t.png,s=t.animation,d=t.skin,c=t.mixInfos;void 0===d&&(d="default");let r,u,f,l;PARALLEL([e=>{GET(i,n=>{u=JSON.parse(n),e()})},e=>{GET(o,n=>{f=n,e()})},e=>{if(l=PIXI.utils.TextureCache[a],void 0===l){let t=new Image;t.crossOrigin="anonymous",t.onload=(()=>{t.onload=void 0,n.checkIsRemoved()!==!0&&(void 0!==PIXI.utils.TextureCache[a]?l=PIXI.utils.TextureCache[a]:(l=new PIXI.Texture.from(t),PIXI.Texture.addToCache(l,a)),e())}),t.src=a}else e()},()=>{if(n.checkIsRemoved()!==!0){let e=new PIXI.spine.core.TextureAtlas(f,(e,n)=>{n(l.baseTexture)}),t=new PIXI.spine.core.AtlasAttachmentLoader(e),i=new PIXI.spine.core.SkeletonJson(t);r=new PIXI.spine.Spine(i.readSkeletonData(u)),r.skeleton.setSkinByName(d),r.state.setAnimation(0,s,!0),void 0!==c&&EACH(c,e=>{r.stateData.setMixByName(e.from,e.to,e.duration)}),r.zIndex=-9999999,r.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(n.getBlendMode()),r.state.addListener({event:(e,t)=>{n.fireEvent(t.data.name)},complete:()=>{n.fireEvent("animationend")}}),n.addToPixiContainer(r),n.fireEvent("load")}}]);n.changeSkin=(e=>{d=e,void 0!==r&&r.skeleton.setSkinByName(d)}),n.changeAnimation=(e=>{s=e,void 0!==r&&(r.state.setAnimation(0,s,!0),r.state.apply(r.skeleton),r.skeleton.updateWorldTransform())}),n.getAnimation=(()=>{return s})}});
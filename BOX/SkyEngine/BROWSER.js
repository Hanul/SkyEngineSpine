SkyEngine.BGM=CLASS({preset:()=>{return SOUND},params:()=>{return{isLoop:!0}},init:(e,t,r)=>{let n,i=EVENT("visibilitychange",()=>{document.hidden===!0?t.pause():t.play()});OVERRIDE(t.stop,e=>{n=t.stop=(()=>{i.remove(),e()})})}}),SkyEngine.Delay=CLASS(e=>{let t=[];e.step=(e=>{for(let r=0;r<t.length;r+=1)t[r].step(e)});return{init:(e,r,n,i)=>{void 0===i&&(i=n,n=0);let o=0,a=(r.resume=RAR(()=>{CHECK_IS_IN({array:t,value:r})!==!0&&t.push(r)}),r.pause=(()=>{REMOVE({array:t,value:r})})),s=r.remove=(()=>{a()});r.step=(e=>{o+=e,o>=n&&(i(),s())})}}}),SkyEngine.E=CLASS({preset:()=>{return E},init:(e,t,r)=>{t.stopDefault=(()=>{r.stopDefault()}),t.stopBubbling=(()=>{r.stopBubbling()}),t.checkIsBubblingStoped=(()=>{return r.checkIsBubblingStoped()}),t.stop=(()=>{r.stop()}),t.getX=(()=>{return(r.getLeft()-WIN_WIDTH()/2)/SkyEngine.Screen.getRatio()}),t.getY=(()=>{return(r.getTop()-WIN_HEIGHT()/2)/SkyEngine.Screen.getRatio()}),t.getKey=(()=>{return r.getKey()}),t.getWheelDelta=(()=>{return r.getWheelDelta()})}}),SkyEngine.Interval=CLASS(e=>{let t=[];e.step=(e=>{for(let r=0;r<t.length;r+=1)t[r].step(e)});return{init:(e,r,n,i)=>{void 0===i&&(i=n,n=0);let o=0,a=0,s=(r.resume=RAR(()=>{CHECK_IS_IN({array:t,value:r})!==!0&&t.push(r)}),r.pause=(()=>{REMOVE({array:t,value:r})})),u=r.remove=(()=>{s()});r.step=(e=>{o+=e,o>=n&&(o-=n,a+=1,i(r,a)===!1&&u())})}}}),SkyEngine.Node=CLASS({init:(e,t,r)=>{let n,i,o,a,s,u,l,c,h,d,f,p,g,v,m,y,_,x,b,S,T,w,E,C,R,O,M,P,A,I,D,k,F,L,B,N,X,j,U,Y,z,W,G,H,V,q,K,Z,Q,J,$,ee,te,re,ne,ie,oe,ae,se,ue,le,ce,he,de,fe,pe,ge,ve,me,ye,_e,xe,be=[],Se=!1,Te=!1,we={},Ee=[],Ce=[],Re=[],Oe={},Me={},Pe={},Ae=0,Ie=!0,De=BROWSER_CONFIG.SkyEngine.maxCollisionWidth,ke=BROWSER_CONFIG.SkyEngine.maxCollisionHeight,Fe=new PIXI.Container,Le=(e.getPixiContainer=(()=>{return Fe}),t.addToPixiContainer=(e=>{let t=Fe.children,r=0,n=t.length;for(;r<n;){let i=r+n>>>1;t[i].zIndex<=e.zIndex?r=i+1:n=i}Fe.addChildAt(e,r)})),Be=(t.removeFromPixiContainer=(e=>{Fe.removeChild(e)}),()=>{if(void 0===ue)Y=n,z=i,W=n,G=i;else{let e=n*ue.getRealScaleX(),t=i*ue.getRealScaleY();Y=ue.getDrawingX()+e*ue.getRealCos()-t*ue.getRealSin(),z=ue.getDrawingY()+e*ue.getRealSin()+t*ue.getRealCos();let r=a*H,o=s*V;W=Y-r*Z+o*K,G=z-r*K-o*Z}}),Ne=t.setX=(e=>{n=e,Be()}),Xe=(t.getX=(()=>{return n}),t.setY=(e=>{i=e,Be(),de===!0&&je(i)})),je=(t.getY=(()=>{return i}),t.setZIndex=(e=>{void 0===se?Fe.zIndex=o=e:(rt(),Fe.zIndex=o=e,nt())})),Ue=(t.getZIndex=(()=>{return o}),t.setPosition=(e=>{void 0!==e.x&&(n=e.x),void 0!==e.y&&(i=e.y,de===!0&&je(i)),void 0===e.x&&void 0===e.y||Be(),void 0!==e.zIndex&&je(e.zIndex)}),t.setCenterX=(e=>{a=e}),t.getCenterX=(()=>{return a}),t.setCenterY=(e=>{s=e}),t.getCenterY=(()=>{return s}),t.setSpeedX=(e=>{d=e,d<w&&(w=void 0),d>P&&(P=void 0)}),t.getSpeedX=(()=>{return d}),t.setSpeedY=(e=>{f=e,f<E&&(E=void 0),f>A&&(A=void 0)}),t.getSpeedY=(()=>{return f}),t.setAccelX=(e=>{y=e}),t.getAccelX=(()=>{return y}),t.setAccelY=(e=>{_=e}),t.getAccelY=(()=>{return _}),t.setMinSpeedX=(e=>{w=e}),t.getMinSpeedX=(()=>{return w}),t.setMinSpeedY=(e=>{E=e}),t.getMinSpeedY=(()=>{return E}),t.setMaxSpeedX=(e=>{P=e}),t.getMaxSpeedX=(()=>{return P}),t.setMaxSpeedY=(e=>{A=e}),t.getMaxSpeedY=(()=>{return A}),t.setToX=(e=>{L=e}),t.getToX=(()=>{return L}),t.setToY=(e=>{B=e}),t.getToY=(()=>{return B}),t.setScaleX=(e=>{u=e,H=void 0===ue?u:ue.getRealScaleX()*u})),Ye=(t.getScaleX=(()=>{return u}),t.setScaleY=(e=>{l=e,V=void 0===ue?e:ue.getRealScaleY()*l})),ze=(t.getScaleY=(()=>{return l}),t.setScale=(e=>{Ue(e),Ye(e)})),We=(t.setScalingSpeedX=(e=>{p=e,p<C&&(C=void 0),p>I&&(I=void 0)}),t.getScalingSpeedX=(()=>{return p}),t.setScalingSpeedY=(e=>{g=e,g<R&&(R=void 0),g>D&&(D=void 0)}),t.getScalingSpeedY=(()=>{return g}),t.setScalingSpeed=(e=>{p=e,g=e})),Ge=(t.setScalingAccelX=(e=>{x=e}),t.getScalingAccelX=(()=>{return x}),t.setScalingAccelY=(e=>{b=e}),t.getScalingAccelY=(()=>{return b}),t.setScalingAccel=(e=>{x=e,b=e})),He=(t.setMinScalingSpeedX=(e=>{C=e}),t.getMinScalingSpeedX=(()=>{return C}),t.setMinScalingSpeedY=(e=>{R=e}),t.getMinScalingSpeedY=(()=>{return R}),t.setMinScalingSpeed=(e=>{C=e,R=e}),t.setMaxScalingSpeedX=(e=>{I=e}),t.getMaxScalingSpeedX=(()=>{return I}),t.setMaxScalingSpeedY=(e=>{D=e}),t.getMaxScalingSpeedY=(()=>{return D}),t.setMaxScalingSpeed=(e=>{I=e,D=e}),t.setToScaleX=(e=>{N=e}),t.getToScaleX=(()=>{return N}),t.setToScaleY=(e=>{X=e}),t.getToScaleY=(()=>{return X}),t.setToScale=(e=>{N=e,X=e})),Ve=t.setAngle=(e=>{c=e,q=void 0===ue?c*Math.PI/180:ue.getRealRadian()+c*Math.PI/180,K=Math.sin(q),Z=Math.cos(q)}),qe=(t.getAngle=(()=>{return c}),t.setRotationSpeed=(e=>{v=e,v<O&&(O=void 0),v>k&&(k=void 0)}),t.getRotationSpeed=(()=>{return v}),t.setRotationAccel=(e=>{S=e}),t.getRotationAccel=(()=>{return S}),t.setMinRotationSpeed=(e=>{O=e}),t.getMinRotationSpeed=(()=>{return O}),t.setMaxRotationSpeed=(e=>{k=e}),t.getMaxRotationSpeed=(()=>{return k}),t.setToAngle=(e=>{j=e}),t.getToAngle=(()=>{return j}),t.setAlpha=(e=>{h=e}),t.getAlpha=(()=>{return h}),t.setFadingSpeed=(e=>{m=e,m<M&&(M=void 0),m>F&&(F=void 0)}),t.getFadingSpeed=(()=>{return m}),t.setFadingAccel=(e=>{T=e}),t.getFadingAccel=(()=>{return T}),t.setMinFadingSpeed=(e=>{M=e}),t.getMinFadingSpeed=(()=>{return M}),t.setMaxFadingSpeed=(e=>{F=e}),t.getMaxFadingSpeed=(()=>{return F}),t.setToAlpha=(e=>{U=e}),t.getToAlpha=(()=>{return U}),t.getDrawingX=(()=>{return W}),t.getDrawingY=(()=>{return G}),t.getRealX=(()=>{return Y}),t.getRealY=(()=>{return z}),t.getRealScaleX=(()=>{return H}),t.getRealScaleY=(()=>{return V}),t.getRealRadian=(()=>{return q}),t.getRealSin=(()=>{return K}),t.getRealCos=(()=>{return Z}),t.getBeforeX=(()=>{return Q}),t.getBeforeY=(()=>{return J}),()=>{Ve(c),Ue(u),Ye(l),Be()});void 0!==r&&(n=r.x,i=r.y,a=r.centerX,s=r.centerY,Fe.zIndex=o=r.zIndex,void 0!==r.scale&&ze(r.scale),void 0!==r.scaleX&&(u=r.scaleX),void 0!==r.scaleY&&(l=r.scaleY),c=r.angle,h=r.alpha,d=r.speedX,f=r.speedY,void 0!==r.scalingSpeed&&We(r.scalingSpeed),void 0!==r.scalingSpeedX&&(p=r.scalingSpeedX),void 0!==r.scalingSpeedY&&(g=r.scalingSpeedY),v=r.rotationSpeed,m=r.fadingSpeed,y=r.accelX,_=r.accelY,void 0!==r.scalingAccel&&Ge(r.scalingAccel),void 0!==r.scalingAccelX&&(x=r.scalingAccelX),void 0!==r.scalingAccelY&&(b=r.scalingAccelY),S=r.rotationAccel,T=r.fadingAccel,w=r.minSpeedX,E=r.minSpeedY,void 0!==r.minScaleSpeed&&setMinScaleSpeed(r.minScaleSpeed),void 0!==r.minScaleSpeedX&&(minScaleSpeedX=r.minScaleSpeedX),void 0!==r.minScaleSpeedY&&(minScaleSpeedY=r.minScaleSpeedY),O=r.minRotationSpeed,M=r.minFadingSpeed,P=r.maxSpeedX,A=r.maxSpeedY,void 0!==r.maxScaleSpeed&&setMaxScaleSpeed(r.maxScaleSpeed),void 0!==r.maxScaleSpeedX&&(maxScaleSpeedX=r.maxScaleSpeedX),void 0!==r.maxScaleSpeedY&&(maxScaleSpeedY=r.maxScaleSpeedY),k=r.maxRotationSpeed,F=r.maxFadingSpeed,L=r.toX,B=r.toY,void 0!==r.toScale&&He(r.toScale),void 0!==r.toScaleX&&(N=r.toScaleX),void 0!==r.toScaleY&&(X=r.toScaleY),j=r.toAngle,U=r.toAlpha,void 0!==r.isHiding&&(Se=r.isHiding),le=r.filter,ce=r.blendMode,he=r.isToCheckCollision,de=r.isY2ZIndex,ye=r.onDisplayResize),void 0===n&&(n=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(Fe.zIndex=o=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===y&&(y=0),void 0===_&&(_=0),void 0===u&&(u=1),void 0===l&&(l=1),void 0===p&&(p=0),void 0===g&&(g=0),void 0===x&&(x=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===v&&(v=0),void 0===S&&(S=0),void 0===h&&(h=1),void 0===m&&(m=0),void 0===T&&(T=0),void 0!==ye&&(_e=EVENT("resize",RAR(()=>{let e=ye(WIN_WIDTH(),WIN_HEIGHT());void 0!==e.x&&Ne(e.x),void 0!==e.y&&Xe(e.y),void 0!==e.scaleX&&Ue(e.scaleX),void 0!==e.scaleY&&Ye(e.scaleY),void 0!==e.width&&void 0!==t.setWidth&&t.setWidth(e.width),void 0!==e.height&&void 0!==t.setHeight&&t.setHeight(e.height)}))),de===!0&&je(i),SkyEngine.Screen!==t&&SkyEngine.Screen.registerNode(t);let Ke=t.setFilter=(e=>{if(le=e,le.indexOf("blur(")!==-1){let e=new PIXI.filters.BlurFilter(le.substring(5,le.indexOf("px")));Fe.filters=[e]}else if(le.indexOf("brightness(")!==-1){let e=new PIXI.filters.ColorMatrixFilter;e.brightness(le.substring(11,le.indexOf("%"))/100),Fe.filters=[e]}else if(le.indexOf("contrast(")!==-1){let e=new PIXI.filters.ColorMatrixFilter;e.contrast(le.substring(9,le.indexOf("%"))/100-1),Fe.filters=[e]}else if(le.indexOf("drop-shadow(")!==-1){let e=le.substring(12,le.indexOf(")")).split(" "),t=e[0];t=REAL(t.substring(0,t.indexOf("px")))*H;let r=e[1];r=REAL(r.substring(0,r.indexOf("px")))*V;let n=e[2];n=REAL(n.substring(0,n.indexOf("px")));let i=parseInt(e[3].substring(1),16),o=new PIXI.filters.DropShadowFilter({rotation:180*Math.atan2(r,t)/Math.PI,distance:Math.sqrt(t*t+r*r),blur:n,color:i});console.log({rotation:180*Math.atan2(r,t)/Math.PI,distance:Math.sqrt(t*t+r*r),blur:n,color:i}),Fe.filters=[o]}else if(le.indexOf("grayscale(")!==-1){let e=new PIXI.filters.ColorMatrixFilter;e.saturate(-le.substring(10,le.indexOf("%"))/100),Fe.filters=[e]}else if(le.indexOf("hue-rotate(")!==-1){let e=new PIXI.filters.ColorMatrixFilter;e.hue(le.substring(11,le.indexOf("deg"))),Fe.filters=[e]}else if(le.indexOf("saturate(")!==-1){let e=new PIXI.filters.ColorMatrixFilter;e.saturate(le.substring(9,le.indexOf("%"))/100-1),Fe.filters=[e]}});void 0!==le&&Ke(le);let Ze=(t.getFilter=(()=>{return le}),t.removeFilter=(()=>{le=void 0,Fe.filters=TO_DELETE}),t.setBlendMode=(e=>{ce=e}),t.getBlendMode=(()=>{return ce}),t.removeBlendMode=(()=>{ce=void 0}),t.moveLeft=((e,t)=>{CHECK_IS_DATA(e)===!0?(void 0!==e.speed&&(d=-e.speed),y=void 0===e.accel?0:-e.accel,P=0,w=void 0!==e.maxSpeed?-e.maxSpeed:void 0,void 0!==e.toX&&(L=e.toX,ee=t)):(y=0,d=w=-e)})),Qe=(t.stopLeft=(e=>{void 0!==e?(y=e,P=0):d<0&&(y<0&&(y=0),d=0)}),t.moveRight=((e,t)=>{CHECK_IS_DATA(e)===!0?(void 0!==e.speed&&(d=e.speed),y=void 0===e.accel?0:e.accel,w=0,P=void 0!==e.maxSpeed?e.maxSpeed:void 0,void 0!==e.toX&&(L=e.toX,ee=t)):(y=0,d=P=e)})),Je=(t.stopRight=(e=>{void 0!==e?(y=-e,w=0):d>0&&(y>0&&(y=0),d=0)}),t.moveUp=((e,t)=>{CHECK_IS_DATA(e)===!0?(void 0!==e.speed&&(f=-e.speed),_=void 0===e.accel?0:-e.accel,A=0,E=void 0!==e.maxSpeed?-e.maxSpeed:void 0,void 0!==e.toY&&(B=e.toY,te=t)):(_=0,f=E=-e)})),$e=(t.stopUp=(e=>{void 0!==e?(_=e,A=0):f<0&&(_<0&&(_=0),f=0)}),t.moveDown=((e,t)=>{CHECK_IS_DATA(e)===!0?(void 0!==e.speed&&(f=e.speed),_=void 0===e.accel?0:e.accel,E=0,A=void 0!==e.maxSpeed?e.maxSpeed:void 0,void 0!==e.toY&&(B=e.toY,te=t)):(_=0,f=A=e)})),et=(t.stopDown=(e=>{void 0!==e?(_=-e,E=0):f>0&&(_>0&&(_=0),f=0)}),t.moveTo=((e,t)=>{if(void 0===e.y)e.toX=e.x,delete e.x,e.toX<n?Ze(e,t):Qe(e,t);else if(void 0===e.x)e.toY=e.y,delete e.y,e.toY<i?Je(e,t):$e(e,t);else{L=e.x,B=e.y;let r=L-n,o=B-i,a=Math.sqrt(r*r+o*o);void 0!==e.speed&&(d=e.speed*r/a,f=e.speed*o/a),void 0!==e.accel&&(y=e.accel*r/a,_=e.accel*o/a),void 0!==e.maxSpeed&&(L<n?w=-e.maxSpeed*r/a:P=e.maxSpeed*r/a,B<i?E=-e.maxSpeed*o/a:A=e.maxSpeed*o/a),$=t}}),t.scaleTo=((e,t)=>{let r=e.speed,n=e.accel,i=(e.minSpeed,e.maxSpeed);void 0===e.y?(N=e.x,N<u?(void 0!==r&&(p=-r),void 0!==n&&(x=-n),void 0!==i&&(C=-i)):(void 0!==r&&(p=r),void 0!==n&&(x=n),void 0!==i&&(I=i)),ne=t):void 0===e.x?(X=e.y,X<l?(void 0!==r&&(g=-r),void 0!==n&&(b=-n),void 0!==i&&(R=-i)):(void 0!==r&&(g=r),void 0!==n&&(b=n),void 0!==i&&(D=i)),ie=t):(N=e.x,N<u?(void 0!==r&&(p=-r),void 0!==n&&(x=-n),void 0!==i&&(C=-i)):(void 0!==r&&(p=r),void 0!==n&&(x=n),void 0!==i&&(I=i)),X=e.y,X<l?(void 0!==r&&(g=-r),void 0!==n&&(b=-n),void 0!==i&&(R=-i)):(void 0!==r&&(g=r),void 0!==n&&(b=n),void 0!==i&&(D=i)),re=t)}),t.stuckLeft=(()=>{fe=!0}),t.unstuckLeft=(()=>{fe=!1}),t.stuckRight=(()=>{pe=!0}),t.unstuckRight=(()=>{pe=!1}),t.stuckUp=(()=>{ge=!0}),t.unstuckUp=(()=>{ge=!1}),t.stuckDown=(()=>{ve=!0}),t.unstuckDown=(()=>{ve=!1}),t.rotate=(e=>{CHECK_IS_DATA(e)===!0?(void 0!==e.speed&&(v=e.speed),void 0!==e.accel&&(S=e.accel),void 0!==e.minSpeed&&(O=e.minSpeed),void 0!==e.maxSpeed&&(k=e.maxSpeed)):v=e}),t.stopRotation=(e=>{void 0!==e?(S=-e,e>0?O=0:e<0&&(k=0)):v>0&&(v=0)}),t.rotateTo=((e,t)=>{j=e.toAngle,void 0!==e.speed&&(v=e.speed),void 0!==e.accel&&(S=e.accel),void 0!==e.minSpeed&&(O=e.minSpeed),void 0!==e.maxSpeed&&(k=e.maxSpeed),oe=t}),t.flipX=(()=>{u=-u}),t.flipY=(()=>{l=-l}),t.fadeIn=((e,t)=>{1===h&&(h=0),U=1,void 0===e?m=2:CHECK_IS_DATA(e)===!0?(void 0!==e.speed&&(m=e.speed),void 0!==e.accel&&(T=e.accel),void 0!==e.maxSpeed&&(F=e.maxSpeed)):isNaN(e)===!0?(t=e,m=2):m=e,ae=t}),t.fadeOut=((e,t)=>{U=0,void 0===e?m=-2:CHECK_IS_DATA(e)===!0?(void 0!==e.speed&&(m=-e.speed),void 0!==e.accel&&(T=-e.accel),void 0!==e.maxSpeed&&(M=-e.maxSpeed)):isNaN(e)===!0?(t=e,m=-2):m=-e,ae=t}),t.stopFading=(e=>{void 0!==e?(T=-e,e>0?M=0:e<0&&(F=0)):m>0&&(m=0)}),t.fadeTo=((e,t)=>{U=e.toAlpha,void 0!==e.speed&&(m=e.speed),void 0!==e.accel&&(T=e.accel),void 0!==e.minSpeed&&(M=e.minSpeed),void 0!==e.maxSpeed&&(F=e.maxSpeed),ae=t}),t.hide=(()=>{Se=!0,Fe.visible=!1,void 0!==me&&me.hide()}),t.show=(()=>{Se=!1,Fe.visible=!0,void 0!==me&&me.show()}),t.checkIsHiding=(()=>{return Se}),t.checkIsShowing=(()=>{return Se!==!0}),t.getChildren=(()=>{return be}),t.getParent=(()=>{return se}),t.setTarget=(e=>{if(ue=e,Te!==!0&&void 0!==ue){qe();for(let e=0;e<Ce.length;e+=1)Ce[e].setTarget(t);for(let e=0;e<Ee.length;e+=1)Ee[e].setTarget(t);for(let e=0;e<be.length;e+=1)be[e].setTarget(t)}})),tt=t.setParent=(e=>{se=e,et(se)}),rt=()=>{let e=se.getChildren(),r=0,n=e.length-1,i=0;for(;r<=n;){let a=Math.ceil((r+n)/2),s=e[a];if(s.getZIndex()<o)r=a+1;else{if(!(s.getZIndex()>o)){for(;;){if(e[a-i]===t){e.splice(a-i,1);break}if(i>0&&e[a+i]===t){e.splice(a+i,1);break}if(e[a-i].getZIndex()!==o&&e[a+i].getZIndex()!==o)break;i+=1}break}n=a-1}}se.removeFromPixiContainer(Fe)},nt=()=>{let e=se.getChildren(),r=0,n=e.length;for(;r<n;){let t=r+n>>>1;e[t].getZIndex()<=o?r=t+1:n=t}se.addToPixiContainer(Fe),e.splice(r,0,t)},it=(t.appendTo=(e=>{return void 0!==se&&rt(),tt(e),nt(),t}),t.append=(e=>{e.appendTo(t)}),t.empty=(()=>{for(let e=0;e<be.length;e+=1){let t=be[e];t.setParent(void 0),t.remove()}be=[]}));t.remove=(()=>{st("remove"),it(),be=void 0,void 0!==se&&(rt(),tt(void 0)),SkyEngine.Screen!==t&&SkyEngine.Screen.unregisterNode(t),we=void 0;for(let e=0;e<Ce.length;e+=1)Ce[e].remove();Ce=void 0;for(let e=0;e<Ee.length;e+=1)Ee[e].remove();Ee=void 0,Re=void 0,Oe=void 0,Me=void 0,Pe=void 0,void 0!==me&&me.remove(),Te=!0,void 0!==_e&&(_e.remove(),_e=void 0)}),t.checkIsRemoved=(()=>{return Te}),t.addDom=(e=>{if(void 0===me){let e=SkyEngine.Screen.getRatio();me=DIV({style:{position:"fixed",left:SkyEngine.Screen.getLeft()+(SkyEngine.Screen.getWidth()/2+W-SkyEngine.Screen.getCameraFollowX())*e,top:SkyEngine.Screen.getTop()+(SkyEngine.Screen.getHeight()/2+G-SkyEngine.Screen.getCameraFollowY())*e,transform:"rotate("+q+"rad) scale("+e*H+", "+e*V+")",opacity:0,filter:le}}).appendTo(BODY),DELAY(()=>{me.addStyle({opacity:Fe.worldAlpha})})}me.append(e)});e.getDomWrapper=(()=>{return me});let ot=(t.getDomWrapper=(()=>{if(void 0===me){let e=SkyEngine.Screen.getRatio();me=DIV({style:{position:"fixed",left:SkyEngine.Screen.getLeft()+(SkyEngine.Screen.getWidth()/2+W-SkyEngine.Screen.getCameraFollowX())*e,top:SkyEngine.Screen.getTop()+(SkyEngine.Screen.getHeight()/2+G-SkyEngine.Screen.getCameraFollowY())*e,transform:"rotate("+q+"rad) scale("+e*H+", "+e*V+")",opacity:0,filter:le}}).appendTo(BODY),DELAY(()=>{me.addStyle({opacity:Fe.worldAlpha})})}return me}),t.addDomStyle=(e=>{void 0===me&&(me=DIV({style:{position:"fixed",left:-999999,top:-999999}}).appendTo(BODY)),me.addStyle(e)}),t.removeAllDoms=(()=>{void 0!==me&&me.empty()}),t.on=((e,r)=>{Te===!0?"remove"===e&&r(EMPTY_E(),t):(void 0===we[e]&&(we[e]=[]),we[e].push(r))})),at=(t.checkIsEventExists=(e=>{return void 0!==we[e]}),t.off=((e,t)=>{Te!==!0&&void 0!==we[e]&&(void 0!==t&&REMOVE({array:we[e],value:t}),void 0!==t&&0!==we[e].length||delete we[e])})),st=t.fireEvent=(e=>{let r,n;CHECK_IS_DATA(e)!==!0?r=e:(r=e.eventName,n=e.e);let i=we[r];if(void 0!==i)for(let o=0;o<i.length;o+=1)i[o](void 0===n?EMPTY_E():n,t)}),ut=(t.onMeet=((e,t)=>{Re.push(e),void 0===Me[e.id]&&(Me[e.id]=[]),Me[e.id].push(t),ct()}),t.offMeet=((e,t)=>{void 0===t?delete Me[e.id]:REMOVE({array:Me[e.id],value:t})}),t.runMeetHandlers=((e,t)=>{let r=Me[e.id];if(void 0!==r)for(let n=0;n<r.length;n+=1)r[n](t)})),lt=(t.onPart=((e,t)=>{Re.push(e),void 0===Pe[e.id]&&(Pe[e.id]=[]),Pe[e.id].push(t)}),t.offPart=((e,t)=>{void 0===t?delete Pe[e.id]:REMOVE({array:Pe[e.id],value:t})}),t.runPartHandlers=((e,t)=>{let r=Pe[e.id];if(void 0!==r)for(let n=0;n<r.length;n+=1)r[n](t)})),ct=(t.addTouchArea=(e=>{void 0!==xe&&(xe.lineStyle(1,16711935),e.drawArea(xe)),Ce.push(e),e.setTarget(t),e.on("remove",()=>{REMOVE({array:Ce,value:e})})}),t.getTouchAreas=(()=>{return Ce}),t.getTouchArea=(()=>{return Ce[0]}),t.addCollider=(e=>{void 0!==xe&&(xe.lineStyle(1,65280),e.drawArea(xe)),Ee.push(e),e.setTarget(t),e.on("remove",()=>{REMOVE({array:Ee,value:e})})}),t.getColliders=(()=>{return Ee}),t.getCollider=(()=>{return Ee[0]}),t.checkPoint=((e,t)=>{for(let r=0;r<be.length;r+=1)if(be[r].checkPoint(e,t)===!0)return!0;return!1}),t.checkArea=(e=>{for(let t=0;t<be.length;t+=1){let r=be[t];if(r.checkArea(e)===!0||e.checkArea(r)===!0)return!0}return!1}),t.checkTouch=((e,r)=>{if(Te===!0||t.checkIsHiding()===!0)return!1;for(let n=0;n<Ce.length;n+=1)if(Ce[n].checkPoint(e,r)===!0)return!0;for(let n=0;n<be.length;n+=1)if(be[n].checkTouch(e,r)===!0)return!0;return!1}),t.checkOneSideCollision=(e=>{if(Te===!0||t.checkIsHiding()===!0)return!1;if(e.type===CLASS){let r=SkyEngine.Screen.findNodesByClass(e);for(let n=0;n<r.length;n+=1){let e=r[n];if(e!==t&&t.checkOneSideCollision(e)===!0)return!0}}else{if(e.checkIsHiding()===!0)return!1;for(let t=0;t<Ee.length;t+=1)if(e.checkIsRemoved()!==!0){let r=Ee[t],n=e.getColliders();for(let i=0;i<n.length;i+=1){let e=n[i];if(r.checkArea(e)===!0||e.checkArea(r)===!0)return!0}}for(let t=0;t<be.length;t+=1)if(be[t].checkOneSideCollision(e)===!0)return!0}return!1}),t.checkCollision=(e=>{if(e.type===CLASS){let r=SkyEngine.Screen.findNodesByClass(e);for(let n=0;n<r.length;n+=1){let e=r[n];if(e!==t&&e.checkIsRemoved()!==!0&&(t.checkOneSideCollision(e)===!0||t.type!==e.type&&e.checkOneSideCollision(t)===!0))return!0}}else if(e.checkIsRemoved()!==!0&&(t.checkOneSideCollision(e)===!0||t.type!==e.type&&e.checkOneSideCollision(t)===!0))return!0;return!1}),t.checkOffScreen=(()=>{for(let e=0;e<be.length;e+=1)if(be[e].checkOffScreen()!==!0)return!1;return!0}),()=>{for(let e=0;e<Re.length;e+=1){let r=Re[e];if(r.type===CLASS){let e=SkyEngine.Screen.findNodesByClass(r);for(let n=0;n<e.length;n+=1){let i=e[n];i!==t&&(i.checkIsRemoved()!==!0?(ht()===!0||i.checkIsToCheckCollision()===!0||(void 0===De||Math.abs(Y-i.getRealX())<De)&&(void 0===ke||Math.abs(z-i.getRealY())<ke))&&(t.checkOneSideCollision(i)===!0||t.type!==i.type&&i.checkOneSideCollision(t)===!0)?Te!==!0&&(Oe[i.id]=!0,ut(r,i)):Te!==!0&&void 0!==Oe[i.id]&&(delete Oe[i.id],lt(r,i)):delete Oe[i.id])}}else r.checkIsRemoved()!==!0?(ht()===!0||r.checkIsToCheckCollision()===!0||(void 0===De||Math.abs(Y-r.getRealX())<De)&&(void 0===ke||Math.abs(z-r.getRealY())<ke))&&(t.checkOneSideCollision(r)===!0||t.type!==r.type&&r.checkOneSideCollision(t)===!0)?void 0===Oe[r.id]&&(Oe[r.id]=!0,ut(r,r)):void 0!==Oe[r.id]&&(delete Oe[r.id],lt(r,r)):(Re.splice(e,1),e-=1,delete Oe[r.id],delete Me[r.id],delete Pe[r.id]);if(void 0===Re)break}}),ht=(t.step=(e=>{if(0===Ae){if(Q=n,J=i,0!==y&&(d+=y*e),void 0!==w&&d<w&&(d=w,0===d)){if(void 0!==ee){let e=ee;ee=void 0,e()}if(void 0!==$&&0===f){let e=$;$=void 0,e()}}if(void 0!==P&&d>P&&(d=P,0===d)){if(void 0!==ee){let e=ee;ee=void 0,e()}if(void 0!==$&&0===f){let e=$;$=void 0,e()}}if(0!==_&&(f+=_*e),void 0!==E&&f<E&&(f=E,0===f)){if(void 0!==te){let e=te;te=void 0,e()}if(void 0!==$&&0===d){let e=$;$=void 0,e()}}if(void 0!==A&&f>A&&(f=A,0===f)){if(void 0!==te){let e=te;te=void 0,e()}if(void 0!==$&&0===d){let e=$;$=void 0,e()}}if(0!==d){let t=d*e;if((t<0&&fe!==!0||t>0&&pe!==!0)&&(n+=t,void 0!==L&&(d>0&&n>L||d<0&&n<L))){if(n=L,L=void 0,w=void 0,P=void 0,d=0,y=0,void 0!==ee){let e=ee;ee=void 0,e()}if(void 0!==$&&0===f){let e=$;$=void 0,e()}}}if(0!==f){let t=f*e;if(t<0&&ge!==!0||t>0&&ve!==!0){if(i+=t,void 0!==B&&(f>0&&i>B||f<0&&i<B)){if(i=B,B=void 0,E=void 0,A=void 0,f=0,_=0,void 0!==te){let e=te;te=void 0,e()}if(void 0!==$&&0===d){let e=$;$=void 0,e()}}de===!0&&je(i)}}if(0!==x&&(p+=x*e),void 0!==C&&p<C&&(p=C),void 0!==I&&p>I&&(p=I),0!==b&&(g+=b*e),void 0!==R&&g<R&&(g=R),void 0!==D&&g>D&&(g=D),0!==p&&(u+=p*e,void 0!==N&&(p>0&&u>N||p<0&&u<N))){if(u=N,N=void 0,C=void 0,I=void 0,p=0,x=0,void 0!==ne){let e=ne;ne=void 0,e()}if(void 0!==re&&0===g){let e=re;re=void 0,e()}}if(0!==g&&(l+=g*e,void 0!==X&&(g>0&&l>X||g<0&&l<X))){if(l=X,X=void 0,R=void 0,D=void 0,g=0,b=0,void 0!==ie){let e=ie;ie=void 0,e()}if(void 0!==re&&0===p){let e=re;re=void 0,e()}}if(0!==S&&(v+=S*e),void 0!==O&&v<O&&(v=O),void 0!==k&&v>k&&(v=k),0!==v){if(c+=v*e,void 0!==j&&c+j<360&&(v>0&&c>=j||v<0&&c<=j)&&(c=j,j=void 0,O=void 0,k=void 0,v=0,S=0,void 0!==oe)){let e=oe;oe=void 0,e()}c>=360?c=0:c<=0&&(c=360)}if(0!==T&&(m+=T*e),void 0!==M&&m<M&&(m=M),void 0!==F&&m>F&&(m=F),0!==m){if(h+=m*e,void 0!==U&&(m>0&&h>U||m<0&&h<U)&&(h=U,U=void 0,M=void 0,F=void 0,m=0,T=0,void 0!==ae)){let e=ae;ae=void 0,e()}h>1?h=1:h<0&&(h=0)}if(qe(),Te!==!0)for(let r=0;r<Ce.length;r+=1)Ce[r].step(e);if(Te!==!0)for(let r=0;r<Ee.length;r+=1)Ee[r].step(e);if(Te!==!0&&ct(),Te!==!0)for(let r=0;r<be.length&&(be[r].step(e),void 0!==be);r+=1);if(Te!==!0&&void 0!==we.offscreen&&t.checkOffScreen()===!0&&st("offscreen"),Te!==!0&&void 0!==we.nextstep&&(st("nextstep"),at("nextstep")),Te===!0||void 0===we.move||n===Q&&i===J||st("move"),Fe.x=n,Fe.y=i,Fe.pivot.set(a,s),Fe.scale.set(u,l),Fe.rotation=c*Math.PI/180,Fe.alpha=h,void 0!==xe&&(xe.x=a,xe.y=s),Te!==!0&&void 0!==me){let e=SkyEngine.Screen.getRatio(),r=TO_DELETE,n=t;for(;void 0!==n;){if(void 0!==n.getFilter()){r=n.getFilter();break}n=n.getParent()}me.addStyle({left:SkyEngine.Screen.getLeft()+(SkyEngine.Screen.getWidth()/2+W-SkyEngine.Screen.getCameraFollowX())*e-me.getWidth()/2,top:SkyEngine.Screen.getTop()+(SkyEngine.Screen.getHeight()/2+G-SkyEngine.Screen.getCameraFollowY())*e-me.getHeight()/2,transform:"rotate("+q+"rad) scale("+e*H+", "+e*V+")",opacity:Ie===!0?0:Fe.worldAlpha,filter:r}),Ie=!1}}}),t.drawArea=(e=>{let r=t.getChildren();for(let n=0;n<r.length;n+=1)r[n].drawArea(e)}),t.pause=(()=>{Ae+=1}),t.checkIsPaused=(()=>{return Ae>0}),t.resume=(()=>{Ae-=1,Ae<0&&(Ae=0)}),t.checkIsToCheckCollision=(()=>{return he}));t.delay=((e,t)=>{let r=SkyEngine.Delay(e,t);return ot("remove",()=>{r.remove(),r=void 0}),r}),t.interval=((e,t)=>{let r=SkyEngine.Interval(e,t);return ot("remove",()=>{r.remove(),r=void 0}),r});if(qe(),BROWSER_CONFIG.SkyEngine.isDebugMode===!0){xe=new PIXI.Graphics,xe.lineStyle(1,65535),xe.drawRect(-1,-1,2,2),xe.moveTo(-15,0),xe.lineTo(15,0),xe.moveTo(0,-15),xe.lineTo(0,15);let e=t.getTouchAreas();xe.lineStyle(1,16711935);for(let r=0;r<e.length;r+=1)e[r].drawArea(xe);let n=t.getColliders();xe.lineStyle(1,65280);for(let r=0;r<n.length;r+=1)n[r].drawArea(xe);xe.zIndex=9999999,Le(xe)}},afterInit:(e,t,r)=>{void 0!==r&&(void 0!==r.c&&(CHECK_IS_ARRAY(r.c)===!0?EACH(r.c,e=>{void 0!==e&&t.append(e)}):t.append(r.c)),void 0!==r.dom&&(CHECK_IS_ARRAY(r.dom)===!0?EACH(r.dom,e=>{t.addDom(e)}):t.addDom(r.dom)),void 0!==r.domStyle&&t.addDomStyle(r.domStyle),void 0!==r.on&&EACH(r.on,(e,r)=>{void 0!==e&&t.on(r,e)}),void 0!==r.touchArea&&(CHECK_IS_ARRAY(r.touchArea)===!0?EACH(r.touchArea,e=>{t.addTouchArea(e)}):t.addTouchArea(r.touchArea)),void 0!==r.collider&&(CHECK_IS_ARRAY(r.collider)===!0?EACH(r.collider,e=>{t.addCollider(e)}):t.addCollider(r.collider)))}}),SkyEngine.Screen=OBJECT({preset:()=>{return SkyEngine.Node},init:(e,t)=>{let r=DIV({style:{position:"fixed",left:0,top:0,zIndex:-1}}).appendTo(BODY),n=CANVAS().appendTo(r),i=new PIXI.autoDetectRenderer({view:n.getEl(),transparent:!0}),o=new PIXI.Container;o.addChild(e.getPixiContainer());let a,s,u,l,c,h,d,f,p,g,v,m,y,_,x={},b=0,S=0,T=(t.registerNode=(e=>{let t=e.type;for(;void 0!==t&&t!==CLASS;)void 0===x[t.id]&&(x[t.id]=[]),x[t.id].push(e),t=t.mom}),t.unregisterNode=(e=>{let t=e.type;for(;void 0!==t&&t!==CLASS;){if(void 0!==x[t.id]){let r=x[t.id];for(let n=0;n<r.length;n+=1)if(r[n]===e){r.splice(n,1);break}0===x[t.id].length&&delete x[t.id]}t=t.mom}}),t.findNodesByClass=(e=>{return void 0===x[e.id]?[]:x[e.id]}));if(BROWSER_CONFIG.SkyEngine.isDebugMode===!0){let e=DIV({style:{position:"fixed",left:5,top:5,fontSize:12,zIndex:999999}}).appendTo(BODY);INTERVAL(.1,()=>{void 0!==h&&(e.empty(),e.append("FPS: "+parseInt(1/h)))})}EACH(["tap","touchstart","touchend"],e=>{n.on(e,r=>{let n,i=t=>{if(n!==!0&&(REVERSE_EACH(t.getChildren(),i),t.checkIsRemoved()!==!0&&t.checkIsEventExists(e)===!0&&t.checkTouch((r.getLeft()-WIN_WIDTH()/2)/c,(r.getTop()-WIN_HEIGHT()/2)/c)===!0)){let i=SkyEngine.E(r);t.fireEvent({eventName:e,e:i}),i.checkIsBubblingStoped()===!0&&(n=!0)}};i(t)})});let w=LOOP(e=>{if(h=e,h>.03&&(h=.03),t.checkIsPaused()!==!0){SkyEngine.Delay.step(h),SkyEngine.Interval.step(h),t.step(h);let e=T(SkyEngine.FixedNode);for(let r=0;r<e.length;r+=1)e[r].step(0)}A.step(h),o.x=u/2-M(),o.y=l/2-P(),i.render(o)});EVENT("resize",RAR(()=>{let e=WIN_WIDTH(),t=WIN_HEIGHT(),o=!1,h=!1;void 0!==BROWSER_CONFIG.SkyEngine.width?u=BROWSER_CONFIG.SkyEngine.width:(u=e,o=!0),void 0!==BROWSER_CONFIG.SkyEngine.height?l=BROWSER_CONFIG.SkyEngine.height:(l=t,h=!0);let d=e/u,f=t/l;c=d<f?d:f,void 0!==BROWSER_CONFIG.SkyEngine.minWidth&&u/c<BROWSER_CONFIG.SkyEngine.minWidth&&(u=BROWSER_CONFIG.SkyEngine.minWidth,o=!1),void 0!==BROWSER_CONFIG.SkyEngine.minHeight&&l/c<BROWSER_CONFIG.SkyEngine.minHeight&&(l=BROWSER_CONFIG.SkyEngine.minHeight,h=!1),d=e/u,f=t/l,c=d<f?d:f,o===!0&&(u/=c),h===!0&&(l/=c),void 0!==BROWSER_CONFIG.SkyEngine.maxWidth&&u>BROWSER_CONFIG.SkyEngine.maxWidth&&(u=BROWSER_CONFIG.SkyEngine.maxWidth),void 0!==BROWSER_CONFIG.SkyEngine.maxHeight&&l>BROWSER_CONFIG.SkyEngine.maxHeight&&(l=BROWSER_CONFIG.SkyEngine.maxHeight),n.addStyle({width:u*c,height:l*c}),a=(e-u*c)/2,s=(t-l*c)/2,r.addStyle({left:a,top:s}),n.setSize({width:u*devicePixelRatio,height:l*devicePixelRatio}),i.resize(u,l)})),t.on("remove",()=>{w.remove()});let E=t.cameraFollowX=(e=>{p=e.target,d=e.centerX,void 0===d&&(d=0),v=e.minX,y=e.maxX}),C=t.cameraFollowY=(e=>{g=e.target,f=e.centerY,void 0===f&&(f=0),m=e.minY,_=e.maxY}),R=(t.cameraFollow=(e=>{E(e),C(e)}),t.cameraUnfollowX=(()=>{p=void 0,v=void 0,y=void 0,b=0})),O=t.cameraUnfollowY=(()=>{g=void 0,m=void 0,_=void 0,S=0}),M=(t.cameraUnfollow=(()=>{R(),O()}),t.getCameraFollowX=(()=>{return void 0===p?b:p.checkIsRemoved()===!0?(p=void 0,b):(b=p.getRealX()-d,void 0!==v&&b<v?v:void 0!==y&&b>y?y:b)})),P=t.getCameraFollowY=(()=>{return void 0===g?S:g.checkIsRemoved()===!0?(g=void 0,S):(S=g.getRealY()-f,void 0!==m&&S<m?m:void 0!==_&&S>_?_:S)}),A=(t.getLeft=(()=>{return a}),t.getTop=(()=>{return s}),t.getWidth=(()=>{return u}),t.getHeight=(()=>{return l}),t.getRatio=(()=>{return c}),t.getCanvas=(()=>{return n}),t.getPixiRenderer=(()=>{return i}),SkyEngine.Node());t.getNonePausableNode=(()=>{return A})}}),SkyEngine.TextBorderShadow=METHOD({run:e=>{return"1px 1px 0 "+e+",-1px 1px 0 "+e+",1px -1px 0 "+e+",-1px -1px 0 "+e+",0px 1px 0 "+e+",0px -1px 0 "+e+",-1px 0px 0 "+e+",1px 0px 0 "+e}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.PIXI=e()}}(function(){var e;return function(){function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}return e}()({1:[function(e,t,r){"use strict";"use restrict";function n(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var i=32;r.INT_BITS=i,r.INT_MAX=2147483647,r.INT_MIN=-1<<i-1,r.sign=function(e){return(e>0)-(e<0)},r.abs=function(e){var t=e>>i-1;return(e^t)-t},r.min=function(e,t){return t^(e^t)&-(e<t)},r.max=function(e,t){return e^(e^t)&-(e<t)},r.isPow2=function(e){return!(e&e-1||!e)},r.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1},r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},r.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},r.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},r.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var o=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(o),r.reverse=function(e){return o[255&e]<<24|o[e>>>8&255]<<16|o[e>>>16&255]<<8|o[e>>>24&255]},r.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},r.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},r.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},r.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],2:[function(e,t,r){"use strict";function n(e,t,r){r=r||2;var n=t&&t.length,o=n?t[0]*r:e.length,s=i(e,0,o,r,!0),u=[];if(!s)return u;var l,c,d,f,p,g,v;if(n&&(s=h(e,t,s,r)),e.length>80*r){l=d=e[0],c=f=e[1];for(var m=r;m<o;m+=r)p=e[m],g=e[m+1],p<l&&(l=p),g<c&&(c=g),p>d&&(d=p),g>f&&(f=g);v=Math.max(d-l,f-c),v=0!==v?1/v:0}return a(s,u,r,l,c,v),u}function i(e,t,r,n,i){var o,a;if(i===A(e,t,r,n)>0)for(o=t;o<r;o+=n)a=O(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=O(o,e[o],e[o+1],a);return a&&S(a,a.next)&&(M(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var r,n=e;do if(r=!1,n.steiner||!S(n,n.next)&&0!==b(n.prev,n,n.next))n=n.next;else{if(M(n),n=t=n.prev,n===n.next)break;r=!0}while(r||n!==t);return t}function a(e,t,r,n,i,h,d){if(e){!d&&h&&g(e,n,i,h);for(var f,p,v=e;e.prev!==e.next;)if(f=e.prev,p=e.next,h?u(e,n,i,h):s(e))t.push(f.i/r),t.push(e.i/r),t.push(p.i/r),M(e),e=p.next,v=p.next;else if(e=p,e===v){d?1===d?(e=l(e,t,r),a(e,t,r,n,i,h,2)):2===d&&c(e,t,r,n,i,h):a(o(e),t,r,n,i,h,1);break}}}function s(e){var t=e.prev,r=e,n=e.next;if(b(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(_(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&b(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,r,n){var i=e.prev,o=e,a=e.next;if(b(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=m(s,u,t,r,n),d=m(l,c,t,r,n),f=e.prevZ,p=e.nextZ;f&&f.z>=h&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&b(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&b(f.prev,f,f.next)>=0)return!1;
f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function l(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!S(i,o)&&T(i,n,n.next,o)&&E(i,o)&&E(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),M(n),M(n.next),n=e=o),n=n.next}while(n!==e);return n}function c(e,t,r,n,i,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&x(u,l)){var c=R(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,t,r,n,i,s),void a(c,t,r,n,i,s)}l=l.next}u=u.next}while(u!==e)}function h(e,t,r,n){var a,s,u,l,c,h=[];for(a=0,s=t.length;a<s;a++)u=t[a]*n,l=a<s-1?t[a+1]*n:e.length,c=i(e,u,l,n,!1),c===c.next&&(c.steiner=!0),h.push(y(c));for(h.sort(d),a=0;a<h.length;a++)f(h[a],r),r=o(r,r.next);return r}function d(e,t){return e.x-t.x}function f(e,t){if(t=p(e,t)){var r=R(t,e);o(r,r.next)}}function p(e,t){var r,n=t,i=e.x,o=e.y,a=-(1/0);do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var u,l=r,c=r.x,h=r.y,d=1/0;for(n=r.next;n!==l;)i>=n.x&&n.x>=c&&i!==n.x&&_(o<h?i:a,o,c,h,o<h?a:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),(u<d||u===d&&n.x>r.x)&&E(n,e)&&(r=n,d=u)),n=n.next;return r}function g(e,t,r,n){var i=e;do null===i.z&&(i.z=m(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,v(i)}function v(e){var t,r,n,i,o,a,s,u,l=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ,n);t++);for(u=l;s>0||u>0&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(a>1);return e}function m(e,t,r,n,i){return e=32767*(e-r)*i,t=32767*(t-n)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function y(e){var t=e,r=e;do t.x<r.x&&(r=t),t=t.next;while(t!==e);return r}function _(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function x(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!w(e,t)&&E(e,t)&&E(t,e)&&C(e,t)}function b(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function S(e,t){return e.x===t.x&&e.y===t.y}function T(e,t,r,n){return!!(S(e,t)&&S(r,n)||S(e,n)&&S(r,t))||b(e,t,r)>0!=b(e,t,n)>0&&b(r,n,e)>0!=b(r,n,t)>0}function w(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&T(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function E(e,t){return b(e.prev,e,e.next)<0?b(e,t,e.next)>=0&&b(e,e.prev,t)>=0:b(e,t,e.prev)<0||b(e,e.next,t)<0}function C(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function R(e,t){var r=new P(e.i,e.x,e.y),n=new P(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function O(e,t,r,n){var i=new P(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function M(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function P(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}t.exports=n,t.exports.default=n,n.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(A(e,0,o,r));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*r,c=s<u-1?t[s+1]*r:e.length;a-=Math.abs(A(e,l,c,r))}var h=0;for(s=0;s<n.length;s+=3){var d=n[s]*r,f=n[s+1]*r,p=n[s+2]*r;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},n.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}},{}],3:[function(e,t,r){"use strict";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(){this._events=new n,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,s="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(s=!1)),o.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)a.call(e,t)&&r.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e,t){var r=s?s+e:e,n=this._events[r];if(t)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a},o.prototype.emit=function(e,t,r,n,i,o){var a=s?s+e:e;if(!this._events[a])return!1;var u,l,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,i),!0;case 6:return c.fn.call(c.context,t,r,n,i,o),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,n);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},o.prototype.on=function(e,t,r){var n=new i(t,r||this),o=s?s+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.once=function(e,t,r){var n=new i(t,r||this,!0),o=s?s+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.removeListener=function(e,t,r,i){var o=s?s+e:e;if(!this._events[o])return this;if(!t)return 0===--this._eventsCount?this._events=new n:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||(0===--this._eventsCount?this._events=new n:delete this._events[o]);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==t||i&&!a[u].once||r&&a[u].context!==r)&&l.push(a[u]);l.length?this._events[o]=1===l.length?l[0]:l:0===--this._eventsCount?this._events=new n:delete this._events[o]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new n:delete this._events[t])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,"undefined"!=typeof t&&(t.exports=o)},{}],4:[function(t,r,n){!function(t){var n=/iPhone/i,i=/iPod/i,o=/iPad/i,a=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,s=/Android/i,u=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,c=/Windows Phone/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,d=/BlackBerry/i,f=/BB10/i,p=/Opera Mini/i,g=/(CriOS|Chrome)(?=.*\bMobile\b)/i,v=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,m=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),y=function(e,t){return e.test(t)},_=function(e){var t=e||navigator.userAgent,r=t.split("[FBAN");if("undefined"!=typeof r[1]&&(t=r[0]),r=t.split("Twitter"),"undefined"!=typeof r[1]&&(t=r[0]),this.apple={phone:y(n,t),ipod:y(i,t),tablet:!y(n,t)&&y(o,t),device:y(n,t)||y(i,t)||y(o,t)},this.amazon={phone:y(u,t),tablet:!y(u,t)&&y(l,t),device:y(u,t)||y(l,t)},this.android={phone:y(u,t)||y(a,t),tablet:!y(u,t)&&!y(a,t)&&(y(l,t)||y(s,t)),device:y(u,t)||y(l,t)||y(a,t)||y(s,t)},this.windows={phone:y(c,t),tablet:y(h,t),device:y(c,t)||y(h,t)},this.other={blackberry:y(d,t),blackberry10:y(f,t),opera:y(p,t),firefox:y(v,t),chrome:y(g,t),device:y(d,t)||y(f,t)||y(p,t)||y(v,t)||y(g,t)},this.seven_inch=y(m,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},x=function(){var e=new _;return e.Class=_,e};"undefined"!=typeof r&&r.exports&&"undefined"==typeof window?r.exports=_:"undefined"!=typeof r&&r.exports&&"undefined"!=typeof window?r.exports=x():"function"==typeof e&&e.amd?e("isMobile",[],t.isMobile=x()):t.isMobile=x()}(this)},{}],5:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r,i){void 0===r&&(r=!1),n(this,e),this._fn=t,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return o(e,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),e}(),s=function(){function e(){n(this,e),this._head=this._tail=void 0}return o(e,[{key:"handlers",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this._head;if(e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r}},{key:"has",value:function(e){if(!(e instanceof a))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return i(this,new a(e,!1,t))}},{key:"once",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return i(this,new a(e,!0,t))}},{key:"detach",value:function(e){if(!(e instanceof a))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),e}();s.MiniSignalBinding=a,r.default=s,t.exports=r.default},{}],6:[function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==n.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=i()?Object.assign:function(e,t){for(var r,i,u=n(e),l=1;l<arguments.length;l++){r=Object(arguments[l]);for(var c in r)a.call(r,c)&&(u[c]=r[c]);if(o){i=o(r);for(var h=0;h<i.length;h++)s.call(r,i[h])&&(u[i[h]]=r[i[h]])}}return u}},{}],7:[function(e,t,r){"use strict";t.exports=function(e,t){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(e,t,n){t&&(i[r.q.name][t]=n)}),i}},{}],8:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,i="/"===a.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(e){var i=r.isAbsolute(e),o="/"===a(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=n(e.split("/")),o=n(t.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:26}],9:[function(e,t,r){var n=new ArrayBuffer(0),i=function(e,t,r,i){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=i||e.STATIC_DRAW,this.data=n,r&&this.upload(r),this._updateID=0};i.prototype.upload=function(e,t,r){r||this.bind();var n=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?n.bufferSubData(this.type,t,e):n.bufferData(this.type,e,this.drawType),this.data=e},i.prototype.bind=function(){var e=this.gl;e.bindBuffer(this.type,this.buffer)},i.createVertexBuffer=function(e,t,r){return new i(e,e.ARRAY_BUFFER,t,r)},i.createIndexBuffer=function(e,t,r){return new i(e,e.ELEMENT_ARRAY_BUFFER,t,r)},i.create=function(e,t,r,n){return new i(e,t,r,n)},i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=i},{}],10:[function(e,t,r){var n=e("./GLTexture"),i=function(e,t,r){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=r||100};i.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new n(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(e,t,r,n){this.bind();var i=this.gl;i.clearColor(e,t,r,n),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},i.prototype.resize=function(e,t){var r=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t))},i.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(e,t,r,o){var a=n.fromData(e,null,t,r);a.enableNearestScaling(),a.enableWrapClamp();var s=new i(e,t,r);return s.enableTexture(a),s.unbind(),s},i.createFloat32=function(e,t,r,o){var a=new n.fromData(e,o,t,r);a.enableNearestScaling(),a.enableWrapClamp();var s=new i(e,t,r);return s.enableTexture(a),s.unbind(),s},t.exports=i},{"./GLTexture":12}],11:[function(e,t,r){var n=e("./shader/compileProgram"),i=e("./shader/extractAttributes"),o=e("./shader/extractUniforms"),a=e("./shader/setPrecision"),s=e("./shader/generateUniformAccessObject"),u=function(e,t,r,u,l){this.gl=e,u&&(t=a(t,u),r=a(r,u)),this.program=n(e,t,r,l),this.attributes=i(e,this.program),this.uniformData=o(e,this.program),this.uniforms=s(e,this.uniformData)};u.prototype.bind=function(){return this.gl.useProgram(this.program),this},u.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;var e=this.gl;e.deleteProgram(this.program)},t.exports=u},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(e,t,r){var n=function(e,t,r,n,i){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=r||-1,this.format=n||e.RGBA,this.type=i||e.UNSIGNED_BYTE};n.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=e.videoWidth||e.width,n=e.videoHeight||e.height;n!==this.height||r!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=r,this.height=n};var i=!1;n.prototype.uploadData=function(e,t,r){this.bind();var n=this.gl;if(e instanceof Float32Array){if(!i){var o=n.getExtension("OES_texture_float");if(!o)throw new Error("floating point textures not available");i=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||r!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,t,r,0,this.format,this.type,e||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,this.format,this.type,e||null),this.width=t,this.height=r},n.prototype.bind=function(e){var t=this.gl;void 0!==e&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},n.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)},n.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)},n.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},n.prototype.destroy=function(){var e=this.gl;e.deleteTexture(this.texture)},n.fromSource=function(e,t,r){var i=new n(e);return i.premultiplyAlpha=r||!1,i.upload(t),i},n.fromData=function(e,t,r,i){var o=new n(e);return o.uploadData(t,r,i),o},t.exports=n},{}],13:[function(e,t,r){function n(e,t){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var i=e("./setVertexAttribArrays");n.prototype.constructor=n,t.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var e=this.gl,t=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];t!==n.buffer&&(n.buffer.bind(),t=n.buffer),e.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||e.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(e,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(e,t,r,n,i,o){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:r||this.gl.FLOAT,normalized:n||!1,stride:i||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(e,t,r){var n=this.gl;return this.indexBuffer?n.drawElements(e,t||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(r||0)):n.drawArrays(e,r,t||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(e,t,r){var n=function(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r};t.exports=n},{}],15:[function(e,t,r){var n={createContext:e("./createContext"),setVertexAttribArrays:e("./setVertexAttribArrays"),GLBuffer:e("./GLBuffer"),GLFramebuffer:e("./GLFramebuffer"),GLShader:e("./GLShader"),GLTexture:e("./GLTexture"),VertexArrayObject:e("./VertexArrayObject"),shader:e("./shader")};"undefined"!=typeof t&&t.exports&&(t.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(e,t,r){var n=function(e,t,r){var n;if(r){var i=r.tempAttribState,o=r.attribState;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<t.length;n++)i[t[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==i[n]&&(o[n]=i[n],r.attribState[n]?e.enableVertexAttribArray(n):e.disableVertexAttribArray(n))}else for(n=0;n<t.length;n++){var a=t[n];e.enableVertexAttribArray(a.attribute.location)}};t.exports=n},{}],17:[function(e,t,r){var n=function(e,t,r,n){var o=i(e,e.VERTEX_SHADER,t),a=i(e,e.FRAGMENT_SHADER,r),s=e.createProgram();if(e.attachShader(s,o),e.attachShader(s,a),n)for(var u in n)e.bindAttribLocation(s,n[u],u);return e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(s,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(s)),e.deleteProgram(s),s=null),e.deleteShader(o),e.deleteShader(a),s},i=function(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(console.log(e.getShaderInfoLog(n)),null)};t.exports=n},{}],18:[function(e,t,r){var n=function(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return i(2*t);case"bvec3":return i(3*t);case"bvec4":return i(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},i=function(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t};t.exports=n},{}],19:[function(e,t,r){var n=e("./mapType"),i=e("./mapSize"),o=function(e,t){for(var r={},o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var u=e.getActiveAttrib(t,s),l=n(e,u.type);r[u.name]={type:l,size:i(l),location:e.getAttribLocation(t,u.name),pointer:a}}return r},a=function(e,t,r,n){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,r||0,n||0)};t.exports=o},{"./mapSize":23,"./mapType":24}],20:[function(e,t,r){var n=e("./mapType"),i=e("./defaultValue"),o=function(e,t){for(var r={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<o;a++){var s=e.getActiveUniform(t,a),u=s.name.replace(/\[.*?\]/,""),l=n(e,s.type);r[u]={type:l,size:s.size,location:e.getUniformLocation(t,u),value:i(l,s.size)}}return r};t.exports=o},{"./defaultValue":18,"./mapType":24}],21:[function(e,t,r){function n(e,t){return function(r){this.data[e].value=r;var n=this.data[e].location;1===t.size?s[t.type](this.gl,n,r):u[t.type](this.gl,n,r)}}function i(e,t){for(var r=t,n=0;n<e.length-1;n++){var i=r[e[n]]||{data:{}};r[e[n]]=i,r=i}return r}var o=function(e,t){var r={data:{}};r.gl=e;for(var o=Object.keys(t),s=0;s<o.length;s++){var u=o[s],l=u.split("."),c=l[l.length-1],h=i(l,r),d=t[u];h.data[c]=d,h.gl=e,Object.defineProperty(h,c,{get:a(c),set:n(c,d)})}return r},a=function(e){return function(){return this.data[e].value}},s={float:function(e,t,r){e.uniform1f(t,r)},vec2:function(e,t,r){e.uniform2f(t,r[0],r[1])},vec3:function(e,t,r){e.uniform3f(t,r[0],r[1],r[2])},vec4:function(e,t,r){e.uniform4f(t,r[0],r[1],r[2],r[3])},int:function(e,t,r){e.uniform1i(t,r)},ivec2:function(e,t,r){e.uniform2i(t,r[0],r[1])},ivec3:function(e,t,r){e.uniform3i(t,r[0],r[1],r[2])},ivec4:function(e,t,r){e.uniform4i(t,r[0],r[1],r[2],r[3])},bool:function(e,t,r){e.uniform1i(t,r)},bvec2:function(e,t,r){e.uniform2i(t,r[0],r[1])},bvec3:function(e,t,r){e.uniform3i(t,r[0],r[1],r[2])},bvec4:function(e,t,r){e.uniform4i(t,r[0],r[1],r[2],r[3])},mat2:function(e,t,r){e.uniformMatrix2fv(t,!1,r)},mat3:function(e,t,r){e.uniformMatrix3fv(t,!1,r)},mat4:function(e,t,r){e.uniformMatrix4fv(t,!1,r)},sampler2D:function(e,t,r){e.uniform1i(t,r)}},u={float:function(e,t,r){e.uniform1fv(t,r)},vec2:function(e,t,r){e.uniform2fv(t,r)},vec3:function(e,t,r){e.uniform3fv(t,r)},vec4:function(e,t,r){e.uniform4fv(t,r)},int:function(e,t,r){e.uniform1iv(t,r)},ivec2:function(e,t,r){e.uniform2iv(t,r)},ivec3:function(e,t,r){e.uniform3iv(t,r)},ivec4:function(e,t,r){e.uniform4iv(t,r)},bool:function(e,t,r){e.uniform1iv(t,r)},bvec2:function(e,t,r){e.uniform2iv(t,r)},bvec3:function(e,t,r){e.uniform3iv(t,r)},bvec4:function(e,t,r){e.uniform4iv(t,r)},sampler2D:function(e,t,r){e.uniform1iv(t,r)}};t.exports=o},{}],22:[function(e,t,r){t.exports={compileProgram:e("./compileProgram"),defaultValue:e("./defaultValue"),extractAttributes:e("./extractAttributes"),extractUniforms:e("./extractUniforms"),generateUniformAccessObject:e("./generateUniformAccessObject"),setPrecision:e("./setPrecision"),mapSize:e("./mapSize"),mapType:e("./mapType")}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(e,t,r){var n=function(e){return i[e]},i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=n},{}],24:[function(e,t,r){var n=function(e,t){if(!i){var r=Object.keys(o);i={};for(var n=0;n<r.length;++n){var a=r[n];i[e[a]]=o[a]}}return i[t]},i=null,o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=n},{}],25:[function(e,t,r){var n=function(e,t){return"precision"!==e.substring(0,9)?"precision "+t+" float;\n"+e:e};t.exports=n},{}],26:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(h===setTimeout)return setTimeout(e,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){v&&p&&(v=!1,p.length?g=p.concat(g):m=-1,g.length&&u())}function u(){if(!v){var e=o(s);v=!0;for(var t=g.length;t;){for(p=g,g=[];++m<t;)p&&p[m].run();m=-1,t=g.length}p=null,v=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var h,d,f=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(e){h=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var p,g=[],v=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];g.push(new l(e,t)),1!==g.length||v||o(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported");
},f.umask=function(){return 0}},{}],27:[function(t,r,n){(function(t){!function(i){function o(e){throw new RangeError(k[e])}function a(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function s(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(D,".");var i=e.split("."),o=a(i,t).join(".");return n+o}function u(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function l(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=B(e>>>10&1023|55296),e=56320|1023&e),t+=B(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:T}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,r){var n=0;for(e=r?L(e/R):e>>1,e+=L(e/t);e>F*E>>1;n+=T)e=L(e/F);return L(n+(F+1)*e/(e+C))}function f(e){var t,r,n,i,a,s,u,h,f,p,g=[],v=e.length,m=0,y=M,_=O;for(r=e.lastIndexOf(P),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&o("not-basic"),g.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<v;){for(a=m,s=1,u=T;i>=v&&o("invalid-input"),h=c(e.charCodeAt(i++)),(h>=T||h>L((S-m)/s))&&o("overflow"),m+=h*s,f=u<=_?w:u>=_+E?E:u-_,!(h<f);u+=T)p=T-f,s>L(S/p)&&o("overflow"),s*=p;t=g.length+1,_=d(m-a,t,0==a),L(m/t)>S-y&&o("overflow"),y+=L(m/t),m%=t,g.splice(m++,0,y)}return l(g)}function p(e){var t,r,n,i,a,s,l,c,f,p,g,v,m,y,_,x=[];for(e=u(e),v=e.length,t=M,r=0,a=O,s=0;s<v;++s)g=e[s],g<128&&x.push(B(g));for(n=i=x.length,i&&x.push(P);n<v;){for(l=S,s=0;s<v;++s)g=e[s],g>=t&&g<l&&(l=g);for(m=n+1,l-t>L((S-r)/m)&&o("overflow"),r+=(l-t)*m,t=l,s=0;s<v;++s)if(g=e[s],g<t&&++r>S&&o("overflow"),g==t){for(c=r,f=T;p=f<=a?w:f>=a+E?E:f-a,!(c<p);f+=T)_=c-p,y=T-p,x.push(B(h(p+_%y,0))),c=L(_/y);x.push(B(h(c,0))),a=d(r,m,n==i),r=0,++n}++r,++t}return x.join("")}function g(e){return s(e,function(e){return A.test(e)?f(e.slice(4).toLowerCase()):e})}function v(e){return s(e,function(e){return I.test(e)?"xn--"+p(e):e})}var m="object"==typeof n&&n&&!n.nodeType&&n,y="object"==typeof r&&r&&!r.nodeType&&r,_="object"==typeof t&&t;_.global!==_&&_.window!==_&&_.self!==_||(i=_);var x,b,S=2147483647,T=36,w=1,E=26,C=38,R=700,O=72,M=128,P="-",A=/^xn--/,I=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=T-w,L=Math.floor,B=String.fromCharCode;if(x={version:"1.4.1",ucs2:{decode:u,encode:l},decode:f,encode:p,toASCII:v,toUnicode:g},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return x});else if(m&&y)if(r.exports==m)y.exports=x;else for(b in x)x.hasOwnProperty(b)&&(m[b]=x[b]);else i.punycode=x}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,d,f,p,g=e[c].replace(s,"%20"),v=g.indexOf(r);v>=0?(h=g.substr(0,v),d=g.substr(v+1)):(h=g,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),n(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],29:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(i(a))+r;return o(e[a])?n(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],30:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":28,"./encode":29}],31:[function(e,t,r){"use strict";t.exports=function(e,t,r){var n,i=e.length;if(!(t>=i||0===r)){r=t+r>i?i-t:r;var o=i-r;for(n=t;n<o;++n)e[n]=e[n+r];e.length=o}}},{}],32:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("mini-signals"),l=i(u),c=e("parse-uri"),h=i(c),d=e("./async"),f=n(d),p=e("./Resource"),g=i(p),v=100,m=/(#[\w-]+)?$/,y=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;o(this,e),this.baseUrl=r,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,r){return t._loadResource(e,r)},this._queue=f.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new l.default,this.onError=new l.default,this.onLoad=new l.default,this.onStart=new l.default,this.onComplete=new l.default}return e.prototype.add=function(e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}if("object"===("undefined"==typeof e?"undefined":a(e))&&(n=t||e.callback||e.onComplete,r=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(n=r,r=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new g.default(e,t,r),"function"==typeof n&&this.resources[e].onAfterMiddleware.once(n),this.loading){for(var o=r.parentResource,s=[],u=0;u<o.children.length;++u)o.children[u].isComplete||s.push(o.children[u]);var l=o.progressChunk*(s.length+1),c=l/(s.length+2);o.children.push(this.resources[e]),o.progressChunk=c;for(var h=0;h<s.length;++h)s[h].progressChunk=c;this.resources[e].progressChunk=c}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=this._queue._tasks.length,r=100/t,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},e.prototype._prepareUrl=function(e){var t=(0,h.default)(e,{strictMode:!0}),r=void 0;if(r=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var n=m.exec(r)[0];r=r.substr(0,r.length-n.length),r+=r.indexOf("?")!==-1?"&"+this.defaultQueryString:"?"+this.defaultQueryString,r+=n}return r},e.prototype._loadResource=function(e,t){var r=this;e._dequeue=t,f.eachSeries(this._beforeMiddleware,function(t,n){t.call(r,e,function(){n(e.isComplete?{}:null)})},function(){e.isComplete?r._onLoad(e):(e._onLoadBinding=e.onComplete.once(r._onLoad,r),e.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=v,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),f.eachSeries(this._afterMiddleware,function(r,n){r.call(t,e,n)},function(){e.onAfterMiddleware.dispatch(e),t.progress+=e.progressChunk,t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()},!0)},s(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),e}();r.default=y},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){}function a(e,t,r){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=r)}function s(e){return e.toString().replace("object ","")}r.__esModule=!0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("parse-uri"),c=n(l),h=e("mini-signals"),d=n(h),f=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),p=null,g=0,v=200,m=204,y=1223,_=2,x=function(){function e(t,r,n){if(i(this,e),"string"!=typeof t||"string"!=typeof r)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=o,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new d.default,this.onProgress=new d.default,this.onComplete=new d.default,this.onAfterMiddleware=new d.default}return e.setExtensionLoadType=function(t,r){a(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){a(e._xhrTypeMap,t,r)},e.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},e.prototype.load=function(t){var r=this;if(!this.isLoading){if(this.isComplete)return void(t&&setTimeout(function(){return t(r)},1));switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:f&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},e.prototype._hasFlag=function(e){return!!(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(e),null===this.data)return void this.abort("Unsupported element: "+e);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},e.prototype._createSource=function(e,t,r){r||(r=e+"/"+this._getExtension(t));var n=document.createElement("source");return n.src=t,n.type=r,n},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(s(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnAbort=function(){this.abort(s(this.xhr)+" Request was aborted by the user.")},e.prototype._xdrOnTimeout=function(){this.abort(s(this.xhr)+" Request timed out.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,r="",n="undefined"==typeof t.status?v:t.status;""!==t.responseType&&"text"!==t.responseType&&"undefined"!=typeof t.responseType||(r=t.responseText),n===g&&(r.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?n=v:n===y&&(n=m);var i=n/100|0;if(i!==_)return void this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var o=new DOMParser;this.data=o.parseFromString(r,"text/xml")}else{var a=document.createElement("div");a.innerHTML=r,this.data=a}this.type=e.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=t.response||r;this.complete()},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,p||(p=document.createElement("a")),p.href=e,e=(0,c.default)(p.href,{strictMode:!0});var r=!e.port&&""===t.port||e.port===t.port,n=e.protocol?e.protocol+":":"";return e.host===t.hostname&&r&&n===t.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var n=e.indexOf("?"),i=e.indexOf("#"),o=Math.min(n>-1?n:e.length,i>-1?i:e.length);e=e.substring(0,o),t=e.substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},u(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();r.default=x,x.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},x.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},x.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},x.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},x._loadTypeMap={gif:x.LOAD_TYPE.IMAGE,png:x.LOAD_TYPE.IMAGE,bmp:x.LOAD_TYPE.IMAGE,jpg:x.LOAD_TYPE.IMAGE,jpeg:x.LOAD_TYPE.IMAGE,tif:x.LOAD_TYPE.IMAGE,tiff:x.LOAD_TYPE.IMAGE,webp:x.LOAD_TYPE.IMAGE,tga:x.LOAD_TYPE.IMAGE,svg:x.LOAD_TYPE.IMAGE,"svg+xml":x.LOAD_TYPE.IMAGE,mp3:x.LOAD_TYPE.AUDIO,ogg:x.LOAD_TYPE.AUDIO,wav:x.LOAD_TYPE.AUDIO,mp4:x.LOAD_TYPE.VIDEO,webm:x.LOAD_TYPE.VIDEO},x._xhrTypeMap={xhtml:x.XHR_RESPONSE_TYPE.DOCUMENT,html:x.XHR_RESPONSE_TYPE.DOCUMENT,htm:x.XHR_RESPONSE_TYPE.DOCUMENT,xml:x.XHR_RESPONSE_TYPE.DOCUMENT,tmx:x.XHR_RESPONSE_TYPE.DOCUMENT,svg:x.XHR_RESPONSE_TYPE.DOCUMENT,tsx:x.XHR_RESPONSE_TYPE.DOCUMENT,gif:x.XHR_RESPONSE_TYPE.BLOB,png:x.XHR_RESPONSE_TYPE.BLOB,bmp:x.XHR_RESPONSE_TYPE.BLOB,jpg:x.XHR_RESPONSE_TYPE.BLOB,jpeg:x.XHR_RESPONSE_TYPE.BLOB,tif:x.XHR_RESPONSE_TYPE.BLOB,tiff:x.XHR_RESPONSE_TYPE.BLOB,webp:x.XHR_RESPONSE_TYPE.BLOB,tga:x.XHR_RESPONSE_TYPE.BLOB,json:x.XHR_RESPONSE_TYPE.JSON,text:x.XHR_RESPONSE_TYPE.TEXT,txt:x.XHR_RESPONSE_TYPE.TEXT,ttf:x.XHR_RESPONSE_TYPE.BUFFER,otf:x.XHR_RESPONSE_TYPE.BUFFER},x.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":5,"parse-uri":7}],34:[function(e,t,r){"use strict";function n(){}function i(e,t,r,n){var i=0,o=e.length;!function a(s){return s||i===o?void(r&&r(s)):void(n?setTimeout(function(){t(e[i++],a)},1):t(e[i++],a))}()}function o(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function a(e,t){function r(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(s.started=!0,null==e&&s.idle())return void setTimeout(function(){return s.drain()},1);var i={data:e,callback:"function"==typeof r?r:n};t?s._tasks.unshift(i):s._tasks.push(i),setTimeout(function(){return s.process()},1)}function i(e){return function(){a-=1,e.callback.apply(e,arguments),null!=arguments[0]&&s.error(arguments[0],e.data),a<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var a=0,s={_tasks:[],concurrency:t,saturated:n,unsaturated:n,buffer:t/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(e,t){r(e,!1,t)},kill:function(){a=0,s.drain=n,s.started=!1,s._tasks=[]},unshift:function(e,t){r(e,!0,t)},process:function(){for(;!s.paused&&a<s.concurrency&&s._tasks.length;){var t=s._tasks.shift();0===s._tasks.length&&s.empty(),a+=1,a===s.concurrency&&s.saturated(),e(t.data,o(i(t)))}},length:function(){return s._tasks.length},running:function(){return a},idle:function(){return s._tasks.length+a===0},pause:function(){s.paused!==!0&&(s.paused=!0)},resume:function(){if(s.paused!==!1){s.paused=!1;for(var e=1;e<=s.concurrency;e++)s.process()}}};return s}r.__esModule=!0,r.eachSeries=i,r.queue=a},{}],35:[function(e,t,r){"use strict";function n(e){for(var t="",r=0;r<e.length;){for(var n=[0,0,0],o=[0,0,0,0],a=0;a<n.length;++a)r<e.length?n[a]=255&e.charCodeAt(r++):n[a]=0;o[0]=n[0]>>2,o[1]=(3&n[0])<<4|n[1]>>4,o[2]=(15&n[1])<<2|n[2]>>6,o[3]=63&n[2];var s=r-(e.length-1);switch(s){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var u=0;u<o.length;++u)t+=i.charAt(o[u])}return t}r.__esModule=!0,r.encodeBinary=n;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],36:[function(e,t,r){"use strict";var n=e("./Loader").default,i=e("./Resource").default,o=e("./async"),a=e("./b64");n.Resource=i,n.async=o,n.base64=a,t.exports=n,t.exports.default=n},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return function(e,t){if(!e.data)return void t();if(e.xhr&&e.xhrType===s.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var r=function(){var r=c.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=r,e.type=s.default.TYPE.IMAGE,e.data.onload=function(){c.revokeObjectURL(r),e.data.onload=null,t()},{v:void 0}}();if("object"===("undefined"==typeof r?"undefined":o(r)))return r.v}}else{var n=e.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return e.data=new Image,e.data.src="data:"+n+";base64,"+l.default.encodeBinary(e.xhr.responseText),e.type=s.default.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}}r.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.blobMiddlewareFactory=i;var a=e("../../Resource"),s=n(a),u=e("../../b64"),l=n(u),c=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&l.isObject(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return l.isString(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=e("punycode"),l=e("./util");r.parse=i,r.resolve=a,r.resolveObject=s,r.format=o,r.Url=n;var c=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(f),g=["'"].concat(p),v=["%","/","?",";","#"].concat(g),m=["/","?","#"],y=255,_=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=e("querystring");n.prototype.parse=function(e,t,r){if(!l.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!r&&1===e.split("#").length){var h=d.exec(s);if(h)return this.path=s,this.href=s,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=c.exec(s);if(f){f=f[0];var p=f.toLowerCase();this.protocol=p,s=s.substr(f.length)}if(r||f||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===s.substr(0,2);!E||f&&S[f]||(s=s.substr(2),this.slashes=!0)}if(!S[f]&&(E||f&&!T[f])){for(var C=-1,R=0;R<m.length;R++){var O=s.indexOf(m[R]);O!==-1&&(C===-1||O<C)&&(C=O)}var M,P;P=C===-1?s.lastIndexOf("@"):s.lastIndexOf("@",C),P!==-1&&(M=s.slice(0,P),s=s.slice(P+1),this.auth=decodeURIComponent(M)),C=-1;for(var R=0;R<v.length;R++){var O=s.indexOf(v[R]);O!==-1&&(C===-1||O<C)&&(C=O)}C===-1&&(C=s.length),this.host=s.slice(0,C),s=s.slice(C),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var I=this.hostname.split(/\./),R=0,D=I.length;R<D;R++){var k=I[R];if(k&&!k.match(_)){for(var F="",L=0,B=k.length;L<B;L++)F+=k.charCodeAt(L)>127?"x":k[L];if(!F.match(_)){var N=I.slice(0,R),X=I.slice(R+1),j=k.match(x);j&&(N.push(j[1]),X.unshift(j[2])),X.length&&(s="/"+X.join(".")+s),this.hostname=N.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=u.toASCII(this.hostname));var U=this.port?":"+this.port:"",Y=this.hostname||"";this.host=Y+U,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!b[p])for(var R=0,D=g.length;R<D;R++){var z=g[R];if(s.indexOf(z)!==-1){var W=encodeURIComponent(z);W===z&&(W=escape(z)),s=s.split(z).join(W)}}var G=s.indexOf("#");G!==-1&&(this.hash=s.substr(G),s=s.slice(0,G));var H=s.indexOf("?");if(H!==-1?(this.search=s.substr(H),this.query=s.substr(H+1),t&&(this.query=w.parse(this.query)),s=s.slice(0,H)):t&&(this.search="",this.query={}),s&&(this.pathname=s),T[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",V=this.search||"";this.path=U+V}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=w.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||T[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(l.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(r[c]=e[c])}return T[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!T[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var f=h[d];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||S[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var g=r.pathname||"",v=r.search||"";r.path=g+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=y||m||r.host&&e.pathname,x=_,b=r.pathname&&r.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],w=r.protocol&&!T[r.protocol];if(w&&(r.hostname="",r.port=null,r.host&&(""===b[0]?b[0]=r.host:b.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),_=_&&(""===p[0]||""===b[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,b=p;else if(p.length)b||(b=[]),b.pop(),b=b.concat(p),r.search=e.search,r.query=e.query;else if(!l.isNullOrUndefined(e.search)){if(w){r.hostname=r.host=b.shift();var E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");E&&(r.auth=E.shift(),r.host=r.hostname=E.shift())}return r.search=e.search,r.query=e.query,l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var C=b.slice(-1)[0],R=(r.host||e.host||b.length>1)&&("."===C||".."===C)||""===C,O=0,M=b.length;M>=0;M--)C=b[M],"."===C?b.splice(M,1):".."===C?(b.splice(M,1),O++):O&&(b.splice(M,1),O--);if(!_&&!x)for(;O--;O)b.unshift("..");!_||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),R&&"/"!==b.join("/").substr(-1)&&b.push("");var P=""===b[0]||b[0]&&"/"===b[0].charAt(0);if(w){r.hostname=r.host=P?"":b.length?b.shift():"";var E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");E&&(r.auth=E.shift(),r.host=r.hostname=E.shift())}return _=_||r.host&&b.length,_&&!P&&b.unshift(""),b.length?r.pathname=b.join("/"):(r.pathname=null,r.path=null),l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":39,punycode:27,querystring:30}],39:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],40:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);
return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=e("../core"),s=i(a),u=e("ismobilejs"),l=n(u),c=e("./accessibleTarget"),h=n(c);s.utils.mixins.delayMixin(s.DisplayObject.prototype,h.default);var d=9,f=100,p=0,g=0,v=2,m=1,y=-1e3,_=-1e3,x=2,b=function(){function e(t){o(this,e),!l.default.tablet&&!l.default.phone||navigator.isCocoonJS||this.createTouchHook();var r=document.createElement("div");r.style.width=f+"px",r.style.height=f+"px",r.style.position="absolute",r.style.top=p+"px",r.style.left=g+"px",r.style.zIndex=v,this.div=r,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width=m+"px",t.style.height=m+"px",t.style.position="absolute",t.style.top=y+"px",t.style.left=_+"px",t.style.zIndex=x,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},e.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,r=e.height/this.renderer.height,n=this.div;n.style.left=e.left+"px",n.style.top=e.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.renderId!==this.renderId)o._accessibleActive=!1,s.utils.removeItems(this.children,i,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,i--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var a=o.hitArea,u=o.worldTransform;o.hitArea?(n.style.left=(u.tx+a.x*u.a)*t+"px",n.style.top=(u.ty+a.y*u.d)*r+"px",n.style.width=a.width*u.a*t+"px",n.style.height=a.height*u.d*r+"px"):(a=o.getBounds(),this.capHitArea(a),n.style.left=a.x*t+"px",n.style.top=a.y*r+"px",n.style.width=a.width*t+"px",n.style.height=a.height*r+"px",n.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(n.title=o.accessibleTitle),n.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&n.setAttribute("aria-label",o.accessibleHint))}}this.renderId++}},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=f+"px",t.style.height=f+"px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=v,t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},e.prototype._onFocus=function(e){e.target.getAttribute("aria-live","off")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},e.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live","off")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},e.prototype._onKeyDown=function(e){e.keyCode===d&&this.activate()},e.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();r.default=b,s.WebGLRenderer.registerPlugin("accessibility",b),s.CanvasRenderer.registerPlugin("accessibility",b)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(e,t,r){"use strict";r.__esModule=!0,r.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./accessibleTarget");Object.defineProperty(r,"accessibleTarget",{enumerable:!0,get:function(){return n(i).default}});var o=e("./AccessibilityManager");Object.defineProperty(r,"AccessibilityManager",{enumerable:!0,get:function(){return n(o).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./autoDetectRenderer"),s=e("./display/Container"),u=n(s),l=e("./ticker"),c=e("./settings"),h=n(c),d=e("./const"),f=function(){function e(t,r,n,o,s){i(this,e),"number"==typeof t&&(t=Object.assign({width:t,height:r||h.default.RENDER_OPTIONS.height,forceCanvas:!!o,sharedTicker:!!s},n)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,a.autoDetectRenderer)(t),this.stage=new u.default,this._ticker=null,this.ticker=t.sharedTicker?l.shared:new l.Ticker,t.autoStart&&this.start()}return e.prototype.render=function(){this.renderer.render(this.stage)},e.prototype.stop=function(){this._ticker.stop()},e.prototype.start=function(){this._ticker.start()},e.prototype.destroy=function(e,t){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},o(e,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,d.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),e}();r.default=f},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var r=e.slice(0);return r.unshift("precision "+t+" float;"),r}}else if("precision"!==e.trim().substring(0,9))return"precision "+t+" float;\n"+e;return e}r.__esModule=!0;var u=e("pixi-gl-core"),l=e("./settings"),c=n(l),h=function(e){function t(r,n,a,u,l){return i(this,t),o(this,e.call(this,r,s(n,l||c.default.PRECISION_VERTEX),s(a,l||c.default.PRECISION_FRAGMENT),void 0,u))}return a(t,e),t}(u.GLShader);r.default=h},{"./settings":101,"pixi-gl-core":15}],45:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t,r,n){var i=e&&e.forceCanvas;return void 0!==n&&(i=n),!i&&s.isWebGLSupported()?new h.default(e,t,r):new l.default(e,t,r)}r.__esModule=!0,r.autoDetectRenderer=o;var a=e("./utils"),s=i(a),u=e("./renderers/canvas/CanvasRenderer"),l=n(u),c=e("./renderers/webgl/WebGLRenderer"),h=n(c)},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(e,t,r){"use strict";r.__esModule=!0;r.VERSION="4.8.2",r.PI_2=2*Math.PI,r.RAD_TO_DEG=180/Math.PI,r.DEG_TO_RAD=Math.PI/180,r.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},r.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},r.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},r.SCALE_MODES={LINEAR:0,NEAREST:1},r.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},r.GC_MODES={AUTO:0,MANUAL:1},r.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,r.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},r.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},r.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},r.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},r.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=e("../math"),o=function(){function e(){n(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:(e=e||new i.Rectangle(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addQuad=function(e){var t=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=e[0],a=e[1];t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=e[2],a=e[3],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=e[4],a=e[5],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,o=e[6],a=e[7],t=o<t?o:t,r=a<r?a:r,n=o>n?o:n,i=a>i?a:i,this.minX=t,this.minY=r,this.maxX=n,this.maxY=i},e.prototype.addFrame=function(e,t,r,n,i){var o=e.worldTransform,a=o.a,s=o.b,u=o.c,l=o.d,c=o.tx,h=o.ty,d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,v=a*t+u*r+c,m=s*t+l*r+h;d=v<d?v:d,f=m<f?m:f,p=v>p?v:p,g=m>g?m:g,v=a*n+u*r+c,m=s*n+l*r+h,d=v<d?v:d,f=m<f?m:f,p=v>p?v:p,g=m>g?m:g,v=a*t+u*i+c,m=s*t+l*i+h,d=v<d?v:d,f=m<f?m:f,p=v>p?v:p,g=m>g?m:g,v=a*n+u*i+c,m=s*n+l*i+h,d=v<d?v:d,f=m<f?m:f,p=v>p?v:p,g=m>g?m:g,this.minX=d,this.minY=f,this.maxX=p,this.maxY=g},e.prototype.addVertices=function(e,t,r,n){for(var i=e.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,c=i.ty,h=this.minX,d=this.minY,f=this.maxX,p=this.maxY,g=r;g<n;g+=2){var v=t[g],m=t[g+1],y=o*v+s*m+l,_=u*m+a*v+c;h=y<h?y:h,d=_<d?_:d,f=y>f?y:f,p=_>p?_:p}this.minX=h,this.minY=d,this.maxX=f,this.maxY=p},e.prototype.addBounds=function(e){var t=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>i?e.maxY:i},e.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=i&&n<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=n<s?n:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},e.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=i&&n<=o){var a=this.minX,s=this.minY,u=this.maxX,l=this.maxY;this.minX=r<a?r:a,this.minY=n<s?n:s,this.maxX=i>u?i:u,this.maxY=o>l?o:l}},e}();r.default=o},{"../math":70}],48:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../utils"),l=e("./DisplayObject"),c=n(l),h=function(e){function t(){i(this,t);var r=o(this,e.call(this));return r.children=[],r}return a(t,e),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.addChild(arguments[r]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},t.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(e);(0,u.removeItems)(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(e);if(n===-1)return null;e.parent=null,e.transform._parentID=-1,(0,u.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,u.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},t.prototype.removeChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=e,n="number"==typeof t?t:this.children.length,i=n-r,o=void 0;if(i>0&&i<=n){o=this.children.splice(r,i);for(var a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var s=0;s<o.length;++s)o[s].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var r=this.children[e];r.visible&&r.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderWebGL(e)}},t.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<t.length;n++)t[n].enabled&&this._enabledFilters.push(t[n]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}r&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(e);e.flush(),r&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},t.prototype._renderWebGL=function(e){},t.prototype._renderCanvas=function(e){},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.prototype.destroy=function(t){e.prototype.destroy.call(this);var r="boolean"==typeof t?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(t)},s(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;0!==t?this.scale.x=e/t:this.scale.x=1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;0!==t?this.scale.y=e/t:this.scale.y=1,this._height=e}}]),t}(c.default);r.default=h,h.prototype.containerUpdateTransform=h.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("eventemitter3"),l=n(u),c=e("../const"),h=e("../settings"),d=n(h),f=e("./TransformStatic"),p=n(f),g=e("./Transform"),v=n(g),m=e("./Bounds"),y=n(m),_=e("../math"),x=function(e){function t(){i(this,t);var r=o(this,e.call(this)),n=d.default.TRANSFORM_MODE===c.TRANSFORM_MODE.STATIC?p.default:v.default;return r.tempDisplayObjectParent=null,r.transform=new n,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r.filterArea=null,r._filters=null,r._enabledFilters=null,r._bounds=new y.default,r._boundsID=0,r._lastBoundsID=-1,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._destroyed=!1,r}return a(t,e),t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new _.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){var t=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(this._localBoundsRect||(this._localBoundsRect=new _.Rectangle),e=this._localBoundsRect);var n=this.getBounds(!1,e);return this.parent=r,this.transform=t,n},t.prototype.toGlobal=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,r,n){return t&&(e=t.toGlobal(e,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)},t.prototype.renderWebGL=function(e){},t.prototype.renderCanvas=function(e){},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=r?r:1,this.scale.y=n?n:1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},s(t,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),t}(l.default);r.default=x,x.prototype.displayObjectUpdateTransform=x.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../math"),l=e("./TransformBase"),c=n(l),h=function(e){function t(){i(this,t);var r=o(this,e.call(this));return r.position=new u.Point(0,0),r.scale=new u.Point(1,1),r.skew=new u.ObservablePoint(r.updateSkew,r,0,0),r.pivot=new u.Point(0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r}return a(t,e),t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},t.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},t.prototype.updateTransform=function(e){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._worldID++},t.prototype.setFromMatrix=function(e){e.decompose(this)},s(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(c.default);r.default=h},{"../math":70,"./TransformBase":51}],51:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=e("../math"),o=function(){function e(){n(this,e),this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this._worldID=0,this._parentID=0}return e.prototype.updateLocalTransform=function(){},e.prototype.updateTransform=function(e){var t=e.worldTransform,r=this.worldTransform,n=this.localTransform;r.a=n.a*t.a+n.b*t.c,r.b=n.a*t.b+n.b*t.d,r.c=n.c*t.a+n.d*t.c,r.d=n.c*t.b+n.d*t.d,r.tx=n.tx*t.a+n.ty*t.c+t.tx,r.ty=n.tx*t.b+n.ty*t.d+t.ty,this._worldID++},e}();r.default=o,o.prototype.updateWorldTransform=o.prototype.updateTransform,o.IDENTITY=new o},{"../math":70}],52:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../math"),l=e("./TransformBase"),c=n(l),h=function(e){function t(){i(this,t);var r=o(this,e.call(this));return r.position=new u.ObservablePoint(r.onChange,r,0,0),r.scale=new u.ObservablePoint(r.onChange,r,1,1),r.pivot=new u.ObservablePoint(r.onChange,r,0,0),r.skew=new u.ObservablePoint(r.updateSkew,r,0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r._localID=0,r._currentLocalID=0,r}return a(t,e),t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),
t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},s(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(c.default);r.default=h},{"../math":70,"./TransformBase":51}],53:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../display/Container"),u=n(s),l=e("../textures/RenderTexture"),c=n(l),h=e("../textures/Texture"),d=n(h),f=e("./GraphicsData"),p=n(f),g=e("../sprites/Sprite"),v=n(g),m=e("../math"),y=e("../utils"),_=e("../const"),x=e("../display/Bounds"),b=n(x),S=e("./utils/bezierCurveTo"),T=n(S),w=e("../renderers/canvas/CanvasRenderer"),E=n(w),C=void 0,R=new m.Matrix,O=new m.Point,M=new Float32Array(4),P=new Float32Array(4),A=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(this,t);var n=o(this,e.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=r,n.lineColor=0,n.lineAlignment=.5,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=_.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new b.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n._prevRectTint=null,n._prevRectFillColor=null,n}return a(t,e),t.prototype.clone=function e(){var e=new t;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.lineAlignment=this.lineAlignment,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var r=0;r<this.graphicsData.length;++r)e.graphicsData.push(this.graphicsData[r].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},t.prototype._quadraticCurveLength=function(e,t,r,n,i,o){var a=e-(2*r+i),s=t-(2*n+o),u=2*((r-2)*e),l=2*((n-2)*t),c=4*(a*a+s*s),h=4*(a*u+s*l),d=u*u+l*l,f=2*Math.sqrt(c+h+d),p=Math.sqrt(c),g=2*c*p,v=2*Math.sqrt(d),m=h/p;return(g*f+p*h*(f-v)+(4*d*c-h*h)*Math.log((2*p+m+f)/(m+v)))/(4*g)},t.prototype._bezierCurveLength=function(e,t,r,n,i,o,a,s){for(var u=10,l=0,c=0,h=0,d=0,f=0,p=0,g=0,v=0,m=0,y=0,_=0,x=e,b=t,S=1;S<=u;++S)c=S/u,h=c*c,d=h*c,f=1-c,p=f*f,g=p*f,v=g*e+3*p*c*r+3*f*h*i+d*a,m=g*t+3*p*c*n+3*f*h*o+d*s,y=x-v,_=b-m,x=v,b=m,l+=Math.sqrt(y*y+_*_);return l},t.prototype._segmentsCount=function(e){var r=Math.ceil(e/t.CURVES.maxLength);return r<t.CURVES.minSegments?r=t.CURVES.minSegments:r>t.CURVES.maxSegments&&(r=t.CURVES.maxSegments),r},t.prototype.lineStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=e,this.lineColor=t,this.lineAlpha=r,this.lineAlignment=n,this.currentPath)if(this.currentPath.shape.points.length){var i=new m.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},t.prototype.moveTo=function(e,t){var r=new m.Polygon([e,t]);return r.closed=!1,this.drawShape(r),this},t.prototype.lineTo=function(e,t){var r=this.currentPath.shape.points,n=r[r.length-2],i=r[r.length-1];return n===e&&i===t||(r.push(e,t),this.dirty++),this},t.prototype.quadraticCurveTo=function(e,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,a=0,s=0;0===o.length&&this.moveTo(0,0);for(var u=o[o.length-2],l=o[o.length-1],c=t.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(u,l,e,r,n,i)):20,h=1;h<=c;++h){var d=h/c;a=u+(e-u)*d,s=l+(r-l)*d,o.push(a+(e+(n-e)*d-a)*d,s+(r+(i-r)*d-s)*d)}return this.dirty++,this},t.prototype.bezierCurveTo=function(e,r,n,i,o,a){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,u=s[s.length-2],l=s[s.length-1];s.length-=2;var c=t.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(u,l,e,r,n,i,o,a)):20;return(0,T.default)(u,l,e,r,n,i,o,a,c,s),this.dirty++,this},t.prototype.arcTo=function(e,t,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],u=s-t,l=a-e,c=n-t,h=r-e,d=Math.abs(u*h-l*c);if(d<1e-8||0===i)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var f=u*u+l*l,p=c*c+h*h,g=u*c+l*h,v=i*Math.sqrt(f)/d,m=i*Math.sqrt(p)/d,y=v*g/f,_=m*g/p,x=v*h+m*l,b=v*c+m*u,S=l*(m+y),T=u*(m+y),w=h*(v+_),E=c*(v+_),C=Math.atan2(T-b,S-x),R=Math.atan2(E-b,w-x);this.arc(x+e,b+t,i,C,R,l*c>h*u)}return this.dirty++,this},t.prototype.arc=function(e,r,n,i,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(i===o)return this;!a&&o<=i?o+=_.PI_2:a&&i<=o&&(i+=_.PI_2);var s=o-i,u=t.CURVES.adaptive?this._segmentsCount(Math.abs(s)*n):40*Math.ceil(Math.abs(s)/_.PI_2);if(0===s)return this;var l=e+Math.cos(i)*n,c=r+Math.sin(i)*n,h=this.currentPath?this.currentPath.shape.points:null;if(h){var d=Math.abs(h[h.length-2]-l),f=Math.abs(h[h.length-1]-c);d<.001&&f<.001||h.push(l,c)}else this.moveTo(l,c),h=this.currentPath.shape.points;for(var p=s/(2*u),g=2*p,v=Math.cos(p),m=Math.sin(p),y=u-1,x=y%1/y,b=0;b<=y;++b){var S=b+x*b,T=p+i+g*S,w=Math.cos(T),E=-Math.sin(T);h.push((v*w+m*E)*n+e,(v*-E+m*w)*n+r)}return this.dirty++,this},t.prototype.beginFill=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=e,this.fillAlpha=t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},t.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},t.prototype.drawRect=function(e,t,r,n){return this.drawShape(new m.Rectangle(e,t,r,n)),this},t.prototype.drawRoundedRect=function(e,t,r,n,i){return this.drawShape(new m.RoundedRectangle(e,t,r,n,i)),this},t.prototype.drawCircle=function(e,t,r){return this.drawShape(new m.Circle(e,t,r)),this},t.prototype.drawEllipse=function(e,t,r,n){return this.drawShape(new m.Ellipse(e,t,r,n)),this},t.prototype.drawPolygon=function(e){var t=e,r=!0;if(t instanceof m.Polygon&&(r=t.closed,t=t.points),!Array.isArray(t)){t=new Array(arguments.length);for(var n=0;n<t.length;++n)t[n]=arguments[n]}var i=new m.Polygon(t);return i.closed=r,this.drawShape(i),this},t.prototype.drawStar=function(e,t,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i=i||n/2;for(var a=-1*Math.PI/2+o,s=2*r,u=_.PI_2/s,l=[],c=0;c<s;c++){var h=c%2?i:n,d=c*u+a;l.push(e+h*Math.cos(d),t+h*Math.sin(d))}return this.drawPolygon(l)},t.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},t.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_.SHAPES.RECT&&!this.graphicsData[0].lineWidth},t.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},t.prototype._renderSpriteRect=function(e){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new v.default(new d.default(d.default.WHITE)));var r=this._spriteRect,n=this.graphicsData[0].fillColor;if(16777215===this.tint)r.tint=n;else if(this.tint!==this._prevRectTint||n!==this._prevRectFillColor){var i=M,o=P;(0,y.hex2rgb)(n,i),(0,y.hex2rgb)(this.tint,o),i[0]*=o[0],i[1]*=o[1],i[2]*=o[2],r.tint=(0,y.rgb2hex)(i),this._prevRectTint=this.tint,this._prevRectFillColor=n}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=t.width,r._texture._frame.height=t.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-t.x/t.width,-t.y/t.height),r._onAnchorUpdate(),r._renderWebGL(e)},t.prototype._renderCanvas=function(e){this.isMask!==!0&&e.plugins.graphics.render(this)},t.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,O);for(var t=this.graphicsData,r=0;r<t.length;++r){var n=t[r];if(n.fill&&n.shape&&n.shape.contains(O.x,O.y)){if(n.holes)for(var i=0;i<n.holes.length;i++){var o=n.holes[i];if(o.contains(O.x,O.y))return!1}return!0}}return!1},t.prototype.updateLocalBounds=function(){var e=1/0,t=-(1/0),r=1/0,n=-(1/0);if(this.graphicsData.length)for(var i=0,o=0,a=0,s=0,u=0,l=0;l<this.graphicsData.length;l++){var c=this.graphicsData[l],h=c.type,d=c.lineWidth;if(i=c.shape,h===_.SHAPES.RECT||h===_.SHAPES.RREC)o=i.x-d/2,a=i.y-d/2,s=i.width+d,u=i.height+d,e=o<e?o:e,t=o+s>t?o+s:t,r=a<r?a:r,n=a+u>n?a+u:n;else if(h===_.SHAPES.CIRC)o=i.x,a=i.y,s=i.radius+d/2,u=i.radius+d/2,e=o-s<e?o-s:e,t=o+s>t?o+s:t,r=a-u<r?a-u:r,n=a+u>n?a+u:n;else if(h===_.SHAPES.ELIP)o=i.x,a=i.y,s=i.width+d/2,u=i.height+d/2,e=o-s<e?o-s:e,t=o+s>t?o+s:t,r=a-u<r?a-u:r,n=a+u>n?a+u:n;else for(var f=i.points,p=0,g=0,v=0,m=0,y=0,x=0,b=0,S=0,T=0;T+2<f.length;T+=2)o=f[T],a=f[T+1],p=f[T+2],g=f[T+3],v=Math.abs(p-o),m=Math.abs(g-a),u=d,s=Math.sqrt(v*v+m*m),s<1e-9||(y=(u/s*m+v)/2,x=(u/s*v+m)/2,b=(p+o)/2,S=(g+a)/2,e=b-y<e?b-y:e,t=b+y>t?b+y:t,r=S-x<r?S-x:r,n=S+x>n?S+x:n)}else e=0,t=0,r=0,n=0;var w=this.boundsPadding;this._localBounds.minX=e-w,this._localBounds.maxX=t+w,this._localBounds.minY=r-w,this._localBounds.maxY=n+w},t.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new p.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,e,this.lineAlignment);return this.graphicsData.push(t),t.type===_.SHAPES.POLY&&(t.shape.closed=t.shape.closed,this.currentPath=t),this.dirty++,t},t.prototype.generateCanvasTexture=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),n=c.default.create(r.width,r.height,e,t);C||(C=new E.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(R),R.invert(),R.tx-=r.x,R.ty-=r.y,C.render(this,n,!0,R);var i=d.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,e,"graphics");return i.baseTexture.resolution=t,i.baseTexture.update(),i},t.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},t.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var n in this._webGL)for(var i=0;i<this._webGL[n].data.length;++i)this._webGL[n].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},t}(u.default);r.default=A,A._SPRITE_TEXTURE=null,A.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(t,r,i,o,a,s,u,l,c){n(this,e),this.lineWidth=t,this.lineAlignment=c,this.nativeLines=u,this.lineColor=r,this.lineAlpha=i,this._lineTint=r,this.fillColor=o,this.fillAlpha=a,this._fillTint=o,this.fill=s,this.holes=[],this.shape=l,this.type=l.type}return e.prototype.clone=function(){return new e(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},e.prototype.addHole=function(e){this.holes.push(e)},e.prototype.destroy=function(){this.shape=null,this.holes=null},e}();r.default=i},{}],55:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("../../renderers/canvas/CanvasRenderer"),a=n(o),s=e("../../const"),u=function(){function e(t){i(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,r=t.context,n=e.worldAlpha,i=e.transform.worldTransform,o=t.resolution;r.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),e.canvasTintDirty===e.dirty&&e._prevTint===e.tint||this.updateGraphicsTint(e),t.setBlendMode(e.blendMode);for(var a=0;a<e.graphicsData.length;a++){var u=e.graphicsData[a],l=u.shape,c=u._fillTint,h=u._lineTint;if(r.lineWidth=u.lineWidth,u.type===s.SHAPES.POLY){r.beginPath(),this.renderPolygon(l.points,l.closed,r);for(var d=0;d<u.holes.length;d++)this.renderPolygon(u.holes[d].points,!0,r);u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke())}else if(u.type===s.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.fillRect(l.x,l.y,l.width,l.height)),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.strokeRect(l.x,l.y,l.width,l.height));else if(u.type===s.SHAPES.CIRC)r.beginPath(),r.arc(l.x,l.y,l.radius,0,2*Math.PI),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke());else if(u.type===s.SHAPES.ELIP){var f=2*l.width,p=2*l.height,g=l.x-f/2,v=l.y-p/2;r.beginPath();var m=.5522848,y=f/2*m,_=p/2*m,x=g+f,b=v+p,S=g+f/2,T=v+p/2;r.moveTo(g,T),r.bezierCurveTo(g,T-_,S-y,v,S,v),r.bezierCurveTo(S+y,v,x,T-_,x,T),r.bezierCurveTo(x,T+_,S+y,b,S,b),r.bezierCurveTo(S-y,b,g,T+_,g,T),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke())}else if(u.type===s.SHAPES.RREC){var w=l.x,E=l.y,C=l.width,R=l.height,O=l.radius,M=Math.min(C,R)/2|0;O=O>M?M:O,r.beginPath(),r.moveTo(w,E+O),r.lineTo(w,E+R-O),r.quadraticCurveTo(w,E+R,w+O,E+R),r.lineTo(w+C-O,E+R),r.quadraticCurveTo(w+C,E+R,w+C,E+R-O),r.lineTo(w+C,E+O),r.quadraticCurveTo(w+C,E,w+C-O,E),r.lineTo(w+O,E),r.quadraticCurveTo(w,E,w,E+O),r.closePath(),(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke())}}},e.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint,e.canvasTintDirty=e.dirty;for(var t=(e.tint>>16&255)/255,r=(e.tint>>8&255)/255,n=(255&e.tint)/255,i=0;i<e.graphicsData.length;++i){var o=e.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255,o._lineTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255}},e.prototype.renderPolygon=function(e,t,r){r.moveTo(e[0],e[1]);for(var n=1;n<e.length/2;++n)r.lineTo(e[2*n],e[2*n+1]);t&&r.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();r.default=u,a.default.registerPlugin("graphics",u)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(e,t,r){"use strict";function n(e,t,r,n,i,o,a,s,u){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],c=0,h=0,d=0,f=0,p=0;l.push(e,t);for(var g=1,v=0;g<=u;++g)v=g/u,c=1-v,h=c*c,d=h*c,f=v*v,p=f*v,l.push(d*e+3*h*v*r+3*c*f*i+p*a,d*t+3*h*v*n+3*c*f*o+p*s);return l}r.__esModule=!0,r.default=n},{}],57:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../utils"),u=e("../../const"),l=e("../../renderers/webgl/utils/ObjectRenderer"),c=n(l),h=e("../../renderers/webgl/WebGLRenderer"),d=n(h),f=e("./WebGLGraphicsData"),p=n(f),g=e("./shaders/PrimitiveShader"),v=n(g),m=e("./utils/buildPoly"),y=n(m),_=e("./utils/buildRectangle"),x=n(_),b=e("./utils/buildRoundedRectangle"),S=n(b),T=e("./utils/buildCircle"),w=n(T),E=function(e){function t(r){i(this,t);var n=o(this,e.call(this,r));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=r.gl,n.CONTEXT_UID=0,n}return a(t,e),t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new v.default(this.gl)},t.prototype.destroy=function(){c.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},t.prototype.render=function(e){var t=this.renderer,r=t.gl,n=void 0,i=e._webGL[this.CONTEXT_UID];i&&e.dirty===i.dirty||(this.updateGraphics(e),i=e._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;t.bindShader(o),t.state.setBlendMode(e.blendMode);for(var a=0,u=i.data.length;a<u;a++){n=i.data[a];var l=n.shader;t.bindShader(l),l.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,s.hex2rgb)(e.tint),l.uniforms.alpha=e.worldAlpha,t.bindVao(n.vao),n.nativeLines?r.drawArrays(r.LINES,0,n.points.length/6):n.vao.draw(r.TRIANGLE_STRIP,n.indices.length)}},t.prototype.updateGraphics=function(e){var t=this.renderer.gl,r=e._webGL[this.CONTEXT_UID];if(r||(r=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),r.dirty=e.dirty,e.clearDirty!==r.clearDirty){r.clearDirty=e.clearDirty;for(var n=0;n<r.data.length;n++)this.graphicsDataPool.push(r.data[n]);r.data.length=0,r.lastIndex=0}for(var i=void 0,o=void 0,a=r.lastIndex;a<e.graphicsData.length;a++){var s=e.graphicsData[a];i=this.getWebGLData(r,0),s.nativeLines&&s.lineWidth&&(o=this.getWebGLData(r,0,!0),r.lastIndex++),s.type===u.SHAPES.POLY&&(0,y.default)(s,i,o),s.type===u.SHAPES.RECT?(0,x.default)(s,i,o):s.type===u.SHAPES.CIRC||s.type===u.SHAPES.ELIP?(0,w.default)(s,i,o):s.type===u.SHAPES.RREC&&(0,S.default)(s,i,o),r.lastIndex++}this.renderer.bindVao(null);for(var l=0;l<r.data.length;l++)i=r.data[l],i.dirty&&i.upload()},t.prototype.getWebGLData=function(e,t,r){var n=e.data[e.data.length-1];return(!n||n.nativeLines!==r||n.points.length>32e4)&&(n=this.graphicsDataPool.pop()||new p.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),n.nativeLines=r,n.reset(t),e.data.push(n)),n.dirty=!0,n},t}(c.default);r.default=E,d.default.registerPlugin("graphics",E)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("pixi-gl-core"),a=n(o),s=function(){function e(t,r,n){i(this,e),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=a.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=r,this.vao=new a.default.VertexArrayObject(t,n).addIndex(this.indexBuffer).addAttribute(this.buffer,r.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,r.attributes.aColor,t.FLOAT,!1,24,8)}return e.prototype.reset=function(){this.points.length=0,this.indices.length=0},e.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},e.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},e}();r.default=s},{"pixi-gl-core":15}],59:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../../Shader"),u=n(s),l=function(e){function t(r){return i(this,t),o(this,e.call(this,r,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return a(t,e),t}(u.default);r.default=l},{"../../../Shader":44}],60:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=e.shape,i=n.x,o=n.y,l=void 0,c=void 0;if(e.type===s.SHAPES.CIRC?(l=n.radius,c=n.radius):(l=n.width,c=n.height),0!==l&&0!==c){var h=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),d=2*Math.PI/h;if(e.fill){var f=(0,u.hex2rgb)(e.fillColor),p=e.fillAlpha,g=f[0]*p,v=f[1]*p,m=f[2]*p,y=t.points,_=t.indices,x=y.length/6;_.push(x);for(var b=0;b<h+1;b++)y.push(i,o,g,v,m,p),y.push(i+Math.sin(d*b)*l,o+Math.cos(d*b)*c,g,v,m,p),_.push(x++,x++);_.push(x-1)}if(e.lineWidth){var S=e.points;e.points=[];for(var T=0;T<h;T++)e.points.push(i+Math.sin(d*-T)*l,o+Math.cos(d*-T)*c);e.points.push(e.points[0],e.points[1]),(0,a.default)(e,t,r),e.points=S}}}r.__esModule=!0,r.default=i;var o=e("./buildLine"),a=n(o),s=e("../../../const"),u=e("../../../utils")},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(e,t,r){"use strict";function n(e,t){var r=e.points;if(0!==r.length){var n=new o.Point(r[0],r[1]),i=new o.Point(r[r.length-2],r[r.length-1]);if(n.x===i.x&&n.y===i.y){r=r.slice(),r.pop(),r.pop(),i=new o.Point(r[r.length-2],r[r.length-1]);var s=i.x+.5*(n.x-i.x),u=i.y+.5*(n.y-i.y);r.unshift(s,u),r.push(s,u)}var l=t.points,c=t.indices,h=r.length/2,d=r.length,f=l.length/6,p=e.lineWidth/2,g=(0,a.hex2rgb)(e.lineColor),v=e.lineAlpha,m=g[0]*v,y=g[1]*v,_=g[2]*v,x=r[0],b=r[1],S=r[2],T=r[3],w=0,E=0,C=-(b-T),R=x-S,O=0,M=0,P=0,A=0,I=Math.sqrt(C*C+R*R);C/=I,R/=I,C*=p,R*=p;var D=e.lineAlignment,k=2*(1-D),F=2*D;l.push(x-C*k,b-R*k,m,y,_,v),l.push(x+C*F,b+R*F,m,y,_,v);for(var L=1;L<h-1;++L){x=r[2*(L-1)],b=r[2*(L-1)+1],S=r[2*L],T=r[2*L+1],w=r[2*(L+1)],E=r[2*(L+1)+1],C=-(b-T),R=x-S,I=Math.sqrt(C*C+R*R),C/=I,R/=I,C*=p,R*=p,O=-(T-E),M=S-w,I=Math.sqrt(O*O+M*M),O/=I,M/=I,O*=p,M*=p;var B=-R+b-(-R+T),N=-C+S-(-C+x),X=(-C+x)*(-R+T)-(-C+S)*(-R+b),j=-M+E-(-M+T),U=-O+S-(-O+w),Y=(-O+w)*(-M+T)-(-O+S)*(-M+E),z=B*U-j*N;if(Math.abs(z)<.1)z+=10.1,l.push(S-C*k,T-R*k,m,y,_,v),l.push(S+C*F,T+R*F,m,y,_,v);else{var W=(N*Y-U*X)/z,G=(j*X-B*Y)/z,H=(W-S)*(W-S)+(G-T)*(G-T);H>196*p*p?(P=C-O,A=R-M,I=Math.sqrt(P*P+A*A),P/=I,A/=I,P*=p,A*=p,l.push(S-P*k,T-A*k),l.push(m,y,_,v),l.push(S+P*F,T+A*F),l.push(m,y,_,v),l.push(S-P*F*k,T-A*k),l.push(m,y,_,v),d++):(l.push(S+(W-S)*k,T+(G-T)*k),l.push(m,y,_,v),l.push(S-(W-S)*F,T-(G-T)*F),l.push(m,y,_,v))}}x=r[2*(h-2)],b=r[2*(h-2)+1],S=r[2*(h-1)],T=r[2*(h-1)+1],C=-(b-T),R=x-S,I=Math.sqrt(C*C+R*R),C/=I,R/=I,C*=p,R*=p,l.push(S-C*k,T-R*k),l.push(m,y,_,v),l.push(S+C*F,T+R*F),l.push(m,y,_,v),c.push(f);for(var V=0;V<d;++V)c.push(f++);c.push(f-1)}}function i(e,t){var r=0,n=e.points;if(0!==n.length){var i=t.points,o=n.length/2,s=(0,a.hex2rgb)(e.lineColor),u=e.lineAlpha,l=s[0]*u,c=s[1]*u,h=s[2]*u;for(r=1;r<o;r++){var d=n[2*(r-1)],f=n[2*(r-1)+1],p=n[2*r],g=n[2*r+1];i.push(d,f),i.push(l,c,h,u),i.push(p,g),i.push(l,c,h,u)}}}r.__esModule=!0,r.default=function(e,t,r){e.nativeLines?i(e,r):n(e,t)};var o=e("../../../math"),a=e("../../../utils")},{"../../../math":70,"../../../utils":125}],62:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){e.points=e.shape.points.slice();var n=e.points;if(e.fill&&n.length>=6){for(var i=[],o=e.holes,u=0;u<o.length;u++){var c=o[u];i.push(n.length/2),n=n.concat(c.points)}var h=t.points,d=t.indices,f=n.length/2,p=(0,s.hex2rgb)(e.fillColor),g=e.fillAlpha,v=p[0]*g,m=p[1]*g,y=p[2]*g,_=(0,l.default)(n,i,2);if(!_)return;for(var x=h.length/6,b=0;b<_.length;b+=3)d.push(_[b]+x),d.push(_[b]+x),d.push(_[b+1]+x),d.push(_[b+2]+x),d.push(_[b+2]+x);for(var S=0;S<f;S++)h.push(n[2*S],n[2*S+1],v,m,y,g)}e.lineWidth>0&&(0,a.default)(e,t,r)}r.__esModule=!0,r.default=i;var o=e("./buildLine"),a=n(o),s=e("../../../utils"),u=e("earcut"),l=n(u)},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=e.shape,i=n.x,o=n.y,u=n.width,l=n.height;if(e.fill){var c=(0,s.hex2rgb)(e.fillColor),h=e.fillAlpha,d=c[0]*h,f=c[1]*h,p=c[2]*h,g=t.points,v=t.indices,m=g.length/6;g.push(i,o),g.push(d,f,p,h),g.push(i+u,o),g.push(d,f,p,h),g.push(i,o+l),g.push(d,f,p,h),g.push(i+u,o+l),g.push(d,f,p,h),v.push(m,m,m+1,m+2,m+3,m+3)}if(e.lineWidth){var y=e.points;e.points=[i,o,i+u,o,i+u,o+l,i,o+l,i,o],(0,a.default)(e,t,r),e.points=y}}r.__esModule=!0,r.default=i;var o=e("./buildLine"),a=n(o),s=e("../../../utils")},{"../../../utils":125,"./buildLine":61}],64:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=e.shape,i=n.x,o=n.y,s=n.width,l=n.height,d=n.radius,f=[];if(f.push(i,o+d),a(i,o+l-d,i,o+l,i+d,o+l,f),a(i+s-d,o+l,i+s,o+l,i+s,o+l-d,f),a(i+s,o+d,i+s,o,i+s-d,o,f),a(i+d,o,i,o,i,o+d+1e-10,f),e.fill){for(var p=(0,h.hex2rgb)(e.fillColor),g=e.fillAlpha,v=p[0]*g,m=p[1]*g,y=p[2]*g,_=t.points,x=t.indices,b=_.length/6,S=(0,u.default)(f,null,2),T=0,w=S.length;T<w;T+=3)x.push(S[T]+b),x.push(S[T]+b),x.push(S[T+1]+b),x.push(S[T+2]+b),x.push(S[T+2]+b);for(var E=0,C=f.length;E<C;E++)_.push(f[E],f[++E],v,m,y,g)}if(e.lineWidth){var R=e.points;e.points=f,(0,c.default)(e,t,r),e.points=R}}function o(e,t,r){var n=t-e;return e+n*r}function a(e,t,r,n,i,a){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=20,l=s,c=0,h=0,d=0,f=0,p=0,g=0,v=0,m=0;v<=u;++v)m=v/u,c=o(e,r,m),h=o(t,n,m),d=o(r,i,m),f=o(n,a,m),p=o(c,d,m),g=o(h,f,m),l.push(p,g);return l}r.__esModule=!0,r.default=i;var s=e("earcut"),u=n(s),l=e("./buildLine"),c=n(l),h=e("../../../utils")},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.autoDetectRenderer=r.Application=r.Filter=r.SpriteMaskFilter=r.Quad=r.RenderTarget=r.ObjectRenderer=r.WebGLManager=r.Shader=r.CanvasRenderTarget=r.TextureUvs=r.VideoBaseTexture=r.BaseRenderTexture=r.RenderTexture=r.BaseTexture=r.TextureMatrix=r.Texture=r.Spritesheet=r.CanvasGraphicsRenderer=r.GraphicsRenderer=r.GraphicsData=r.Graphics=r.TextMetrics=r.TextStyle=r.Text=r.SpriteRenderer=r.CanvasTinter=r.CanvasSpriteRenderer=r.Sprite=r.TransformBase=r.TransformStatic=r.Transform=r.Container=r.DisplayObject=r.Bounds=r.glCore=r.WebGLRenderer=r.CanvasRenderer=r.ticker=r.utils=r.settings=void 0;var o=e("./const");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./math");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var s=e("pixi-gl-core");Object.defineProperty(r,"glCore",{enumerable:!0,get:function(){return i(s).default}});var u=e("./display/Bounds");Object.defineProperty(r,"Bounds",{enumerable:!0,get:function(){return i(u).default}});var l=e("./display/DisplayObject");Object.defineProperty(r,"DisplayObject",{enumerable:!0,get:function(){return i(l).default}});var c=e("./display/Container");Object.defineProperty(r,"Container",{enumerable:!0,get:function(){return i(c).default}});var h=e("./display/Transform");Object.defineProperty(r,"Transform",{enumerable:!0,get:function(){return i(h).default}});var d=e("./display/TransformStatic");Object.defineProperty(r,"TransformStatic",{enumerable:!0,get:function(){return i(d).default}});var f=e("./display/TransformBase");Object.defineProperty(r,"TransformBase",{enumerable:!0,get:function(){return i(f).default}});var p=e("./sprites/Sprite");Object.defineProperty(r,"Sprite",{enumerable:!0,get:function(){return i(p).default}});var g=e("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(r,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return i(g).default}});var v=e("./sprites/canvas/CanvasTinter");Object.defineProperty(r,"CanvasTinter",{enumerable:!0,get:function(){return i(v).default;
}});var m=e("./sprites/webgl/SpriteRenderer");Object.defineProperty(r,"SpriteRenderer",{enumerable:!0,get:function(){return i(m).default}});var y=e("./text/Text");Object.defineProperty(r,"Text",{enumerable:!0,get:function(){return i(y).default}});var _=e("./text/TextStyle");Object.defineProperty(r,"TextStyle",{enumerable:!0,get:function(){return i(_).default}});var x=e("./text/TextMetrics");Object.defineProperty(r,"TextMetrics",{enumerable:!0,get:function(){return i(x).default}});var b=e("./graphics/Graphics");Object.defineProperty(r,"Graphics",{enumerable:!0,get:function(){return i(b).default}});var S=e("./graphics/GraphicsData");Object.defineProperty(r,"GraphicsData",{enumerable:!0,get:function(){return i(S).default}});var T=e("./graphics/webgl/GraphicsRenderer");Object.defineProperty(r,"GraphicsRenderer",{enumerable:!0,get:function(){return i(T).default}});var w=e("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(r,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return i(w).default}});var E=e("./textures/Spritesheet");Object.defineProperty(r,"Spritesheet",{enumerable:!0,get:function(){return i(E).default}});var C=e("./textures/Texture");Object.defineProperty(r,"Texture",{enumerable:!0,get:function(){return i(C).default}});var R=e("./textures/TextureMatrix");Object.defineProperty(r,"TextureMatrix",{enumerable:!0,get:function(){return i(R).default}});var O=e("./textures/BaseTexture");Object.defineProperty(r,"BaseTexture",{enumerable:!0,get:function(){return i(O).default}});var M=e("./textures/RenderTexture");Object.defineProperty(r,"RenderTexture",{enumerable:!0,get:function(){return i(M).default}});var P=e("./textures/BaseRenderTexture");Object.defineProperty(r,"BaseRenderTexture",{enumerable:!0,get:function(){return i(P).default}});var A=e("./textures/VideoBaseTexture");Object.defineProperty(r,"VideoBaseTexture",{enumerable:!0,get:function(){return i(A).default}});var I=e("./textures/TextureUvs");Object.defineProperty(r,"TextureUvs",{enumerable:!0,get:function(){return i(I).default}});var D=e("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(r,"CanvasRenderTarget",{enumerable:!0,get:function(){return i(D).default}});var k=e("./Shader");Object.defineProperty(r,"Shader",{enumerable:!0,get:function(){return i(k).default}});var F=e("./renderers/webgl/managers/WebGLManager");Object.defineProperty(r,"WebGLManager",{enumerable:!0,get:function(){return i(F).default}});var L=e("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(r,"ObjectRenderer",{enumerable:!0,get:function(){return i(L).default}});var B=e("./renderers/webgl/utils/RenderTarget");Object.defineProperty(r,"RenderTarget",{enumerable:!0,get:function(){return i(B).default}});var N=e("./renderers/webgl/utils/Quad");Object.defineProperty(r,"Quad",{enumerable:!0,get:function(){return i(N).default}});var X=e("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(r,"SpriteMaskFilter",{enumerable:!0,get:function(){return i(X).default}});var j=e("./renderers/webgl/filters/Filter");Object.defineProperty(r,"Filter",{enumerable:!0,get:function(){return i(j).default}});var U=e("./Application");Object.defineProperty(r,"Application",{enumerable:!0,get:function(){return i(U).default}});var Y=e("./autoDetectRenderer");Object.defineProperty(r,"autoDetectRenderer",{enumerable:!0,get:function(){return Y.autoDetectRenderer}});var z=e("./utils"),W=n(z),G=e("./ticker"),H=n(G),V=e("./settings"),q=i(V),K=e("./renderers/canvas/CanvasRenderer"),Z=i(K),Q=e("./renderers/webgl/WebGLRenderer"),J=i(Q);r.settings=q.default,r.utils=W,r.ticker=H,r.CanvasRenderer=Z.default,r.WebGLRenderer=J.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":15}],66:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return e<0?-1:e>0?1:0}function o(){for(var e=0;e<16;e++){var t=[];f.push(t);for(var r=0;r<16;r++)for(var n=i(u[e]*u[r]+c[e]*l[r]),o=i(l[e]*u[r]+h[e]*l[r]),a=i(u[e]*c[r]+c[e]*h[r]),p=i(l[e]*c[r]+h[e]*h[r]),g=0;g<16;g++)if(u[g]===n&&l[g]===o&&c[g]===a&&h[g]===p){t.push(g);break}}for(var v=0;v<16;v++){var m=new s.default;m.set(u[v],l[v],c[v],h[v],0,0),d.push(m)}}r.__esModule=!0;var a=e("./Matrix"),s=n(a),u=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],l=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],c=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],d=[],f=[];o();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return u[e]},uY:function(e){return l[e]},vX:function(e){return c[e]},vY:function(e){return h[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return f[e][t]},sub:function(e,t){return f[e][p.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2===(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?p.S:p.N:2*Math.abs(t)<=Math.abs(e)?e>0?p.E:p.W:t>0?e>0?p.SE:p.SW:e>0?p.NE:p.NW},matrixAppendRotationInv:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=d[p.inv(t)];i.tx=r,i.ty=n,e.append(i)}};r.default=p},{"./Matrix":67}],67:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./Point"),s=n(a),u=e("../const"),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i(this,e),this.a=t,this.b=r,this.c=n,this.d=o,this.tx=a,this.ty=s,this.array=null}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,r,n,i,o){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=o,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},e.prototype.apply=function(e,t){t=t||new s.default;var r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new s.default;var r=1/(this.a*this.d+this.c*-this.b),n=e.x,i=e.y;return t.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,o=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this},e.prototype.append=function(e){var t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this},e.prototype.setTransform=function(e,t,r,n,i,o,a,s,u){return this.a=Math.cos(a+u)*i,this.b=Math.sin(a+u)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=e-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,r=this.b,n=this.c,i=this.d,o=-Math.atan2(-n,i),a=Math.atan2(r,t),s=Math.abs(o+a);return s<1e-5||Math.abs(u.PI_2-s)<1e-5?(e.rotation=a,t<0&&i>=0&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=a),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+i*i),e.position.x=this.tx,e.position.y=this.ty,e},e.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,n=this.d,i=this.tx,o=e*n-t*r;return this.a=n/o,this.b=-t/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(e*this.ty-t*i)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},o(e,null,[{key:"IDENTITY",get:function(){return new e}},{key:"TEMP_MATRIX",get:function(){return new e}}]),e}();r.default=l},{"../const":46,"./Point":69}],68:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,e),this._x=i,this._y=o,this.cb=t,this.scope=r}return e.prototype.clone=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t||this.cb,i=r||this.scope;return new e(n,i,this._x,this._y)},e.prototype.set=function(e,t){var r=e||0,n=t||(0!==t?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))},e.prototype.copy=function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},e.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},i(e,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),e}();r.default=o},{}],69:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.x=t,this.y=r}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copy=function(e){this.set(e.x,e.y)},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},e}();r.default=i},{}],70:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./Point");Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return n(i).default}});var o=e("./ObservablePoint");Object.defineProperty(r,"ObservablePoint",{enumerable:!0,get:function(){return n(o).default}});var a=e("./Matrix");Object.defineProperty(r,"Matrix",{enumerable:!0,get:function(){return n(a).default}});var s=e("./GroupD8");Object.defineProperty(r,"GroupD8",{enumerable:!0,get:function(){return n(s).default}});var u=e("./shapes/Circle");Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return n(u).default}});var l=e("./shapes/Ellipse");Object.defineProperty(r,"Ellipse",{enumerable:!0,get:function(){return n(l).default}});var c=e("./shapes/Polygon");Object.defineProperty(r,"Polygon",{enumerable:!0,get:function(){return n(c).default}});var h=e("./shapes/Rectangle");Object.defineProperty(r,"Rectangle",{enumerable:!0,get:function(){return n(h).default}});var d=e("./shapes/RoundedRectangle");Object.defineProperty(r,"RoundedRectangle",{enumerable:!0,get:function(){return n(d).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("./Rectangle"),a=n(o),s=e("../../const"),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,e),this.x=t,this.y=r,this.radius=n,this.type=s.SHAPES.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-e,i=this.y-t;return n*=n,i*=i,n+i<=r},e.prototype.getBounds=function(){return new a.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}();r.default=u},{"../../const":46,"./Rectangle":74}],72:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("./Rectangle"),a=n(o),s=e("../../const"),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,e),this.x=t,this.y=r,this.width=n,this.height=o,this.type=s.SHAPES.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,n=(t-this.y)/this.height;return r*=r,n*=n,r+n<=1},e.prototype.getBounds=function(){return new a.default(this.x-this.width,this.y-this.height,this.width,this.height)},e}();r.default=u},{"../../const":46,"./Rectangle":74}],73:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("../Point"),a=n(o),s=e("../../const"),u=function(){function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(i(this,e),Array.isArray(r[0])&&(r=r[0]),r[0]instanceof a.default){for(var o=[],u=0,l=r.length;u<l;u++)o.push(r[u].x,r[u].y);r=o}this.closed=!0,this.points=r,this.type=s.SHAPES.POLY}return e.prototype.clone=function(){return new e(this.points.slice())},e.prototype.close=function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])},e.prototype.contains=function(e,t){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],l=this.points[2*o+1],c=s>t!=l>t&&e<(u-a)*((t-s)/(l-s))+a;c&&(r=!r)}return r},e}();r.default=u},{"../../const":46,"../Point":69}],74:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("../../const"),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,e),this.x=Number(t),this.y=Number(r),this.width=Number(i),this.height=Number(a),this.type=o.SHAPES.RECT}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},e.prototype.pad=function(e,t){e=e||0,t=t||(0!==t?e:0),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},e.prototype.fit=function(e){this.x<e.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=e.x),this.y<e.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=e.y),this.x+this.width>e.x+e.width&&(this.width=e.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>e.y+e.height&&(this.height=e.height-this.y,this.height<0&&(this.height=0))},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.width=r-t,this.y=n,this.height=i-n},i(e,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new e(0,0,0,0)}}]),e}();r.default=a},{"../../const":46}],75:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=e("../../const"),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,e),this.x=t,this.y=r,this.width=o,this.height=a,this.radius=s,this.type=i.SHAPES.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var r=e-(this.x+this.radius),n=t-(this.y+this.radius),i=this.radius*this.radius;if(r*r+n*n<=i)return!0;if(r=e-(this.x+this.width-this.radius),r*r+n*n<=i)return!0;if(n=t-(this.y+this.height-this.radius),r*r+n*n<=i)return!0;if(r=e-(this.x+this.radius),r*r+n*n<=i)return!0}return!1},e}();r.default=o},{"../../const":46}],76:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../utils"),l=e("../math"),c=e("../const"),h=e("../settings"),d=n(h),f=e("../display/Container"),p=n(f),g=e("../textures/RenderTexture"),v=n(g),m=e("eventemitter3"),y=n(m),_=new l.Matrix,x=function(e){function t(r,n,a,s){i(this,t);var h=o(this,e.call(this));return(0,u.sayHello)(r),"number"==typeof n&&(n=Object.assign({width:n,height:a||d.default.RENDER_OPTIONS.height},s)),n=Object.assign({},d.default.RENDER_OPTIONS,n),h.options=n,h.type=c.RENDERER_TYPE.UNKNOWN,h.screen=new l.Rectangle(0,0,n.width,n.height),h.view=n.view||document.createElement("canvas"),h.resolution=n.resolution||d.default.RESOLUTION,h.transparent=n.transparent,h.autoResize=n.autoResize||!1,h.blendModes=null,h.preserveDrawingBuffer=n.preserveDrawingBuffer,h.clearBeforeRender=n.clearBeforeRender,h.roundPixels=n.roundPixels,h._backgroundColor=0,h._backgroundColorRgba=[0,0,0,0],h._backgroundColorString="#000000",h.backgroundColor=n.backgroundColor||h._backgroundColor,h._tempDisplayObjectParent=new p.default,h._lastObjectRendered=h._tempDisplayObjectParent,h}return a(t,e),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},t.prototype.generateTexture=function(e,t,r,n){n=n||e.getLocalBounds();var i=v.default.create(0|n.width,0|n.height,t,r);return _.tx=-n.x,_.ty=-n.y,this.render(e,i,!1,_,!!e.parent),i},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=c.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},s(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,u.hex2string)(e),(0,u.hex2rgb)(e,this._backgroundColorRgba)}}]),t}(y.default);r.default=x},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../SystemRenderer"),u=n(s),l=e("./utils/CanvasMaskManager"),c=n(l),h=e("./utils/CanvasRenderTarget"),d=n(h),f=e("./utils/mapCanvasBlendModesToPixi"),p=n(f),g=e("../../utils"),v=e("../../const"),m=e("../../settings"),y=n(m),_=function(e){function t(r,n,a){i(this,t);var s=o(this,e.call(this,"Canvas",r,n,a));return s.type=v.RENDERER_TYPE.CANVAS,s.rootContext=s.view.getContext("2d",{alpha:s.transparent}),s.context=s.rootContext,s.refresh=!0,s.maskManager=new c.default(s),s.smoothProperty="imageSmoothingEnabled",s.rootContext.imageSmoothingEnabled||(s.rootContext.webkitImageSmoothingEnabled?s.smoothProperty="webkitImageSmoothingEnabled":s.rootContext.mozImageSmoothingEnabled?s.smoothProperty="mozImageSmoothingEnabled":s.rootContext.oImageSmoothingEnabled?s.smoothProperty="oImageSmoothingEnabled":s.rootContext.msImageSmoothingEnabled&&(s.smoothProperty="msImageSmoothingEnabled")),s.initPlugins(),s.blendModes=(0,p.default)(),s._activeBlendMode=null,s.renderingToScreen=!1,s.resize(s.options.width,s.options.height),s}return a(t,e),t.prototype.render=function(e,t,r,n,i){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var o=this.resolution;t?(t=t.baseTexture||t,t._canvasRenderTarget||(t._canvasRenderTarget=new d.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(t||(this._lastObjectRendered=e),!i){var s=e.parent,u=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=s}a.save(),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=v.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[v.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var l=this.context;this.context=a,e.renderCanvas(this),this.context=l,a.restore(),this.resolution=o,this.emit("postrender")}},t.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this.smoothProperty&&(this.rootContext[this.smoothProperty]=y.default.SCALE_MODE===v.SCALE_MODES.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(u.default);r.default=_,g.pluginTarget.mixin(_)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=e("../../../const"),o=function(){function e(t){n(this,e),this.renderer=t}return e.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var r=e.alpha,n=e.transform.worldTransform,i=t.resolution;t.context.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=r},e.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,r=e.graphicsData.length;if(0!==r){t.beginPath();for(var n=0;n<r;n++){var o=e.graphicsData[n],a=o.shape;if(o.type===i.SHAPES.POLY){var s=a.points;t.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)t.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath()}else if(o.type===i.SHAPES.RECT)t.rect(a.x,a.y,a.width,a.height),t.closePath();else if(o.type===i.SHAPES.CIRC)t.arc(a.x,a.y,a.radius,0,2*Math.PI),t.closePath();else if(o.type===i.SHAPES.ELIP){var l=2*a.width,c=2*a.height,h=a.x-l/2,d=a.y-c/2,f=.5522848,p=l/2*f,g=c/2*f,v=h+l,m=d+c,y=h+l/2,_=d+c/2;t.moveTo(h,_),t.bezierCurveTo(h,_-g,y-p,d,y,d),t.bezierCurveTo(y+p,d,v,_-g,v,_),t.bezierCurveTo(v,_+g,y+p,m,y,m),t.bezierCurveTo(y-p,m,h,_+g,h,_),t.closePath()}else if(o.type===i.SHAPES.RREC){var x=a.x,b=a.y,S=a.width,T=a.height,w=a.radius,E=Math.min(S,T)/2|0;w=w>E?E:w,t.moveTo(x,b+w),t.lineTo(x,b+T-w),t.quadraticCurveTo(x,b+T,x+w,b+T),t.lineTo(x+S-w,b+T),t.quadraticCurveTo(x+S,b+T,x+S,b+T-w),t.lineTo(x+S,b+w),t.quadraticCurveTo(x+S,b,x+S-w,b),t.lineTo(x+w,b),t.quadraticCurveTo(x,b,x,b+w),t.closePath()}}}},e.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},e.prototype.destroy=function(){},e}();r.default=o},{"../../../const":46}],79:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../../../settings"),s=n(a),u=function(){function e(t,r,n){i(this,e),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||s.default.RESOLUTION,this.resize(t,r)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},o(e,[{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),e}();r.default=u},{"../../../settings":101}],80:[function(e,t,r){"use strict";function n(e){var t=document.createElement("canvas");t.width=6,t.height=1;var r=t.getContext("2d");return r.fillStyle=e,r.fillRect(0,0,6,1),t}function i(){if("undefined"==typeof document)return!1;var e=n("#ff00ff"),t=n("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var i=r.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(e,0,0),i.drawImage(t,2,0);var o=i.getImageData(2,0,1,1);if(!o)return!1;var a=o.data;return 255===a[0]&&0===a[1]&&0===a[2]}r.__esModule=!0,r.default=i},{}],81:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,s.default)()?(e[o.BLEND_MODES.NORMAL]="source-over",e[o.BLEND_MODES.ADD]="lighter",e[o.BLEND_MODES.MULTIPLY]="multiply",e[o.BLEND_MODES.SCREEN]="screen",e[o.BLEND_MODES.OVERLAY]="overlay",e[o.BLEND_MODES.DARKEN]="darken",e[o.BLEND_MODES.LIGHTEN]="lighten",e[o.BLEND_MODES.COLOR_DODGE]="color-dodge",e[o.BLEND_MODES.COLOR_BURN]="color-burn",e[o.BLEND_MODES.HARD_LIGHT]="hard-light",e[o.BLEND_MODES.SOFT_LIGHT]="soft-light",e[o.BLEND_MODES.DIFFERENCE]="difference",e[o.BLEND_MODES.EXCLUSION]="exclusion",e[o.BLEND_MODES.HUE]="hue",e[o.BLEND_MODES.SATURATION]="saturate",e[o.BLEND_MODES.COLOR]="color",e[o.BLEND_MODES.LUMINOSITY]="luminosity"):(e[o.BLEND_MODES.NORMAL]="source-over",e[o.BLEND_MODES.ADD]="lighter",e[o.BLEND_MODES.MULTIPLY]="source-over",e[o.BLEND_MODES.SCREEN]="source-over",e[o.BLEND_MODES.OVERLAY]="source-over",
e[o.BLEND_MODES.DARKEN]="source-over",e[o.BLEND_MODES.LIGHTEN]="source-over",e[o.BLEND_MODES.COLOR_DODGE]="source-over",e[o.BLEND_MODES.COLOR_BURN]="source-over",e[o.BLEND_MODES.HARD_LIGHT]="source-over",e[o.BLEND_MODES.SOFT_LIGHT]="source-over",e[o.BLEND_MODES.DIFFERENCE]="source-over",e[o.BLEND_MODES.EXCLUSION]="source-over",e[o.BLEND_MODES.HUE]="source-over",e[o.BLEND_MODES.SATURATION]="source-over",e[o.BLEND_MODES.COLOR]="source-over",e[o.BLEND_MODES.LUMINOSITY]="source-over"),e[o.BLEND_MODES.NORMAL_NPM]=e[o.BLEND_MODES.NORMAL],e[o.BLEND_MODES.ADD_NPM]=e[o.BLEND_MODES.ADD],e[o.BLEND_MODES.SCREEN_NPM]=e[o.BLEND_MODES.SCREEN],e}r.__esModule=!0,r.default=i;var o=e("../../../const"),a=e("./canUseNewCanvasBlendModes"),s=n(a)},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("../../const"),a=e("../../settings"),s=n(a),u=function(){function e(t){i(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return e.prototype.update=function(){this.count++,this.mode!==o.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},e.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,r=!1,n=0;n<t.length;n++){var i=t[n];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[n]=null,r=!0)}if(r){for(var o=0,a=0;a<t.length;a++)null!==t[a]&&(t[o++]=t[a]);t.length=o}},e.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},e}();r.default=u},{"../../const":46,"../../settings":101}],83:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("pixi-gl-core"),a=e("../../const"),s=e("./utils/RenderTarget"),u=n(s),l=e("../../utils"),c=function(){function e(t){i(this,e),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(e,t){var r=this.gl,n=!!e._glRenderTargets;if(!e.hasLoaded)return null;var i=this.renderer.boundTextures;if(void 0===t){t=0;for(var s=0;s<i.length;++s)if(i[s]===e){t=s;break}}i[t]=e,r.activeTexture(r.TEXTURE0+t);var l=e._glTextures[this.renderer.CONTEXT_UID];if(l)n?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):l.upload(e.source);else{if(n){var c=new u.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);c.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=c,l=c.texture}else l=new o.GLTexture(this.gl,null,null,null,null),l.bind(t),l.premultiplyAlpha=!0,l.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=l,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&l.enableMipmap(),e.wrapMode===a.WRAP_MODES.CLAMP?l.enableWrapClamp():e.wrapMode===a.WRAP_MODES.REPEAT?l.enableWrapRepeat():l.enableWrapMirrorRepeat()):l.enableWrapClamp(),e.scaleMode===a.SCALE_MODES.NEAREST?l.enableNearestScaling():l.enableLinearScaling()}return l},e.prototype.destroyTexture=function(e,t){if(e=e.baseTexture||e,e.hasLoaded){var r=this.renderer.CONTEXT_UID,n=e._glTextures,i=e._glRenderTargets;if(n[r]&&(this.renderer.unbindTexture(e),n[r].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete n[r],!t)){var o=this._managedTextures.indexOf(e);o!==-1&&(0,l.removeItems)(this._managedTextures,o,1)}i&&i[r]&&(i[r].destroy(),delete i[r])}},e.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}},e.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e}();r.default=c},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../SystemRenderer"),u=n(s),l=e("./managers/MaskManager"),c=n(l),h=e("./managers/StencilManager"),d=n(h),f=e("./managers/FilterManager"),p=n(f),g=e("./utils/RenderTarget"),v=n(g),m=e("./utils/ObjectRenderer"),y=n(m),_=e("./TextureManager"),x=n(_),b=e("../../textures/BaseTexture"),S=n(b),T=e("./TextureGarbageCollector"),w=n(T),E=e("./WebGLState"),C=n(E),R=e("./utils/mapWebGLDrawModesToPixi"),O=n(R),M=e("./utils/validateContext"),P=n(M),A=e("../../utils"),I=e("pixi-gl-core"),D=n(I),k=e("../../const"),F=0,L=function(e){function t(r,n,a){i(this,t);var s=o(this,e.call(this,"WebGL",r,n,a));return s.legacy=s.options.legacy,s.legacy&&(D.default.VertexArrayObject.FORCE_NATIVE=!0),s.type=k.RENDERER_TYPE.WEBGL,s.handleContextLost=s.handleContextLost.bind(s),s.handleContextRestored=s.handleContextRestored.bind(s),s.view.addEventListener("webglcontextlost",s.handleContextLost,!1),s.view.addEventListener("webglcontextrestored",s.handleContextRestored,!1),s._contextOptions={alpha:s.transparent,antialias:s.options.antialias,premultipliedAlpha:s.transparent&&"notMultiplied"!==s.transparent,stencil:!0,preserveDrawingBuffer:s.options.preserveDrawingBuffer,powerPreference:s.options.powerPreference},s._backgroundColorRgba[3]=s.transparent?0:1,s.maskManager=new c.default(s),s.stencilManager=new d.default(s),s.emptyRenderer=new y.default(s),s.currentRenderer=s.emptyRenderer,s.textureManager=null,s.filterManager=null,s.initPlugins(),s.options.context&&(0,P.default)(s.options.context),s.gl=s.options.context||D.default.createContext(s.view,s._contextOptions),s.CONTEXT_UID=F++,s.state=new C.default(s.gl),s.renderingToScreen=!0,s.boundTextures=null,s._activeShader=null,s._activeVao=null,s._activeRenderTarget=null,s._initContext(),s.drawModes=(0,O.default)(s.gl),s._nextTextureLocation=0,s.setBlendMode(0),s}return a(t,e),t.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new x.default(this),this.filterManager=new p.default(this),this.textureGC=new w.default(this),this.state.resetToDefault(),this.rootRenderTarget=new v.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new D.default.GLTexture.fromData(e,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var i=0;i<t;i++){var o=new S.default;o._glTextures[this.CONTEXT_UID]=r,this.boundTextures[i]=n,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(e,t,r,n,i){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!i){var o=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=o}this.bindRenderTexture(t,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(e,t){u.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(e,t){var r=e.baseTexture,n=r._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(t),this},t.prototype.bindRenderTexture=function(e,t){var r=void 0;if(e){var n=e.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),r=n._glRenderTargets[this.CONTEXT_UID],r.setFrame(e.frame)}else r=this.rootRenderTarget;return r.transform=t,this.bindRenderTarget(r),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),t!==!1&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(e,t,r){if(e=e||this.emptyTextures[t],e=e.baseTexture||e,e.touched=this.textureGC.count,r)t=t||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===e)return n;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=e._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[t]=e,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(e,t),t},t.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===e&&(this.boundTextures[r]=this.emptyTextures[r],t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new D.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.emptyTextures[e];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},t}(u.default);r.default=L,A.pluginTarget.mixin(L)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("./utils/mapWebGLBlendModesToPixi"),a=n(o),s=0,u=1,l=2,c=3,h=4,d=function(){function e(t){i(this,e),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,a.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}return e.prototype.push=function(){var e=this.stack[this.stackIndex];e||(e=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)e[t]=this.activeState[t]},e.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},e.prototype.setState=function(e){this.setBlend(e[s]),this.setDepthTest(e[u]),this.setFrontFace(e[l]),this.setCullFace(e[c]),this.setBlendMode(e[h])},e.prototype.setBlend=function(e){e=e?1:0,this.activeState[s]!==e&&(this.activeState[s]=e,this.gl[e?"enable":"disable"](this.gl.BLEND))},e.prototype.setBlendMode=function(e){if(e!==this.activeState[h]){this.activeState[h]=e;var t=this.blendModes[e];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},e.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[u]!==e&&(this.activeState[u]=e,this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST))},e.prototype.setCullFace=function(e){e=e?1:0,this.activeState[c]!==e&&(this.activeState[c]=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE))},e.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[l]!==e&&(this.activeState[l]=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))},e.prototype.resetAttributes=function(){for(var e=0;e<this.attribState.tempAttribState.length;e++)this.attribState.tempAttribState[e]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},e.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},e}();r.default=d},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./extractUniformsFromSrc"),s=n(a),u=e("../../../utils"),l=e("../../../const"),c=e("../../../settings"),h=n(c),d={},f=function(){function e(t,r,n){i(this,e),this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this._blendMode=l.BLEND_MODES.NORMAL,this.uniformData=n||(0,s.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value,this.uniformData[o].type&&(this.uniformData[o].type=this.uniformData[o].type.toLowerCase());this.glShaders={},d[this.vertexSrc+this.fragmentSrc]||(d[this.vertexSrc+this.fragmentSrc]=(0,u.uid)()),this.glShaderKey=d[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=h.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return e.prototype.apply=function(e,t,r,n,i){e.applyFilter(this,t,r,n)},o(e,[{key:"blendMode",get:function(){return this._blendMode},set:function(e){this._blendMode=e}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),e}();r.default=f},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=o(e,r),i=o(t,r);return Object.assign(n,i)}function o(e){for(var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},n=void 0,i=e.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<i.length;o++){var a=i[o].trim();if(a.indexOf("uniform")>-1){var s=a.split(" "),l=s[1],c=s[2],h=1;c.indexOf("[")>-1&&(n=c.split(/\[|]/),c=n[0],h*=Number(n[1])),c.match(t)||(r[c]={value:u(l,h),name:c,type:l})}}return r}r.__esModule=!0,r.default=i;var a=e("pixi-gl-core"),s=n(a),u=s.default.shader.defaultValue},{"pixi-gl-core":15}],88:[function(e,t,r){"use strict";function n(e,t,r){var n=e.identity();return n.translate(t.x/r.width,t.y/r.height),n.scale(r.width,r.height),n}function i(e,t,r){var n=e.identity();n.translate(t.x/r.width,t.y/r.height);var i=r.width/t.width,o=r.height/t.height;return n.scale(i,o),n}function o(e,t,r,n){var i=n._texture.orig,o=e.set(r.width,0,0,r.height,t.x,t.y),s=n.worldTransform.copy(a.Matrix.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/i.width,1/i.height),o.translate(n.anchor.x,n.anchor.y),o}r.__esModule=!0,r.calculateScreenSpaceMatrix=n,r.calculateNormalizedScreenSpaceMatrix=i,r.calculateSpriteMatrix=o;var a=e("../../../math")},{"../../../math":70}],89:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../Filter"),u=n(s),l=e("../../../../math"),c=(e("path"),e("../../../../textures/TextureMatrix")),h=n(c),d=function(e){function t(r){i(this,t);var n=new l.Matrix,a=o(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return r.renderable=!1,a.maskSprite=r,a.maskMatrix=n,a}return a(t,e),t.prototype.apply=function(e,t,r){var n=this.maskSprite,i=this.maskSprite.texture;i.valid&&(i.transform||(i.transform=new h.default(i,0)),i.transform.update(),this.uniforms.mask=i,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(i.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=i.transform.uClampFrame,e.applyFilter(this,t,r))},t}(u.default);r.default=d},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:8}],90:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var u=e("./WebGLManager"),l=i(u),c=e("../utils/RenderTarget"),h=i(c),d=e("../utils/Quad"),f=i(d),p=e("../../../math"),g=e("../../../Shader"),v=i(g),m=e("../filters/filterTransforms"),y=n(m),_=e("bit-twiddle"),x=i(_),b=function(){function e(){s(this,e),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new p.Rectangle,this.destinationFrame=new p.Rectangle,this.filters=[]}return e.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},e}(),S="screen",T=function(e){function t(r){s(this,t);var n=o(this,e.call(this,r));return n.gl=n.renderer.gl,n.quad=new f.default(n.gl,r.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n.managedFilters=[],n.renderer.on("prerender",n.onPrerender,n),n._screenWidth=r.view.width,n._screenHeight=r.view.height,n}return a(t,e),t.prototype.pushFilter=function(e,t){var r=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var i=new b;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[i]},this.filterData=n}var o=n.stack[++n.index],a=n.stack[0].destinationFrame;o||(o=n.stack[n.index]=new b);var s=e.filterArea&&0===e.filterArea.x&&0===e.filterArea.y&&e.filterArea.width===r.screen.width&&e.filterArea.height===r.screen.height,u=t[0].resolution,l=0|t[0].padding,c=s?r.screen:e.filterArea||e.getBounds(!0),h=o.sourceFrame,d=o.destinationFrame;h.x=(c.x*u|0)/u,h.y=(c.y*u|0)/u,h.width=(c.width*u|0)/u,h.height=(c.height*u|0)/u,s||(n.stack[0].renderTarget.transform||t[0].autoFit&&h.fit(a),h.pad(l)),d.width=h.width,d.height=h.height;var f=this.getPotRenderTarget(r.gl,h.width,h.height,u);o.target=e,o.filters=t,o.resolution=u,o.renderTarget=f,f.setFrame(d,h),r.bindRenderTarget(f),f.clear()},t.prototype.popFilter=function(){var e=this.filterData,t=e.stack[e.index-1],r=e.stack[e.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var n=r.filters;if(1===n.length)n[0].apply(this,r.renderTarget,t.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var i=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var a=0;for(a=0;a<n.length-1;++a){n[a].apply(this,i,o,!0,r);var s=i;i=o,o=s}n[a].apply(this,i,t.renderTarget,!1,r),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}r.clear(),e.index--,0===e.index&&(this.filterData=null)},t.prototype.applyFilter=function(e,t,r,n){var i=this.renderer,o=i.gl,a=e.glShaders[i.CONTEXT_UID];a||(e.glShaderKey?(a=this.shaderCache[e.glShaderKey],a||(a=new v.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[i.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=a,this.managedFilters.push(e))):(a=e.glShaders[i.CONTEXT_UID]=new v.default(this.gl,e.vertexSrc,e.fragmentSrc),this.managedFilters.push(e)),i.bindVao(null),this.quad.initVao(a)),i.bindVao(this.quad.vao),i.bindRenderTarget(r),n&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),r===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(a);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(a,e),i.state.setBlendMode(e.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},t.prototype.syncUniforms=function(e,t){var r=t.uniformData,n=t.uniforms,i=1,o=void 0;if(e.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var a=e.uniforms.filterArea;a[0]=o.renderTarget.size.width,a[1]=o.renderTarget.size.height,a[2]=o.sourceFrame.x,a[3]=o.sourceFrame.y,e.uniforms.filterArea=a}if(e.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var s=e.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,s[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,e.uniforms.filterClamp=s}for(var u in r){var l=r[u].type;if("sampler2d"===l&&0!==n[u]){if(n[u].baseTexture)e.uniforms[u]=this.renderer.bindTexture(n[u].baseTexture,i);else{e.uniforms[u]=i;var c=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],c.activeTexture(c.TEXTURE0+i),n[u].texture.bind()}i++}else if("mat3"===l)void 0!==n[u].a?e.uniforms[u]=n[u].toArray(!0):e.uniforms[u]=n[u];else if("vec2"===l)if(void 0!==n[u].x){var h=e.uniforms[u]||new Float32Array(2);h[0]=n[u].x,h[1]=n[u].y,e.uniforms[u]=h}else e.uniforms[u]=n[u];else"float"===l?e.uniforms.data[u].value!==r[u]&&(e.uniforms[u]=n[u]):e.uniforms[u]=n[u]}},t.prototype.getRenderTarget=function(e,t){var r=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,t||r.resolution);return n.setFrame(r.destinationFrame,r.sourceFrame),n},t.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},t.prototype.calculateScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return y.calculateScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return y.calculateNormalizedScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},t.prototype.calculateSpriteMatrix=function(e,t){var r=this.filterData.stack[this.filterData.index];return y.calculateSpriteMatrix(e,r.sourceFrame,r.renderTarget.size,t)},t.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.renderer,r=this.managedFilters;t.off("prerender",this.onPrerender,this);for(var n=0;n<r.length;n++)e||r[n].glShaders[t.CONTEXT_UID].destroy(),delete r[n].glShaders[t.CONTEXT_UID];this.shaderCache={},e?this.pool={}:this.emptyPool()},t.prototype.getPotRenderTarget=function(e,t,r,n){var i=S;t*=n,r*=n,t===this._screenWidth&&r===this._screenHeight||(t=x.default.nextPow2(t),r=x.default.nextPow2(r),i=(65535&t)<<16|65535&r),this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var a=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),o=new h.default(e,t,r,null,1),e.bindTexture(e.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=n,o.defaultFrame.width=o.size.width=t/n,o.defaultFrame.height=o.size.height=r/n,o.filterPoolKey=i,o},t.prototype.emptyPool=function(){for(var e in this.pool){var t=this.pool[e];if(t)for(var r=0;r<t.length;r++)t[r].destroy(!0)}this.pool={}},t.prototype.freePotRenderTarget=function(e){this.pool[e.filterPoolKey].push(e)},t.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var e=this.pool[S];if(e)for(var t=0;t<e.length;t++)e[t].destroy(!0);this.pool[S]=[]}},t}(l.default);r.default=T},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./WebGLManager"),u=n(s),l=e("../filters/spriteMask/SpriteMaskFilter"),c=n(l),h=function(e){function t(r){i(this,t);var n=o(this,e.call(this,r));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return a(t,e),t.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var r=t.worldTransform,n=Math.atan2(r.b,r.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},t.prototype.pushSpriteMask=function(e,t){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new c.default(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,r),this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),
this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(e,t){t.renderable=!0;var r=this.renderer._activeRenderTarget,n=t.getBounds();n.fit(r.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorRenderTarget=r,this.scissorData=t,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},t}(u.default);r.default=h},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./WebGLManager"),u=n(s),l=function(e){function t(r){i(this,t);var n=o(this,e.call(this,r));return n.stencilMaskStack=null,n}return a(t,e),t.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,r,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){u.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(u.default);r.default=l},{"./WebGLManager":93}],93:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(t){n(this,e),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},e}();r.default=i},{}],94:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../managers/WebGLManager"),u=n(s),l=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(e){},t}(u.default);r.default=l},{"../managers/WebGLManager":93}],95:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("pixi-gl-core"),a=n(o),s=e("../../../utils/createIndicesForQuads"),u=n(s),l=function(){function e(t,r){i(this,e),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,u.default)(1),this.vertexBuffer=a.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(t,r)}return e.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},e.prototype.map=function(e,t){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+t.width/e.width,this.uvs[3]=n,this.uvs[4]=r+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=r,this.uvs[7]=n+t.height/e.height,r=t.x,n=t.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+t.width,this.vertices[3]=n,this.vertices[4]=r+t.width,this.vertices[5]=n+t.height,this.vertices[6]=r,this.vertices[7]=n+t.height,this},e.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},e.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},e}();r.default=l},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":15}],96:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("../../../math"),a=e("../../../const"),s=e("../../../settings"),u=n(s),l=e("pixi-gl-core"),c=function(){function e(t,r,n,s,c,h){i(this,e),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new o.Rectangle(0,0,1,1),this.resolution=c||u.default.RESOLUTION,this.projectionMatrix=new o.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new o.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==s?s:u.default.SCALE_MODE,this.root=h,this.root?(this.frameBuffer=new l.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===a.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(r,n)}return e.prototype.clear=function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},e.prototype.setFrame=function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},e.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},e.prototype.calculateProjection=function(e,t){var r=this.projectionMatrix;t=t||e,r.identity(),this.root?(r.a=1/e.width*2,r.d=-1/e.height*2,r.tx=-1-t.x*r.a,r.ty=1-t.y*r.d):(r.a=1/e.width*2,r.d=1/e.height*2,r.tx=-1-t.x*r.a,r.ty=-1-t.y*r.d)},e.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},e.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},e}();r.default=c},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=!t;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var n=document.createElement("canvas");n.width=1,n.height=1,t=s.default.createContext(n)}for(var i=t.createShader(t.FRAGMENT_SHADER);;){var a=u.replace(/%forloop%/gi,o(e));if(t.shaderSource(i,a),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))break;e=e/2|0}return r&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext(),e}function o(e){for(var t="",r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+="if(test == "+r+".0){}");return t}r.__esModule=!0,r.default=i;var a=e("pixi-gl-core"),s=n(a),u=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":15}],98:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[i.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA],t[i.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR],t[i.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.DST_ALPHA,e.ONE,e.DST_ALPHA],t[i.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_COLOR],t}r.__esModule=!0,r.default=n;var i=e("../../../const")},{"../../../const":46}],99:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t[i.DRAW_MODES.POINTS]=e.POINTS,t[i.DRAW_MODES.LINES]=e.LINES,t[i.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,t[i.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,t[i.DRAW_MODES.TRIANGLES]=e.TRIANGLES,t[i.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[i.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN,t}r.__esModule=!0,r.default=n;var i=e("../../../const")},{"../../../const":46}],100:[function(e,t,r){"use strict";function n(e){var t=e.getContextAttributes();t.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}r.__esModule=!0,r.default=n},{}],101:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./utils/maxRecommendedTextures"),o=n(i),a=e("./utils/canUploadSameBuffer"),s=n(a);r.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,o.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,s.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../math"),l=e("../utils"),c=e("../const"),h=e("../textures/Texture"),d=n(h),f=e("../display/Container"),p=n(f),g=new u.Point,v=function(e){function t(r){i(this,t);var n=o(this,e.call(this));return n._anchor=new u.ObservablePoint(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=c.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=r||d.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return a(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,l.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,l.sign)(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var e=this._texture,t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,u=this.vertexData,l=e.trim,c=e.orig,h=this._anchor,d=0,f=0,p=0,g=0;l?(f=l.x-h._x*c.width,d=f+l.width,g=l.y-h._y*c.height,p=g+l.height):(f=-h._x*c.width,d=f+c.width,g=-h._y*c.height,p=g+c.height),u[0]=r*f+i*g+a,u[1]=o*g+n*f+s,u[2]=r*d+i*g+a,u[3]=o*g+n*d+s,u[4]=r*d+i*p+a,u[5]=o*p+n*d+s,u[6]=r*f+i*p+a,u[7]=o*p+n*f+s}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,r=e.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,l=i.tx,c=i.ty,h=-n._x*r.width,d=h+r.width,f=-n._y*r.height,p=f+r.height;t[0]=o*h+s*f+l,t[1]=u*f+a*h+c,t[2]=o*d+s*f+l,t[3]=u*f+a*d+c,t[4]=o*d+s*p+l,t[5]=u*p+a*d+c,t[6]=o*h+s*p+l,t[7]=u*p+a*h+c},t.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,g);var t=this._texture.orig.width,r=this._texture.orig.height,n=-t*this.anchor.x,i=0;return g.x>=n&&g.x<n+t&&(i=-r*this.anchor.y,g.y>=i&&g.y<i+r)},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var r="boolean"==typeof t?t:t&&t.texture;if(r){var n="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},t.from=function(e){return new t(d.default.from(e))},t.fromFrame=function(e){var r=l.TextureCache[e];if(!r)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new t(r)},t.fromImage=function(e,r,n){return new t(d.default.fromImage(e,r,n))},s(t,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=(0,l.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=(0,l.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e||d.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}]),t}(p.default);r.default=v},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("../../renderers/canvas/CanvasRenderer"),a=n(o),s=e("../../const"),u=e("../../math"),l=e("./CanvasTinter"),c=n(l),h=new u.Matrix,d=function(){function e(t){i(this,e),this.renderer=t}return e.prototype.render=function(e){var t=e._texture,r=this.renderer,n=t._frame.width,i=t._frame.height,o=e.transform.worldTransform,a=0,l=0;if(!(t.orig.width<=0||t.orig.height<=0)&&t.baseTexture.source&&(r.setBlendMode(e.blendMode),t.valid)){r.context.globalAlpha=e.worldAlpha;var d=t.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==d&&(r.context[r.smoothProperty]=d),t.trim?(a=t.trim.width/2+t.trim.x-e.anchor.x*t.orig.width,l=t.trim.height/2+t.trim.y-e.anchor.y*t.orig.height):(a=(.5-e.anchor.x)*t.orig.width,l=(.5-e.anchor.y)*t.orig.height),t.rotate&&(o.copy(h),o=h,u.GroupD8.matrixAppendRotationInv(o,t.rotate,a,l),a=0,l=0),a-=n/2,l-=i/2,r.roundPixels?(r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution|0,o.ty*r.resolution|0),a|=0,l|=0):r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution,o.ty*r.resolution);var f=t.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=c.default.getTintedTexture(e,e.tint)),r.context.drawImage(e.tintedTexture,0,0,n*f,i*f,a*r.resolution,l*r.resolution,n*r.resolution,i*r.resolution)):r.context.drawImage(t.baseTexture.source,t._frame.x*f,t._frame.y*f,n*f,i*f,a*r.resolution,l*r.resolution,n*r.resolution,i*r.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}();r.default=d,a.default.registerPlugin("sprite",d)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("../../utils"),o=e("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),a=n(o),s={getTintedTexture:function(e,t){var r=e._texture;t=s.roundColor(t);var n="#"+("00000"+(0|t).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var i=r.tintCache[n],o=void 0;if(i){if(i.tintId===r._updateID)return r.tintCache[n];o=r.tintCache[n]}else o=s.canvas||document.createElement("canvas");if(s.tintMethod(r,t,o),o.tintId=r._updateID,s.convertTintToImage){var a=new Image;a.src=o.toDataURL(),r.tintCache[n]=a}else r.tintCache[n]=o,s.canvas=null;return o},tintWithMultiply:function(e,t,r){var n=r.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="multiply",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore()},tintWithOverlay:function(e,t,r){var n=r.getContext("2d"),i=e._frame.clone(),o=e.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=Math.ceil(i.width),r.height=Math.ceil(i.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore()},tintWithPerPixel:function(e,t,r){var n=r.getContext("2d"),o=e._frame.clone(),a=e.baseTexture.resolution;o.x*=a,o.y*=a,o.width*=a,o.height*=a,r.width=Math.ceil(o.width),r.height=Math.ceil(o.height),n.save(),n.globalCompositeOperation="copy",n.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),n.restore();for(var s=(0,i.hex2rgb)(t),u=s[0],l=s[1],c=s[2],h=n.getImageData(0,0,o.width,o.height),d=h.data,f=0;f<d.length;f+=4)d[f+0]*=u,d[f+1]*=l,d[f+2]*=c;n.putImageData(h,0,0)},roundColor:function(e){var t=s.cacheStepsPerColorChannel,r=(0,i.hex2rgb)(e);return r[0]=Math.min(255,r[0]/t*t),r[1]=Math.min(255,r[1]/t*t),r[2]=Math.min(255,r[2]/t*t),(0,i.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,a.default)(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,r.default=s},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(t){n(this,e),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return e.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},e}();r.default=i},{}],106:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../renderers/webgl/utils/ObjectRenderer"),u=n(s),l=e("../../renderers/webgl/WebGLRenderer"),c=n(l),h=e("../../utils/createIndicesForQuads"),d=n(h),f=e("./generateMultiTextureShader"),p=n(f),g=e("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),v=n(g),m=e("./BatchBuffer"),y=n(m),_=e("../../settings"),x=n(_),b=e("../../utils"),S=e("pixi-gl-core"),T=n(S),w=e("bit-twiddle"),E=n(w),C=0,R=0,O=function(e){function t(r){i(this,t);var n=o(this,e.call(this,r));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=x.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var a=1;a<=E.default.nextPow2(n.size);a*=2)n.buffers.push(new y.default(4*a*n.vertByteSize));n.indices=(0,d.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var s=0;s<n.size;s++)n.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return a(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),x.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,v.default)(this.MAX_TEXTURES,e)),this.shader=(0,p.default)(e,this.MAX_TEXTURES),this.indexBuffer=T.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,r=0;r<this.vaoMax;r++){var n=this.vertexBuffers[r]=T.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(n,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&i.addAttribute(n,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},t.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,r=E.default.nextPow2(this.currentIndex),n=E.default.log2(r),i=this.buffers[n],o=this.sprites,a=this.groups,s=i.float32View,u=i.uint32View,l=this.boundTextures,c=this.renderer.boundTextures,h=this.renderer.textureGC.count,d=0,f=void 0,p=void 0,g=1,v=0,m=a[0],y=void 0,_=void 0,S=b.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];m.textureCount=0,m.start=0,m.blend=S,C++;var w=void 0;for(w=0;w<t;++w){var O=c[w];O._enabled!==C?(l[w]=O,O._virtalBoundId=w,O._enabled=C):l[w]=this.renderer.emptyTextures[w]}for(C++,w=0;w<this.currentIndex;++w){var M=o[w];o[w]=null,f=M._texture.baseTexture;var P=b.premultiplyBlendMode[Number(f.premultipliedAlpha)][M.blendMode];if(S!==P&&(S=P,p=null,v=t,C++),p!==f&&(p=f,f._enabled!==C)){if(v===t&&(C++,m.size=w-m.start,v=0,m=a[g++],m.blend=S,m.textureCount=0,m.start=w),f.touched=h,f._virtalBoundId===-1)for(var A=0;A<t;++A){var I=(A+R)%t,D=l[I];if(D._enabled!==C){R++,D._virtalBoundId=-1,f._virtalBoundId=I,l[I]=f;break}}f._enabled=C,m.textureCount++,m.ids[v]=f._virtalBoundId,m.textures[v++]=f}if(y=M.vertexData,_=M._texture._uvs.uvsUint32,this.renderer.roundPixels){var k=this.renderer.resolution;s[d]=(y[0]*k|0)/k,s[d+1]=(y[1]*k|0)/k,s[d+5]=(y[2]*k|0)/k,s[d+6]=(y[3]*k|0)/k,s[d+10]=(y[4]*k|0)/k,s[d+11]=(y[5]*k|0)/k,s[d+15]=(y[6]*k|0)/k,s[d+16]=(y[7]*k|0)/k}else s[d]=y[0],s[d+1]=y[1],s[d+5]=y[2],s[d+6]=y[3],s[d+10]=y[4],s[d+11]=y[5],s[d+15]=y[6],s[d+16]=y[7];u[d+2]=_[0],u[d+7]=_[1],u[d+12]=_[2],u[d+17]=_[3];var F=Math.min(M.worldAlpha,1),L=F<1&&f.premultipliedAlpha?(0,b.premultiplyTint)(M._tintRGB,F):M._tintRGB+(255*F<<24);u[d+3]=u[d+8]=u[d+13]=u[d+18]=L,s[d+4]=s[d+9]=s[d+14]=s[d+19]=f._virtalBoundId,d+=20}if(m.size=w-m.start,x.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var B=this.shader.attributes,N=this.vertexBuffers[this.vertexCount]=T.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),X=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(N,B.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(N,B.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(N,B.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);B.aTextureId&&X.addAttribute(N,B.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=X}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(w=0;w<t;++w)c[w]._virtalBoundId=-1;for(w=0;w<g;++w){for(var j=a[w],U=j.textureCount,Y=0;Y<U;Y++)p=j.textures[Y],c[j.ids[Y]]!==p&&this.renderer.bindTexture(p,j.ids[Y],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(j.blend),e.drawElements(e.TRIANGLES,6*j.size,e.UNSIGNED_SHORT,6*j.start*2)}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),x.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},t}(u.default);r.default=O,c.default.registerPlugin("sprite",O)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",n=u;n=n.replace(/%count%/gi,t),n=n.replace(/%forloop%/gi,o(t));for(var i=new s.default(e,r,n),a=[],l=0;l<t;l++)a[l]=l;return i.bind(),i.uniforms.uSamplers=a,i}function o(e){var t="";t+="\n",t+="\n";for(var r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+="if(textureId == "+r+".0)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"}r.__esModule=!0,r.default=i;var a=e("../../Shader"),s=n(a),u=(e("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"));
},{"../../Shader":44,path:8}],108:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../sprites/Sprite"),l=n(u),c=e("../textures/Texture"),h=n(c),d=e("../math"),f=e("../utils"),p=e("../const"),g=e("../settings"),v=n(g),m=e("./TextStyle"),y=n(m),_=e("./TextMetrics"),x=n(_),b=e("../utils/trimCanvas"),S=n(b),T={texture:!0,children:!1,baseTexture:!0},w=function(e){function t(r,n,a){i(this,t),a=a||document.createElement("canvas"),a.width=3,a.height=3;var s=h.default.fromCanvas(a,v.default.SCALE_MODE,"text");s.orig=new d.Rectangle,s.trim=new d.Rectangle;var u=o(this,e.call(this,s));return h.default.addToCache(u._texture,u._texture.baseTexture.textureCacheIds[0]),u.canvas=a,u.context=u.canvas.getContext("2d"),u.resolution=v.default.RESOLUTION,u._text=null,u._style=null,u._styleListener=null,u._font="",u.text=r,u.style=n,u.localStyleID=-1,u}return a(t,e),t.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var r=this.context,n=x.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=n.width,o=n.height,a=n.lines,s=n.lineHeight,u=n.lineWidths,l=n.maxLineWidth,c=n.fontProperties;this.canvas.width=Math.ceil((Math.max(1,i)+2*t.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*t.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=t.stroke,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;var h=void 0,d=void 0;if(t.dropShadow){r.fillStyle=t.dropShadowColor,r.globalAlpha=t.dropShadowAlpha,r.shadowBlur=t.dropShadowBlur,t.dropShadowBlur>0&&(r.shadowColor=t.dropShadowColor);for(var f=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,p=Math.sin(t.dropShadowAngle)*t.dropShadowDistance,g=0;g<a.length;g++)h=t.strokeThickness/2,d=t.strokeThickness/2+g*s+c.ascent,"right"===t.align?h+=l-u[g]:"center"===t.align&&(h+=(l-u[g])/2),t.fill&&(this.drawLetterSpacing(a[g],h+f+t.padding,d+p+t.padding),t.stroke&&t.strokeThickness&&(r.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(a[g],h+f+t.padding,d+p+t.padding,!0),r.strokeStyle=t.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(t,a);for(var v=0;v<a.length;v++)h=t.strokeThickness/2,d=t.strokeThickness/2+v*s+c.ascent,"right"===t.align?h+=l-u[v]:"center"===t.align&&(h+=(l-u[v])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[v],h+t.padding,d+t.padding,!0),t.fill&&this.drawLetterSpacing(a[v],h+t.padding,d+t.padding);this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style,o=i.letterSpacing;if(0===o)return void(n?this.context.strokeText(e,t,r):this.context.fillText(e,t,r));for(var a=String.prototype.split.call(e,""),s=t,u=0,l="";u<e.length;)l=a[u++],n?this.context.strokeText(l,s,r):this.context.fillText(l,s,r),s+=this.context.measureText(l).width+o},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=(0,S.default)(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}var r=this._texture,n=this._style,i=n.trim?0:n.padding,o=r.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=e.width,o.realHeight=e.height,o.width=e.width/this.resolution,o.height=e.height/this.resolution,r.trim.width=r._frame.width=e.width/this.resolution,r.trim.height=r._frame.height=e.height/this.resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-2*i,r.orig.height=r._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},t.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,t)},t.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(e,t){if(!Array.isArray(e.fill))return e.fill;if(navigator.isCocoonJS)return e.fill[0];var r=void 0,n=void 0,i=void 0,o=void 0,a=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,u=e.fill.slice(),l=e.fillGradientStops.slice();if(!l.length)for(var c=u.length+1,h=1;h<c;++h)l.push(h/c);if(u.unshift(e.fill[0]),l.unshift(0),u.push(e.fill[e.fill.length-1]),l.push(1),e.fillGradientType===p.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,0,a/2,s),n=(u.length+1)*t.length,i=0;for(var d=0;d<t.length;d++){i+=1;for(var f=0;f<u.length;f++)o="number"==typeof l[f]?l[f]/t.length+d/t.length:i/n,r.addColorStop(o,u[f]),i++}}else{r=this.context.createLinearGradient(0,s/2,a,s/2),n=u.length+1,i=1;for(var g=0;g<u.length;g++)o="number"==typeof l[g]?l[g]:i/n,r.addColorStop(o,u[g]),i++}return r},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},T,t),e.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},s(t,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=(0,f.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=(0,f.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){e=e||{},e instanceof y.default?this._style=e:this._style=new y.default(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=String(""===e||null===e||void 0===e?" ":e),this._text!==e&&(this._text=e,this.dirty=!0)}}]),t}(l.default);r.default=w},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(t,r,i,o,a,s,u,l,c){n(this,e),this.text=t,this.style=r,this.width=i,this.height=o,this.lines=a,this.lineWidths=s,this.lineHeight=u,this.maxLineWidth=l,this.fontProperties=c}return e.measureText=function(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e._canvas;n=void 0===n||null===n?r.wordWrap:n;var o=r.toFontString(),a=e.measureFont(o),s=i.getContext("2d");s.font=o;for(var u=n?e.wordWrap(t,r,i):t,l=u.split(/(?:\r\n|\r|\n)/),c=new Array(l.length),h=0,d=0;d<l.length;d++){var f=s.measureText(l[d]).width+(l[d].length-1)*r.letterSpacing;c[d]=f,h=Math.max(h,f)}var p=h+r.strokeThickness;r.dropShadow&&(p+=r.dropShadowDistance);var g=r.lineHeight||a.fontSize+r.strokeThickness,v=Math.max(g,a.fontSize+r.strokeThickness)+(l.length-1)*(g+r.leading);return r.dropShadow&&(v+=r.dropShadowDistance),new e(t,r,p,v,l,c,g+r.leading,h,a)},e.wordWrap=function(t,r){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._canvas,i=n.getContext("2d"),o=0,a="",s="",u={},l=r.letterSpacing,c=r.whiteSpace,h=e.collapseSpaces(c),d=e.collapseNewlines(c),f=!h,p=r.wordWrapWidth+l,g=e.tokenize(t),v=0;v<g.length;v++){var m=g[v];if(e.isNewline(m)){if(!d){s+=e.addLine(a),f=!h,a="",o=0;continue}m=" "}if(h){var y=e.isBreakingSpace(m),_=e.isBreakingSpace(a[a.length-1]);if(y&&_)continue}var x=e.getFromCache(m,l,u,i);if(x>p)if(""!==a&&(s+=e.addLine(a),a="",o=0),e.canBreakWords(m,r.breakWords))for(var b=m.split(""),S=0;S<b.length;S++){for(var T=b[S],w=1;b[S+w];){var E=b[S+w],C=T[T.length-1];if(e.canBreakChars(C,E,m,S,r.breakWords))break;T+=E,w++}S+=T.length-1;var R=e.getFromCache(T,l,u,i);R+o>p&&(s+=e.addLine(a),f=!1,a="",o=0),a+=T,o+=R}else{a.length>0&&(s+=e.addLine(a),a="",o=0);var O=v===g.length-1;s+=e.addLine(m,!O),f=!1,a="",o=0}else x+o>p&&(f=!1,s+=e.addLine(a),a="",o=0),(a.length>0||!e.isBreakingSpace(m)||f)&&(a+=m,o+=x)}return s+=e.addLine(a,!1)},e.addLine=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=e.trimRight(t),t=r?t+"\n":t},e.getFromCache=function(e,t,r,n){var i=r[e];if(void 0===i){var o=e.length*t;i=n.measureText(e).width+o,r[e]=i}return i},e.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},e.collapseNewlines=function(e){return"normal"===e},e.trimRight=function(t){if("string"!=typeof t)return"";for(var r=t.length-1;r>=0;r--){var n=t[r];if(!e.isBreakingSpace(n))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return"string"==typeof t&&e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t){return"string"==typeof t&&e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var r=[],n="";if("string"!=typeof t)return r;for(var i=0;i<t.length;i++){var o=t[i];e.isBreakingSpace(o)||e.isNewline(o)?(""!==n&&(r.push(n),n=""),r.push(o)):n+=o}return""!==n&&r.push(n),r},e.canBreakWords=function(e,t){return t},e.canBreakChars=function(e,t,r,n,i){return!0},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var r={},n=e._canvas,i=e._context;i.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),u=2*s;s=s*e.BASELINE_MULTIPLIER|0,n.width=a,n.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var l=i.getImageData(0,0,a,u).data,c=l.length,h=4*a,d=0,f=0,p=!1;for(d=0;d<s;++d){for(var g=0;g<h;g+=4)if(255!==l[f+g]){p=!0;break}if(p)break;f+=h}for(r.ascent=s-d,f=c-h,p=!1,d=u;d>s;--d){for(var v=0;v<h;v+=4)if(255!==l[f+v]){p=!0;break}if(p)break;f-=h}return r.descent=d-s,r.fontSize=r.ascent+r.descent,e._fonts[t]=r,r},e.clearMetrics=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t?delete e._fonts[t]:e._fonts={}},e}();r.default=i;var o=document.createElement("canvas");o.width=o.height=10,i._canvas=o,i._context=o.getContext("2d"),i._fonts={},i.METRICS_STRING="|Éq",i.BASELINE_SYMBOL="M",i.BASELINE_MULTIPLIER=1.4,i._newlines=[10,13],i._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],110:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return"number"==typeof e?(0,c.hex2string)(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function o(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=i(e[t]);return e}return i(e)}function a(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function s(e,t,r){for(var n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}r.__esModule=!0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("../const"),c=e("../utils"),h={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:l.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},d=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],f=function(){function e(t){n(this,e),this.styleID=0,this.reset(),s(this,t,t)}return e.prototype.clone=function(){var t={};return s(t,this,h),new e(t)},e.prototype.reset=function(){s(this,h,h)},e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var n=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&d.indexOf(n)<0&&(n='"'+n+'"'),t[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},u(e,[{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(e){var t=o(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(e){var t=o(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){a(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(e){var t=o(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),e}();r.default=f},{"../const":46,"../utils":125}],111:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./BaseTexture"),u=n(s),l=e("../settings"),c=n(l),h=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments[2],s=arguments[3];i(this,t);var u=o(this,e.call(this,null,a));return u.resolution=s||c.default.RESOLUTION,u.width=Math.ceil(r),u.height=Math.ceil(n),u.realWidth=u.width*u.resolution,u.realHeight=u.height*u.resolution,u.scaleMode=void 0!==a?a:c.default.SCALE_MODE,u.hasLoaded=!0,u._glRenderTargets={},u._canvasRenderTarget=null,u.valid=!1,u}return a(t,e),t.prototype.resize=function(e,t){e=Math.ceil(e),t=Math.ceil(t),e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},t}(u.default);r.default=h},{"../settings":101,"./BaseTexture":112}],112:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../utils"),u=e("../settings"),l=n(u),c=e("eventemitter3"),h=n(c),d=e("../utils/determineCrossOrigin"),f=n(d),p=e("bit-twiddle"),g=n(p),v=function(e){function t(r,n,a){i(this,t);var u=o(this,e.call(this));return u.uid=(0,s.uid)(),u.touched=0,u.resolution=a||l.default.RESOLUTION,u.width=100,u.height=100,u.realWidth=100,u.realHeight=100,u.scaleMode=void 0!==n?n:l.default.SCALE_MODE,u.hasLoaded=!1,u.isLoading=!1,u.source=null,u.origSource=null,u.imageType=null,u.sourceScale=1,u.premultipliedAlpha=!0,u.imageUrl=null,u.isPowerOfTwo=!1,u.mipmap=l.default.MIPMAP_TEXTURES,u.wrapMode=l.default.WRAP_MODE,u._glTextures={},u._enabled=0,u._virtalBoundId=-1,u._destroyed=!1,u.textureCacheIds=[],r&&u.loadSource(r),u}return a(t,e),t.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=g.default.isPow2(this.realWidth)&&g.default.isPow2(this.realHeight)},t.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!e.getContext){this.isLoading=!0;var n=this;if(e.onload=function(){if(n._updateImageType(),e.onload=null,e.onerror=null,n.isLoading)return n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType?void n._loadSvgSource():void n.emit("loaded",n)},e.onerror=function(){e.onload=null,e.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}},t.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,s.decomposeDataUri)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var r=e.subType.split("+")[0];if(t=(0,s.getUrlFileExtension)("."+r),!t)throw new Error("Invalid image type in data URI.")}else t=(0,s.getUrlFileExtension)(this.imageUrl),t||(t="png");this.imageType=t}},t.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,s.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},t.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},t.prototype._loadSvgSourceUsingString=function(e){var r=(0,s.getSvgSize)(e),n=r.width,i=r.height;if(!n||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(i*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,s.uid)(),o.getContext("2d").drawImage(this.source,0,0,n,i,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,t.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete s.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},t.fromImage=function(e,r,n,i){var o=s.BaseTextureCache[e];if(!o){var a=new Image;void 0===r&&0!==e.indexOf("data:")?a.crossOrigin=(0,f.default)(e):r&&(a.crossOrigin="string"==typeof r?r:"anonymous"),o=new t(a,n),o.imageUrl=e,i&&(o.sourceScale=i),o.resolution=(0,s.getResolutionOfUrl)(e),a.src=e,t.addToCache(o,e)}return o},t.fromCanvas=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=n+"_"+(0,s.uid)());var i=s.BaseTextureCache[e._pixiId];return i||(i=new t(e,r),t.addToCache(i,e._pixiId)),i},t.from=function(e,r,n){if("string"==typeof e)return t.fromImage(e,void 0,r,n);if(e instanceof HTMLImageElement){var i=e.src,o=s.BaseTextureCache[i];return o||(o=new t(e,r),o.imageUrl=i,n&&(o.sourceScale=n),o.resolution=(0,s.getResolutionOfUrl)(i),t.addToCache(o,i)),o}return e instanceof HTMLCanvasElement?t.fromCanvas(e,r):e},t.addToCache=function(e,t){t&&(e.textureCacheIds.indexOf(t)===-1&&e.textureCacheIds.push(t),s.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),s.BaseTextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=s.BaseTextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete s.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)delete s.BaseTextureCache[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},t}(h.default);r.default=v},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./BaseRenderTexture"),u=n(s),l=e("./Texture"),c=n(l),h=function(e){function t(r,n){i(this,t);var a=null;if(!(r instanceof u.default)){var s=arguments[1],l=arguments[2],c=arguments[3],h=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+l+") instead of the ctor directly."),a=arguments[0],n=null,r=new u.default(s,l,c,h)}var d=o(this,e.call(this,r,n));return d.legacyRenderer=a,d.valid=!0,d._updateUvs(),d}return a(t,e),t.prototype.resize=function(e,t,r){e=Math.ceil(e),t=Math.ceil(t),this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,r||this.baseTexture.resize(e,t),this._updateUvs()},t.create=function(e,r,n,i){return new t(new u.default(e,r,n,i))},t}(c.default);r.default=h},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("../"),a=e("../utils"),s=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,e),this.baseTexture=t,this.textures={},this.animations={},this.data=r,this.resolution=this._updateResolution(i||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i(e,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),e.prototype._updateResolution=function(e){var t=this.data.meta.scale,r=(0,a.getResolutionOfUrl)(e,null);return null===r&&(r=void 0!==t?parseFloat(t):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var r=t,n=e.BATCH_SIZE,i=this.baseTexture.sourceScale;r-t<n&&r<this._frameKeys.length;){var a=this._frameKeys[r],s=this._frames[a],u=s.frame;if(u){var l=null,c=null,h=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,d=new o.Rectangle(0,0,Math.floor(h.w*i)/this.resolution,Math.floor(h.h*i)/this.resolution);l=s.rotated?new o.Rectangle(Math.floor(u.x*i)/this.resolution,Math.floor(u.y*i)/this.resolution,Math.floor(u.h*i)/this.resolution,Math.floor(u.w*i)/this.resolution):new o.Rectangle(Math.floor(u.x*i)/this.resolution,Math.floor(u.y*i)/this.resolution,Math.floor(u.w*i)/this.resolution,Math.floor(u.h*i)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(c=new o.Rectangle(Math.floor(s.spriteSourceSize.x*i)/this.resolution,Math.floor(s.spriteSourceSize.y*i)/this.resolution,Math.floor(u.w*i)/this.resolution,Math.floor(u.h*i)/this.resolution)),this.textures[a]=new o.Texture(this.baseTexture,l,d,c,s.rotated?2:0,s.anchor),o.Texture.addToCache(this.textures[a],a)}r++}},e.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var r=e[t],n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var a=o;this.animations[t].push(this.textures[a])}}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},e.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},e}();r.default=s},{"../":65,"../utils":125}],115:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new S(new h.default(e))}function u(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}r.__esModule=!0;var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("./BaseTexture"),h=n(c),d=e("./VideoBaseTexture"),f=n(d),p=e("./TextureUvs"),g=n(p),v=e("eventemitter3"),m=n(v),y=e("../math"),_=e("../utils"),x=e("../settings"),b=n(x),S=function(e){
function t(r,n,a,s,u,l){i(this,t);var c=o(this,e.call(this));if(c.noFrame=!1,n||(c.noFrame=!0,n=new y.Rectangle(0,0,1,1)),r instanceof t&&(r=r.baseTexture),c.baseTexture=r,c._frame=n,c.trim=s,c.valid=!1,c.requiresUpdate=!1,c._uvs=null,c.orig=a||n,c._rotate=Number(u||0),u===!0)c._rotate=2;else if(c._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return r.hasLoaded?(c.noFrame&&(n=new y.Rectangle(0,0,r.width,r.height),r.on("update",c.onBaseTextureUpdated,c)),c.frame=n):r.once("loaded",c.onBaseTextureLoaded,c),c.defaultAnchor=l?new y.Point(l.x,l.y):new y.Point(0,0),c._updateID=0,c.transform=null,c.textureCacheIds=[],c}return a(t,e),t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new y.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},t.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},t.prototype.destroy=function(e){this.baseTexture&&(e&&(_.TextureCache[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new g.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.fromImage=function(e,r,n,i){var o=_.TextureCache[e];return o||(o=new t(h.default.fromImage(e,r,n,i)),t.addToCache(o,e)),o},t.fromFrame=function(e){var t=_.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},t.fromCanvas=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new t(h.default.fromCanvas(e,r,n))},t.fromVideo=function(e,r){return"string"==typeof e?t.fromVideoUrl(e,r):new t(f.default.fromVideo(e,r))},t.fromVideoUrl=function(e,r){return new t(f.default.fromUrl(e,r))},t.from=function(e){if("string"==typeof e){var r=_.TextureCache[e];if(!r){var n=null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return n?t.fromVideoUrl(e):t.fromImage(e)}return r}return e instanceof HTMLImageElement?new t(h.default.from(e)):e instanceof HTMLCanvasElement?t.fromCanvas(e,b.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?t.fromVideo(e):e instanceof h.default?new t(e):e},t.fromLoader=function(e,r,n){var i=new h.default(e,void 0,(0,_.getResolutionOfUrl)(r)),o=new t(i);return i.imageUrl=r,n||(n=r),h.default.addToCache(o.baseTexture,n),t.addToCache(o,n),n!==r&&(h.default.addToCache(o.baseTexture,r),t.addToCache(o,r)),o},t.addToCache=function(e,t){t&&(e.textureCacheIds.indexOf(t)===-1&&e.textureCacheIds.push(t),_.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),_.TextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=_.TextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete _.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)_.TextureCache[e.textureCacheIds[n]]===e&&delete _.TextureCache[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null},l(t,[{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,r=e.y,n=e.width,i=e.height,o=t+n>this.baseTexture.width,a=r+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",u="X: "+t+" + "+n+" = "+(t+n)+" > "+this.baseTexture.width,l="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(u+" "+s+" "+l))}this.valid=n&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),t}(m.default);r.default=S,S.EMPTY=new S(new h.default),u(S.EMPTY),u(S.EMPTY.baseTexture),S.WHITE=s(),u(S.WHITE),u(S.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../math/Matrix"),s=n(a),u=new s.default,l=function(){function e(t,r){i(this,e),this._texture=t,this.mapCoord=new s.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin="undefined"==typeof r?.5:r}return e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,n=0;n<e.length;n+=2){var i=e[n],o=e[n+1];t[n]=i*r.a+o*r.c+r.tx,t[n+1]=i*r.b+o*r.d+r.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=t.orig,i=t.trim;i&&(u.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(u));var o=t.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(t._frame.x+s+l)/o.width,a[1]=(t._frame.y+s+l)/o.height,a[2]=(t._frame.x+t._frame.width-s+l)/o.width,a[3]=(t._frame.y+t._frame.height-s+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,!0},o(e,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),e}();r.default=l},{"../math/Matrix":67}],117:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("../math/GroupD8"),a=n(o),s=function(){function e(){i(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return e.prototype.set=function(e,t,r){var n=t.width,i=t.height;if(r){var o=e.width/2/n,s=e.height/2/i,u=e.x/n+o,l=e.y/i+s;r=a.default.add(r,a.default.NW),this.x0=u+o*a.default.uX(r),this.y0=l+s*a.default.uY(r),r=a.default.add(r,2),this.x1=u+o*a.default.uX(r),this.y1=l+s*a.default.uY(r),r=a.default.add(r,2),this.x2=u+o*a.default.uX(r),this.y2=l+s*a.default.uY(r),r=a.default.add(r,2),this.x3=u+o*a.default.uX(r),this.y3=l+s*a.default.uY(r)}else this.x0=e.x/n,this.y0=e.y/i,this.x1=(e.x+e.width)/n,this.y1=e.y/i,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/i,this.x3=e.x/n,this.y3=(e.y+e.height)/i;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},e}();r.default=s},{"../math/GroupD8":66}],118:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){t||(e=e.split("?").shift().toLowerCase(),t="video/"+e.substr(e.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=e,r.type=t,r}r.__esModule=!0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./BaseTexture"),c=n(l),h=e("../utils"),d=e("../ticker"),f=e("../const"),p=e("../utils/determineCrossOrigin"),g=n(p),v=function(e){function t(r,n){if(i(this,t),!r)throw new Error("No video source element specified.");(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0);var a=o(this,e.call(this,r,n));return a.width=r.videoWidth,a.height=r.videoHeight,a._autoUpdate=!0,a._isAutoUpdating=!1,a.autoPlay=!0,a.update=a.update.bind(a),a._onCanPlay=a._onCanPlay.bind(a),r.addEventListener("play",a._onPlayStart.bind(a)),r.addEventListener("pause",a._onPlayStop.bind(a)),a.hasLoaded=!1,a.__loaded=!1,a._isSourceReady()?a._onCanPlay():(r.addEventListener("canplay",a._onCanPlay),r.addEventListener("canplaythrough",a._onCanPlay)),a}return a(t,e),t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(d.shared.add(this.update,this,f.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(d.shared.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&d.shared.remove(this.update,this),this.source&&this.source._pixiId&&(c.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),e.prototype.destroy.call(this)},t.fromVideo=function(e,r){e._pixiId||(e._pixiId="video_"+(0,h.uid)());var n=h.BaseTextureCache[e._pixiId];return n||(n=new t(e,r),c.default.addToCache(n,e._pixiId)),n},t.fromUrl=function(e,r,n){var i=document.createElement("video");i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var o=Array.isArray(e)?e[0].src||e[0]:e.src||e;if(void 0===n&&0!==o.indexOf("data:")?i.crossOrigin=(0,g.default)(o):n&&(i.crossOrigin="string"==typeof n?n:"anonymous"),Array.isArray(e))for(var a=0;a<e.length;++a)i.appendChild(s(e[a].src||e[a],e[a].mime));else i.appendChild(s(o,e.mime));return i.load(),t.fromVideo(i,r)},u(t,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(d.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(d.shared.add(this.update,this,f.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),t}(c.default);r.default=v,v.fromUrls=v.fromUrl},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../settings"),s=n(a),u=e("../const"),l=e("./TickerListener"),c=n(l),h=function(){function e(){var t=this;i(this,e),this._head=new c.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new c.default(e,t,r))},e.prototype.addOnce=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new c.default(e,t,r,!0))},e.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*s.default.TARGET_FPMS*this.speed;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},o(e,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}();r.default=h},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,e),this.fn=t,this.context=r,this.priority=i,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(e,t){return t=t||null,this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},e}();r.default=i},{}],121:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.Ticker=r.shared=void 0;var i=e("./Ticker"),o=n(i),a=new o.default;a.autoStart=!0,a.destroy=function(){},r.shared=a,r.Ticker=o.default},{"./Ticker":119}],122:[function(e,t,r){"use strict";function n(){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!e}r.__esModule=!0,r.default=n},{}],123:[function(e,t,r){"use strict";function n(e){for(var t=6*e,r=new Uint16Array(t),n=0,i=0;n<t;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}r.__esModule=!0,r.default=n},{}],124:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";t=t||window.location,s||(s=document.createElement("a")),s.href=e,e=a.default.parse(s.href);var r=!e.port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&r&&e.protocol===t.protocol?"":"anonymous"}r.__esModule=!0,r.default=i;var o=e("url"),a=n(o),s=void 0},{url:38}],125:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(){return++j}function a(e,t){return t=t||[],t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function s(e){return e=e.toString(16),e="000000".substr(0,6-e.length)+e,"#"+e}function u(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)}function l(e,t){var r=E.default.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):void 0!==t?t:1}function c(e){var t=T.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}function h(e){var t=T.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase()}function d(e){var t=T.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}function f(){U=!0}function p(e){if(!U){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c PixiJS "+T.VERSION+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("PixiJS "+T.VERSION+" - "+e+" - http://www.pixijs.com/");U=!0}}function g(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(e){return!1}}function v(e){return 0===e?0:e<0?-1:1}function m(){var e=void 0;for(e in Y)Y[e].destroy();for(e in z)z[e].destroy()}function y(){var e=void 0;for(e in Y)delete Y[e];for(e in z)delete z[e]}function _(e,t){return W[t?1:0][e]}function x(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var r=e>>16&255,n=e>>8&255,i=255&e;return r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0,(255*t<<24)+(r<<16)+(n<<8)+i}function b(e,t,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function S(e,t,r,n){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,(n||void 0===n)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}r.__esModule=!0,r.premultiplyBlendMode=r.BaseTextureCache=r.TextureCache=r.earcut=r.mixins=r.pluginTarget=r.EventEmitter=r.removeItems=r.isMobile=void 0,r.uid=o,r.hex2rgb=a,r.hex2string=s,r.rgb2hex=u,r.getResolutionOfUrl=l,r.decomposeDataUri=c,r.getUrlFileExtension=h,r.getSvgSize=d,r.skipHello=f,r.sayHello=p,r.isWebGLSupported=g,r.sign=v,r.destroyTextureCache=m,r.clearTextureCache=y,r.correctBlendMode=_,r.premultiplyTint=x,r.premultiplyRgba=b,r.premultiplyTintToRgba=S;var T=e("../const"),w=e("../settings"),E=i(w),C=e("eventemitter3"),R=i(C),O=e("./pluginTarget"),M=i(O),P=e("./mixin"),A=n(P),I=e("ismobilejs"),D=n(I),k=e("remove-array-items"),F=i(k),L=e("./mapPremultipliedBlendModes"),B=i(L),N=e("earcut"),X=i(N),j=0,U=!1;r.isMobile=D,r.removeItems=F.default,r.EventEmitter=R.default,r.pluginTarget=M.default,r.mixins=A,r.earcut=X.default;var Y=r.TextureCache=Object.create(null),z=r.BaseTextureCache=Object.create(null),W=r.premultiplyBlendMode=(0,B.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,earcut:2,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(e,t,r){"use strict";function n(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,e[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,e[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,t[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,t[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,t[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(t),n.push(e),n}r.__esModule=!0,r.default=n;var i=e("../const")},{"../const":46}],127:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return a.default.tablet||a.default.phone?4:e}r.__esModule=!0,r.default=i;var o=e("ismobilejs"),a=n(o)},{ismobilejs:4}],128:[function(e,t,r){"use strict";function n(e,t){if(e&&t)for(var r=Object.keys(t),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}}function i(e,t){a.push(e,t)}function o(){for(var e=0;e<a.length;e+=2)n(a[e],a[e+1]);a.length=0}r.__esModule=!0,r.mixin=n,r.delayMixin=i,r.performMixins=o;var a=[]},{}],129:[function(e,t,r){"use strict";function n(e){e.__plugins={},e.registerPlugin=function(t,r){e.__plugins[t]=r},e.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var t in e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}r.__esModule=!0,r.default={mixin:function(e){n(e)}}},{}],130:[function(e,t,r){"use strict";function n(e){var t=e.width,r=e.height,n=e.getContext("2d"),i=n.getImageData(0,0,t,r),o=i.data,a=o.length,s={top:null,left:null,right:null,bottom:null},u=null,l=void 0,c=void 0,h=void 0;for(l=0;l<a;l+=4)0!==o[l+3]&&(c=l/4%t,h=~~(l/4/t),null===s.top&&(s.top=h),null===s.left?s.left=c:c<s.left&&(s.left=c),null===s.right?s.right=c+1:s.right<c&&(s.right=c+1),null===s.bottom?s.bottom=h:s.bottom<h&&(s.bottom=h));return null!==s.top&&(t=s.right-s.left,r=s.bottom-s.top+1,u=n.getImageData(s.left,s.top,t,r)),{height:r,width:t,data:u}}r.__esModule=!0,r.default=n},{}],131:[function(e,t,r){"use strict";function n(e){if(!o[e]){var t=(new Error).stack;"undefined"==typeof t?console.warn("Deprecation Warning: ",e):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(t))),o[e]=!0}}function i(e){var t=e.mesh,r=e.particles,i=e.extras,o=e.filters,a=e.prepare,s=e.loaders,u=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),r.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),i.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),i.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),i.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(t){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(t){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(t){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(t){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(t){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(t){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(t){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var l=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],c=function(t){var r=l[t];Object.defineProperty(e[r.parent],"DEFAULT",{get:function(){return n("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),e.settings[r.target]},set:function(t){n("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),e.settings[r.target]=t}})},h=0;h<l.length;h++)c(h);Object.defineProperties(e.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(t){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=t}}}),i.AnimatedSprite&&Object.defineProperties(i,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),i.AnimatedSprite}}}),i&&Object.defineProperties(i,{TextureTransform:{get:function(){return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),e.TextureMatrix}}}),e.DisplayObject.prototype.generateTexture=function(e,t,r){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,t,r)},e.Graphics.prototype.generateTexture=function(e,t){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,t)},e.GroupD8.isSwapWidthHeight=function(t){return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),e.GroupD8.isVertical(t)},e.RenderTexture.prototype.render=function(e,t,r,i){this.legacyRenderer.render(e,this,r,t,!i),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(e){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},i.BitmapText&&(i.BitmapText.prototype.setText=function(e){this.text=e,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),e.Text.prototype.setText=function(e){this.text=e,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(t){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),
e.TextMetrics.measureFont(t)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(t){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(t)},e.Text.getFontStyle=function(t){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),t=t||{},t instanceof e.TextStyle||(t=new e.TextStyle(t)),t.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),e.indexOf("italic")>1?this._fontStyle="italic":e.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",e.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var t=e.split(" "),r=-1;this._fontSize=26;for(var i=0;i<t.length;++i)if(t[i].match(/(px|pt|em|%)/)){r=i,this._fontSize=t[i];break}this._fontWeight="normal";for(var o=0;o<r;++o)if(t[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[o];break}if(r>-1&&r<t.length-1){this._fontFamily="";for(var a=r+1;a<t.length;++a)this._fontFamily+=t[a]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(t,r){e.Texture.addToCache(t,r),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(t){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(t),e.Texture.removeFromCache(t)},Object.defineProperties(o,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}},VoidFilter:{get:function(){return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),e.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var d=!0;if(Object.defineProperty(e.utils,"_saidHello",{set:function(e){e&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),d=e},get:function(){return d}}),a.BasePrepare&&(a.BasePrepare.prototype.register=function(e,t){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this}),a.canvas&&Object.defineProperty(a.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.webgl&&Object.defineProperty(a.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.Loader){var f=s.Resource,p=s.Loader;Object.defineProperties(f.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===f.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===f.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===f.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===f.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===f.TYPE.VIDEO}}}),Object.defineProperties(p.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}u.interactiveTarget&&Object.defineProperty(u.interactiveTarget,"defaultCursor",{set:function(e){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),u.InteractionManager&&(Object.defineProperty(u.InteractionManager,"defaultCursorStyle",{set:function(e){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(u.InteractionManager,"currentCursorStyle",{set:function(e){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}r.__esModule=!0,r.default=i;var o={}},{}],132:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("../../core"),a=n(o),s=new a.Rectangle,u=function(){function e(t){i(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function e(t){var e=new Image;return e.src=this.base64(t),e},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;e&&(o=e instanceof a.RenderTexture?e:t.generateTexture(e)),o?(r=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(r=t.rootContext,i=s,i.width=this.renderer.width,i.height=this.renderer.height);var u=i.width*n,l=i.height*n,c=new a.CanvasRenderTarget(u,l,1),h=r.getImageData(i.x*n,i.y*n,u,l);return c.context.putImageData(h,0,0),c.canvas},e.prototype.pixels=function(e){var t=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;return e&&(o=e instanceof a.RenderTexture?e:t.generateTexture(e)),o?(r=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(r=t.rootContext,i=s,i.width=t.width,i.height=t.height),r.getImageData(0,0,i.width*n,i.height*n).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();r.default=u,a.CanvasRenderer.registerPlugin("extract",u)},{"../../core":65}],133:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./webgl/WebGLExtract");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=e("./canvas/CanvasExtract");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}})},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("../../core"),a=n(o),s=new a.Rectangle,u=4,l=function(){function e(t){i(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function e(t){var e=new Image;return e.src=this.base64(t),e},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,r=void 0,n=void 0,i=void 0,o=!1,l=void 0,c=!1;e&&(e instanceof a.RenderTexture?l=e:(l=this.renderer.generateTexture(e),c=!0)),l?(r=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,i=l.frame,o=!1):(r=this.renderer.rootRenderTarget,n=r.resolution,o=!0,i=s,i.width=r.size.width,i.height=r.size.height);var h=i.width*n,d=i.height*n,f=new a.CanvasRenderTarget(h,d,1);if(r){t.bindRenderTarget(r);var p=new Uint8Array(u*h*d),g=t.gl;g.readPixels(i.x*n,i.y*n,h,d,g.RGBA,g.UNSIGNED_BYTE,p);var v=f.context.getImageData(0,0,h,d);v.data.set(p),f.context.putImageData(v,0,0),o&&(f.context.scale(1,-1),f.context.drawImage(f.canvas,0,-d))}return c&&l.destroy(!0),f.canvas},e.prototype.pixels=function(e){var t=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0,l=!1;e&&(e instanceof a.RenderTexture?o=e:(o=this.renderer.generateTexture(e),l=!0)),o?(r=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,i=o.frame):(r=this.renderer.rootRenderTarget,n=r.resolution,i=s,i.width=r.size.width,i.height=r.size.height);var c=i.width*n,h=i.height*n,d=new Uint8Array(u*c*h);if(r){t.bindRenderTarget(r);var f=t.gl;f.readPixels(i.x*n,i.y*n,c,h,f.RGBA,f.UNSIGNED_BYTE,d)}return l&&o.destroy(!0),d},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();r.default=l,a.WebGLRenderer.registerPlugin("extract",l)},{"../../core":65}],135:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../core"),l=n(u),c=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,r[0]instanceof l.Texture?r[0]:r[0].texture));return a._textures=null,a._durations=null,a.textures=r,a._autoUpdate=n!==!1,a.animationSpeed=1,a.loop=!0,a.onComplete=null,a.onFrameChange=null,a.onLoop=null,a._currentTime=0,a.playing=!1,a}return a(t,e),t.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&l.ticker.shared.remove(this.update,this))},t.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&l.ticker.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH))},t.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){var t=this.animationSpeed*e,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=t/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},t.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},t.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t)},t.fromFrames=function(e){for(var r=[],n=0;n<e.length;++n)r.push(l.Texture.fromFrame(e[n]));return new t(r)},t.fromImages=function(e){for(var r=[],n=0;n<e.length;++n)r.push(l.Texture.fromImage(e[n]));return new t(r)},s(t,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(e){if(e[0]instanceof l.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}}]),t}(l.Sprite);r.default=c},{"../core":65}],136:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("../core"),c=i(l),h=e("../core/math/ObservablePoint"),d=n(h),f=e("../core/utils"),p=e("../core/settings"),g=n(p),v=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=a(this,e.call(this));return i._textWidth=0,i._textHeight=0,i._glyphs=[],i._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},i.font=n.font,i._text=r,i._maxWidth=0,i._maxLineHeight=0,i._letterSpacing=0,i._anchor=new d.default(function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updateText(),i}return s(t,e),t.prototype.updateText=function(){for(var e=t.fonts[this._font.name],r=this._font.size/e.size,n=new c.Point,i=[],o=[],a=this.text.replace(/(?:\r\n|\r)/g,"\n"),s=a.length,u=this._maxWidth*e.size/this._font.size,l=null,h=0,d=0,f=0,p=-1,g=0,v=0,m=0,y=0;y<s;y++){var _=a.charCodeAt(y),x=a.charAt(y);if(/(?:\s)/.test(x)&&(p=y,g=h),"\r"!==x&&"\n"!==x){var b=e.chars[_];b&&(l&&b.kerning[l]&&(n.x+=b.kerning[l]),i.push({texture:b.texture,line:f,charCode:_,position:new c.Point(n.x+b.xOffset+this._letterSpacing/2,n.y+b.yOffset)}),n.x+=b.xAdvance+this._letterSpacing,h=n.x,m=Math.max(m,b.yOffset+b.texture.height),l=_,p!==-1&&u>0&&n.x>u&&(++v,c.utils.removeItems(i,1+p-v,1+y-p),y=p,p=-1,o.push(g),d=Math.max(d,g),f++,n.x=0,n.y+=e.lineHeight,l=null))}else o.push(h),d=Math.max(d,h),++f,++v,n.x=0,n.y+=e.lineHeight,l=null}var S=a.charAt(a.length-1);"\r"!==S&&"\n"!==S&&(/(?:\s)/.test(S)&&(h=g),o.push(h),d=Math.max(d,h));for(var T=[],w=0;w<=f;w++){var E=0;"right"===this._font.align?E=d-o[w]:"center"===this._font.align&&(E=(d-o[w])/2),T.push(E)}for(var C=i.length,R=this.tint,O=0;O<C;O++){var M=this._glyphs[O];M?M.texture=i[O].texture:(M=new c.Sprite(i[O].texture),this._glyphs.push(M)),M.position.x=(i[O].position.x+T[i[O].line])*r,M.position.y=i[O].position.y*r,M.scale.x=M.scale.y=r,M.tint=R,M.parent||this.addChild(M)}for(var P=C;P<this._glyphs.length;++P)this.removeChild(this._glyphs[P]);if(this._textWidth=d*r,this._textHeight=(n.y+e.lineHeight)*r,0!==this.anchor.x||0!==this.anchor.y)for(var A=0;A<C;A++)this._glyphs[A].x-=this._textWidth*this.anchor.x,this._glyphs[A].y-=this._textHeight*this.anchor.y;this._maxLineHeight=m*r},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},t.registerFont=function(e,r){var n={},i=e.getElementsByTagName("info")[0],o=e.getElementsByTagName("common")[0],a=e.getElementsByTagName("page"),s=(0,f.getResolutionOfUrl)(a[0].getAttribute("file"),g.default.RESOLUTION),u={};n.font=i.getAttribute("face"),n.size=parseInt(i.getAttribute("size"),10),n.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/s,n.chars={},r instanceof c.Texture&&(r=[r]);for(var l=0;l<a.length;l++){var h=a[l].getAttribute("id"),d=a[l].getAttribute("file");u[h]=r instanceof Array?r[l]:r[d]}for(var p=e.getElementsByTagName("char"),v=0;v<p.length;v++){var m=p[v],y=parseInt(m.getAttribute("id"),10),_=m.getAttribute("page")||0,x=new c.Rectangle(parseInt(m.getAttribute("x"),10)/s+u[_].frame.x/s,parseInt(m.getAttribute("y"),10)/s+u[_].frame.y/s,parseInt(m.getAttribute("width"),10)/s,parseInt(m.getAttribute("height"),10)/s);n.chars[y]={xOffset:parseInt(m.getAttribute("xoffset"),10)/s,yOffset:parseInt(m.getAttribute("yoffset"),10)/s,xAdvance:parseInt(m.getAttribute("xadvance"),10)/s,kerning:{},texture:new c.Texture(u[_].baseTexture,x),page:_}}for(var b=e.getElementsByTagName("kerning"),S=0;S<b.length;S++){var T=b[S],w=parseInt(T.getAttribute("first"),10)/s,E=parseInt(T.getAttribute("second"),10)/s,C=parseInt(T.getAttribute("amount"),10)/s;n.chars[E]&&(n.chars[E].kerning[w]=C)}return t.fonts[n.font]=n,n},u(t,[{key:"tint",get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&e>=0?e:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:"font",get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=e.length>=2?parseInt(e[0],10):t.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),t}(c.Container);r.default=v,v.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("../core"),c=i(l),h=e("../core/sprites/canvas/CanvasTinter"),d=n(h),f=new c.Point,p=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;o(this,t);var s=a(this,e.call(this,r));return s.tileTransform=new c.TransformStatic,s._width=n,s._height=i,s._canvasPattern=null,s.uvTransform=r.transform||new c.TextureMatrix(r),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return s(t,e),t.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},t.prototype._renderWebGL=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var r=e.context,n=this.worldTransform,i=e.resolution,o=t.baseTexture,a=o.resolution,s=this.tilePosition.x/this.tileScale.x%t._frame.width*a,u=this.tilePosition.y/this.tileScale.y%t._frame.height*a;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var l=new c.CanvasRenderTarget(t._frame.width,t._frame.height,a);16777215!==this.tint?(this.tintedTexture=d.default.getTintedTexture(this,this.tint),l.context.drawImage(this.tintedTexture,0,0)):l.context.drawImage(o.source,-t._frame.x*a,-t._frame.y*a),this.cachedTint=this.tint,this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),e.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/a,this.tileScale.y/a);var h=this.anchor.x*-this._width,f=this.anchor.y*-this._height;this.uvRespectAnchor?(r.translate(s,u),r.fillRect(-s+h,-u+f,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a)):(r.translate(s+h,u+f),r.fillRect(-s,-u,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a))}},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,n)},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,f);var t=this._width,r=this._height,n=-t*this.anchor._x;if(f.x>=n&&f.x<n+t){var i=-r*this.anchor._y;if(f.y>=i&&f.y<i+r)return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},t.from=function(e,r,n){return new t(c.Texture.from(e),r,n)},t.fromFrame=function(e,r,n){var i=c.utils.TextureCache[e];if(!i)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new t(i,r,n)},t.fromImage=function(e,r,n,i,o){return new t(c.Texture.fromImage(e,i,o),r,n)},u(t,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),t}(c.Sprite);r.default=p},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=e("../core"),s=i(a),u=e("../core/textures/Texture"),l=n(u),c=e("../core/textures/BaseTexture"),h=n(c),d=e("../core/utils"),f=s.DisplayObject,p=new s.Matrix;f.prototype._cacheAsBitmap=!1,f.prototype._cacheData=!1;var g=function e(){o(this,e),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(f.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t=void 0;e?(this._cacheData||(this._cacheData=new g),t=this._cacheData,t.originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this._calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this._calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),f.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},f.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;r.pad(n)}var i=e._activeRenderTarget,o=e.filterManager.filterStack,a=s.RenderTexture.create(0|r.width,0|r.height),u="cacheAsBitmap_"+(0,d.uid)();this._cacheData.textureCacheId=u,h.default.addToCache(a.baseTexture,u),l.default.addToCache(a,u);var c=p;c.tx=-r.x,c.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,e.render(this,a,!0,c,!0),e.bindRenderTarget(i),e.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var f=new s.Sprite(a);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-(r.x/r.width),f.anchor.y=-(r.y/r.height),f.alpha=t,f._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},f.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(e))},f.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(),r=this.alpha;this.alpha=1;var n=e.context,i=s.RenderTexture.create(0|t.width,0|t.height),o="cacheAsBitmap_"+(0,d.uid)();this._cacheData.textureCacheId=o,h.default.addToCache(i.baseTexture,o),l.default.addToCache(i,o);var a=p;this.transform.localTransform.copy(a),a.invert(),a.tx-=t.x,a.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,i,!0,a,!1),e.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var u=new s.Sprite(i);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(t.x/t.width),u.anchor.y=-(t.y/t.height),u._bounds=this._bounds,u.alpha=r,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=u,this.containsPoint=u.containsPoint.bind(u)}},f.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},f.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},f.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,h.default.removeFromCache(this._cacheData.textureCacheId),l.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},f.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var i=e("../core"),o=n(i);o.DisplayObject.prototype.name=null,o.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null;
}},{"../core":65}],140:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var i=e("../core"),o=n(i);o.DisplayObject.prototype.getGlobalPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Point,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e}},{"../core":65}],141:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.BitmapText=r.TilingSpriteRenderer=r.TilingSprite=r.AnimatedSprite=void 0;var i=e("./AnimatedSprite");Object.defineProperty(r,"AnimatedSprite",{enumerable:!0,get:function(){return n(i).default}});var o=e("./TilingSprite");Object.defineProperty(r,"TilingSprite",{enumerable:!0,get:function(){return n(o).default}});var a=e("./webgl/TilingSpriteRenderer");Object.defineProperty(r,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(a).default}});var s=e("./BitmapText");Object.defineProperty(r,"BitmapText",{enumerable:!0,get:function(){return n(s).default}}),e("./cacheAsBitmap"),e("./getChildByName"),e("./getGlobalPosition")},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../core"),u=n(s),l=e("../../core/const"),c=(e("path"),new u.Matrix),h=function(e){function t(r){i(this,t);var n=o(this,e.call(this,r));return n.shader=null,n.simpleShader=null,n.quad=null,n}return a(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new u.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new u.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new u.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},t.prototype.render=function(e){var t=this.renderer,r=this.quad;t.bindVao(r.vao);var n=r.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&(n=r.uvs,n[0]=n[6]=-e.anchor.x,n[1]=n[3]=-e.anchor.y,n[2]=n[4]=1-e.anchor.x,n[5]=n[7]=1-e.anchor.y),r.upload();var i=e._texture,o=i.baseTexture,a=e.tileTransform.localTransform,s=e.uvTransform,h=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;h&&(o._glTextures[t.CONTEXT_UID]?h=o.wrapMode!==l.WRAP_MODES.CLAMP:o.wrapMode===l.WRAP_MODES.CLAMP&&(o.wrapMode=l.WRAP_MODES.REPEAT));var d=h?this.simpleShader:this.shader;t.bindShader(d);var f=i.width,p=i.height,g=e._width,v=e._height;c.set(a.a*f/g,a.b*f/v,a.c*p/g,a.d*p/v,a.tx/g,a.ty/v),c.invert(),h?c.prepend(s.mapCoord):(d.uniforms.uMapCoord=s.mapCoord.toArray(!0),d.uniforms.uClampFrame=s.uClampFrame,d.uniforms.uClampOffset=s.uClampOffset),d.uniforms.uTransform=c.toArray(!0),d.uniforms.uColor=u.utils.premultiplyTintToRgba(e.tint,e.worldAlpha,d.uniforms.uColor,o.premultipliedAlpha),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=t.bindTexture(i),t.setBlendMode(u.utils.correctBlendMode(e.blendMode,o.premultipliedAlpha)),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},t}(u.ObjectRenderer);r.default=h,u.WebGLRenderer.registerPlugin("tilingSprite",h)},{"../../core":65,"../../core/const":46,path:8}],143:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../../core"),l=n(u),c=(e("path"),function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;i(this,t);var n=o(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return n.alpha=r,n.glShaderKey="alpha",n}return a(t,e),s(t,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(l.Filter));r.default=c},{"../../core":65,path:8}],144:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("../../core"),c=i(l),h=e("./BlurXFilter"),d=n(h),f=e("./BlurYFilter"),p=n(f),g=function(e){function t(r,n,i,s){o(this,t);var u=a(this,e.call(this));return u.blurXFilter=new d.default(r,n,i,s),u.blurYFilter=new p.default(r,n,i,s),u.padding=0,u.resolution=i||c.settings.RESOLUTION,u.quality=n||4,u.blur=r||8,u}return s(t,e),t.prototype.apply=function(e,t,r){var n=e.getRenderTarget(!0);this.blurXFilter.apply(e,t,n,!0),this.blurYFilter.apply(e,n,r,!1),e.returnRenderTarget(n)},u(t,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(e){this.blurYFilter._blendMode=e}}]),t}(c.Filter);r.default=g},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("../../core"),c=i(l),h=e("./generateBlurVertSource"),d=n(h),f=e("./generateBlurFragSource"),p=n(f),g=e("./getMaxBlurKernelSize"),v=n(g),m=function(e){function t(r,n,i,s){o(this,t),s=s||5;var u=(0,d.default)(s,!0),l=(0,p.default)(s),h=a(this,e.call(this,u,l));return h.resolution=i||c.settings.RESOLUTION,h._quality=0,h.quality=n||4,h.strength=r||8,h.firstRun=!0,h}return s(t,e),t.prototype.apply=function(e,t,r,n){if(this.firstRun){var i=e.renderer.gl,o=(0,v.default)(i);this.vertexSrc=(0,d.default)(o,!0),this.fragmentSrc=(0,p.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,n);else{for(var a=e.getRenderTarget(!0),s=t,u=a,l=0;l<this.passes-1;l++){e.applyFilter(this,s,u,!0);var c=u;u=s,s=c}e.applyFilter(this,s,r,n),e.returnRenderTarget(a)}},u(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(c.Filter);r.default=m},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("../../core"),c=i(l),h=e("./generateBlurVertSource"),d=n(h),f=e("./generateBlurFragSource"),p=n(f),g=e("./getMaxBlurKernelSize"),v=n(g),m=function(e){function t(r,n,i,s){o(this,t),s=s||5;var u=(0,d.default)(s,!1),l=(0,p.default)(s),h=a(this,e.call(this,u,l));return h.resolution=i||c.settings.RESOLUTION,h._quality=0,h.quality=n||4,h.strength=r||8,h.firstRun=!0,h}return s(t,e),t.prototype.apply=function(e,t,r,n){if(this.firstRun){var i=e.renderer.gl,o=(0,v.default)(i);this.vertexSrc=(0,d.default)(o,!1),this.fragmentSrc=(0,p.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,n);else{for(var a=e.getRenderTarget(!0),s=t,u=a,l=0;l<this.passes-1;l++){e.applyFilter(this,s,u,!0);var c=u;u=s,s=c}e.applyFilter(this,s,r,n),e.returnRenderTarget(a)}},u(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(c.Filter);r.default=m},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(e,t,r){"use strict";function n(e){for(var t=i[e],r=t.length,n=o,a="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",u=void 0,l=0;l<e;l++){var c=s.replace("%index%",l);u=l,l>=r&&(u=e-l-1),c=c.replace("%value%",t[u]),a+=c,a+="\n"}return n=n.replace("%blur%",a),n=n.replace("%size%",e)}r.__esModule=!0,r.default=n;var i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},o=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],148:[function(e,t,r){"use strict";function n(e,t){var r=Math.ceil(e/2),n=i,o="",a=void 0;a=t?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<e;s++){var u=a.replace("%index%",s);u=u.replace("%sampleIndex%",s-(r-1)+".0"),o+=u,o+="\n"}return n=n.replace("%blur%",o),n=n.replace("%size%",e)}r.__esModule=!0,r.default=n;var i=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],149:[function(e,t,r){"use strict";function n(e){for(var t=e.getParameter(e.MAX_VARYING_VECTORS),r=15;r>t;)r-=2;return r}r.__esModule=!0,r.default=n},{}],150:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../../core"),l=n(u),c=(e("path"),function(e){function t(){i(this,t);var r=o(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return r.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r.alpha=1,r}return a(t,e),t.prototype._loadMatrix=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r},t.prototype._multiply=function(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e},t.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(e,t){var r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},t.prototype.greyscale=function(e,t){var r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},t.prototype.blackAndWhite=function(e){var t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var r=Math.cos(e),n=Math.sin(e),i=Math.sqrt,o=1/3,a=i(o),s=r+(1-r)*o,u=o*(1-r)-a*n,l=o*(1-r)+a*n,c=o*(1-r)+a*n,h=r+o*(1-r),d=o*(1-r)-a*n,f=o*(1-r)-a*n,p=o*(1-r)+a*n,g=r+o*(1-r),v=[s,u,l,0,0,c,h,d,0,0,f,p,g,0,0,0,0,0,1,0];this._loadMatrix(v,t)},t.prototype.contrast=function(e,t){var r=(e||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.saturate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=2*e/3+1,n=(r-1)*-.5,i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){var t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.sepia=function(e){var t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.technicolor=function(e){var t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.polaroid=function(e){var t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.toBGR=function(e){var t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.kodachrome=function(e){var t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.browni=function(e){var t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.vintage=function(e){var t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.colorTone=function(e,t,r,n,i){e=e||.2,t=t||.15,r=r||16770432,n=n||3375104;var o=(r>>16&255)/255,a=(r>>8&255)/255,s=(255&r)/255,u=(n>>16&255)/255,l=(n>>8&255)/255,c=(255&n)/255,h=[.3,.59,.11,0,0,o,a,s,e,0,u,l,c,t,0,o-u,a-l,s-c,0,0];this._loadMatrix(h,i)},t.prototype.night=function(e,t){e=e||.1;var r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},t.prototype.predator=function(e,t){var r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)},t.prototype.lsd=function(e){var t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},s(t,[{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(l.Filter));r.default=c,c.prototype.grayscale=c.prototype.greyscale},{"../../core":65,path:8}],151:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../../core"),l=n(u),c=(e("path"),function(e){function t(r,n){i(this,t);var a=new l.Matrix;r.renderable=!1;var s=o(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=r,s.maskMatrix=a,s.uniforms.mapSampler=r._texture,s.uniforms.filterMatrix=a,s.uniforms.scale={x:1,y:1},null!==n&&void 0!==n||(n=20),s.scale=new l.Point(n,n),s}return a(t,e),t.prototype.apply=function(e,t,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,e.applyFilter(this,t,r)},s(t,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),t}(l.Filter));r.default=c},{"../../core":65,path:8}],152:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../core"),u=n(s),l=(e("path"),function(e){function t(){return i(this,t),o(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'));
}return a(t,e),t}(u.Filter));r.default=l},{"../../core":65,path:8}],153:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./fxaa/FXAAFilter");Object.defineProperty(r,"FXAAFilter",{enumerable:!0,get:function(){return n(i).default}});var o=e("./noise/NoiseFilter");Object.defineProperty(r,"NoiseFilter",{enumerable:!0,get:function(){return n(o).default}});var a=e("./displacement/DisplacementFilter");Object.defineProperty(r,"DisplacementFilter",{enumerable:!0,get:function(){return n(a).default}});var s=e("./blur/BlurFilter");Object.defineProperty(r,"BlurFilter",{enumerable:!0,get:function(){return n(s).default}});var u=e("./blur/BlurXFilter");Object.defineProperty(r,"BlurXFilter",{enumerable:!0,get:function(){return n(u).default}});var l=e("./blur/BlurYFilter");Object.defineProperty(r,"BlurYFilter",{enumerable:!0,get:function(){return n(l).default}});var c=e("./colormatrix/ColorMatrixFilter");Object.defineProperty(r,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(c).default}});var h=e("./alpha/AlphaFilter");Object.defineProperty(r,"AlphaFilter",{enumerable:!0,get:function(){return n(h).default}})},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../../core"),l=n(u),c=(e("path"),function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();i(this,t);var a=o(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return a.noise=r,a.seed=n,a}return a(t,e),s(t,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),t}(l.Filter));r.default=c},{"../../core":65,path:8}],155:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../core"),s=n(a),u=function(){function e(){i(this,e),this.global=new s.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return e.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},e.prototype.copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=Number.isInteger(e.buttons)?e.buttons:e.which,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},o(e,[{key:"pointerId",get:function(){return this.identifier}}]),e}();r.default=u},{"../core":65}],156:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(){n(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0},e.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},e}();r.default=i},{}],157:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=e("../core"),c=i(l),h=e("./InteractionData"),d=n(h),f=e("./InteractionEvent"),p=n(f),g=e("./InteractionTrackingData"),v=n(g),m=e("eventemitter3"),y=n(m),_=e("./interactiveTarget"),x=n(_);c.utils.mixins.delayMixin(c.DisplayObject.prototype,x.default);var b=1,S={target:null,data:{global:null}},T=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this));return n=n||{},i.renderer=r,i.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new d.default,i.mouse.identifier=b,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[b]=i.mouse,i.interactionDataPool=[],i.eventData=new p.default,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i._tempPoint=new c.Point,i.resolution=1,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return s(t,e),t.prototype.hitTest=function(e,t){return S.target=null,S.data.global=e,t||(t=this.renderer._lastObjectRendered),this.processInteractive(S,t,null,!0),S.target},t.prototype.setTargetElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents()},t.prototype.addEvents=function(){this.interactionDOMElement&&(c.ticker.shared.add(this.update,this,c.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.interactionDOMElement&&(c.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.update=function(e){if(this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&"touch"!==r.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch("undefined"==typeof t?"undefined":u(t)){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,r){r.stopped||(r.currentTarget=e,r.type=t,e.emit(t,r),e[t]&&e[t](r))},t.prototype.mapPositionToPoint=function(e,t,r){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=navigator.isCocoonJS?this.resolution:1/this.resolution;e.x=(t-n.left)*(this.interactionDOMElement.width/n.width)*i,e.y=(r-n.top)*(this.interactionDOMElement.height/n.height)*i},t.prototype.processInteractive=function(e,t,r,n,i){if(!t||!t.visible)return!1;var o=e.data.global;i=t.interactive||i;var a=!1,s=i,u=!0;if(t.hitArea?(n&&(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(n=!1,u=!1)),s=!1):t._mask&&n&&(t._mask.containsPoint(o)||(n=!1,u=!1)),u&&t.interactiveChildren&&t.children)for(var l=t.children,c=l.length-1;c>=0;c--){var h=l[c],d=this.processInteractive(e,h,r,n,s);if(d){if(!h.parent)continue;s=!1,d&&(e.target&&(n=!1),a=!0)}}return i&&(n&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(o)&&(a=!0),t.interactive&&(a&&!e.target&&(e.target=t),r&&r(e,t,!!a))),a},t.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&e.preventDefault();for(var r=t.length,n=0;n<r;n++){var i=t[n],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(a.data.originalEvent=e,this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===i.pointerType)this.emit("touchstart",a);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,t,r){var n=e.data,i=e.data.identifier;if(r)if(t.trackedPointers[i]||(t.trackedPointers[i]=new v.default(i)),this.dispatchEvent(t,"pointerdown",e),"touch"===n.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?t.trackedPointers[i].rightDown=!0:t.trackedPointers[i].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},t.prototype.onPointerComplete=function(e,t,r){for(var n=this.normalizeToPointerData(e),i=n.length,o=e.target!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var s=n[a],u=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(l.data.originalEvent=e,this.processInteractive(l,this.renderer._lastObjectRendered,r,t||!o),this.emit(t?"pointercancel":"pointerup"+o,l),"mouse"===s.pointerType||"pen"===s.pointerType){var c=2===s.button;this.emit(c?"rightup"+o:"mouseup"+o,l)}else"touch"===s.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(s.pointerId,u))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var r=e.data,n=e.data.identifier;void 0!==t.trackedPointers[n]&&(delete t.trackedPointers[n],this.dispatchEvent(t,"pointercancel",e),"touch"===r.pointerType&&this.dispatchEvent(t,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,r){var n=e.data,i=e.data.identifier,o=t.trackedPointers[i],a="touch"===n.pointerType,s="mouse"===n.pointerType||"pen"===n.pointerType,u=!1;if(s){var l=2===n.button,c=v.default.FLAGS,h=l?c.RIGHT_DOWN:c.LEFT_DOWN,d=void 0!==o&&o.flags&h;r?(this.dispatchEvent(t,l?"rightup":"mouseup",e),d&&(this.dispatchEvent(t,l?"rightclick":"click",e),u=!0)):d&&this.dispatchEvent(t,l?"rightupoutside":"mouseupoutside",e),o&&(l?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(t,"pointerup",e),a&&this.dispatchEvent(t,"touchend",e),o&&(s&&!u||this.dispatchEvent(t,"pointertap",e),a&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),a&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[i]},t.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"!==t[0].pointerType&&"pen"!==t[0].pointerType||(this.didMove=!0,this.cursor=null);for(var r=t.length,n=0;n<r;n++){var i=t[n],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=e;var s="touch"!==i.pointerType||this.moveWhenInside;this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",a)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,r){var n=e.data,i="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(e,t,r),this.moveWhenInside&&!r||(this.dispatchEvent(t,"pointermove",e),i&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e),r=t[0];"mouse"===r.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(r),i=this.configureInteractionEventForDOMEvent(this.eventData,r,n);i.data.originalEvent=r,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===r.pointerType||"pen"===r.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(n.identifier)}},t.prototype.processPointerOverOut=function(e,t,r){var n=e.data,i=e.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,a=t.trackedPointers[i];r&&!a&&(a=t.trackedPointers[i]=new v.default(i)),void 0!==a&&(r&&this.mouseOverRenderer?(a.over||(a.over=!0,this.dispatchEvent(t,"pointerover",e),o&&this.dispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):a.over&&(a.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),a.none&&delete t.trackedPointers[i]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e),r=t[0],n=this.getInteractionDataForPointerId(r),i=this.configureInteractionEventForDOMEvent(this.eventData,r,n);i.data.originalEvent=r,"mouse"===r.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mouseover",i)},t.prototype.getInteractionDataForPointerId=function(e){var t=e.pointerId,r=void 0;return t===b||"mouse"===e.pointerType?r=this.mouse:this.activeInteractionData[t]?r=this.activeInteractionData[t]:(r=this.interactionDataPool.pop()||new d.default,r.identifier=t,this.activeInteractionData[t]=r),r.copyEvent(e),r},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,r){return e.data=r,this.mapPositionToPoint(r.global,t.clientX,t.clientY),navigator.isCocoonJS&&"touch"===t.pointerType&&(r.global.x=r.global.x/this.resolution,r.global.y=r.global.y/this.resolution),"touch"===t.pointerType&&(t.globalX=r.global.x,t.globalY=r.global.y),r.originalEvent=t,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var r=0,n=e.changedTouches.length;r<n;r++){var i=e.changedTouches[r];"undefined"==typeof i.button&&(i.button=e.touches.length?1:0),"undefined"==typeof i.buttons&&(i.buttons=e.touches.length?1:0),"undefined"==typeof i.isPrimary&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),"undefined"==typeof i.width&&(i.width=i.radiusX||1),"undefined"==typeof i.height&&(i.height=i.radiusY||1),"undefined"==typeof i.tiltX&&(i.tiltX=0),"undefined"==typeof i.tiltY&&(i.tiltY=0),"undefined"==typeof i.pointerType&&(i.pointerType="touch"),"undefined"==typeof i.pointerId&&(i.pointerId=i.identifier||0),"undefined"==typeof i.pressure&&(i.pressure=i.force||.5),i.twist=0,i.tangentialPressure=0,"undefined"==typeof i.layerX&&(i.layerX=i.offsetX=i.clientX),"undefined"==typeof i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,t.push(i)}else!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent?t.push(e):("undefined"==typeof e.isPrimary&&(e.isPrimary=!0),"undefined"==typeof e.width&&(e.width=1),"undefined"==typeof e.height&&(e.height=1),"undefined"==typeof e.tiltX&&(e.tiltX=0),"undefined"==typeof e.tiltY&&(e.tiltY=0),"undefined"==typeof e.pointerType&&(e.pointerType="mouse"),"undefined"==typeof e.pointerId&&(e.pointerId=b),"undefined"==typeof e.pressure&&(e.pressure=.5),e.twist=0,e.tangentialPressure=0,e.isNormalized=!0,t.push(e));return t},t.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},t}(y.default);r.default=T,c.WebGLRenderer.registerPlugin("interaction",T),c.CanvasRenderer.registerPlugin("interaction",T)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){t?this._flags=this._flags|e:this._flags=this._flags&~e},i(e,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(e){this._flags=e}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!==(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:"rightDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:"leftDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),e}();r.default=o,o.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./InteractionData");Object.defineProperty(r,"InteractionData",{enumerable:!0,get:function(){return n(i).default}});var o=e("./InteractionManager");Object.defineProperty(r,"InteractionManager",{enumerable:!0,get:function(){return n(o).default}});var a=e("./interactiveTarget");Object.defineProperty(r,"interactiveTarget",{enumerable:!0,get:function(){return n(a).default}});var s=e("./InteractionTrackingData");Object.defineProperty(r,"InteractionTrackingData",{enumerable:!0,get:function(){return n(s).default}});var u=e("./InteractionEvent");Object.defineProperty(r,"InteractionEvent",{enumerable:!0,get:function(){return n(u).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(e,t,r){"use strict";r.__esModule=!0,r.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){e.bitmapFont=u.BitmapText.registerFont(e.data,t)}r.__esModule=!0,r.parse=i,r.default=function(){return function(e,t){if(!e.data||e.type!==s.Resource.TYPE.XML)return void t();if(0===e.data.getElementsByTagName("page").length||0===e.data.getElementsByTagName("info").length||null===e.data.getElementsByTagName("info")[0].getAttribute("face"))return void t();var r=e.isDataUrl?"":a.dirname(e.url);e.isDataUrl&&("."===r&&(r=""),this.baseUrl&&r&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/")),r=r.replace(this.baseUrl,""),r&&"/"!==r.charAt(r.length-1)&&(r+="/");for(var n=e.data.getElementsByTagName("page"),o={},u=function(r){o[r.metadata.pageFile]=r.texture,Object.keys(o).length===n.length&&(i(e,o),t())},l=0;l<n.length;++l){var c=n[l].getAttribute("file"),h=r+c,d=!1;for(var f in this.resources){var p=this.resources[f];if(p.url===h){p.metadata.pageFile=c,p.texture?u(p):p.onAfterMiddleware.add(u),d=!0;break}}if(!d){var g={crossOrigin:e.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},e.metadata.imageMetadata),parentResource:e};this.add(h,g,u)}}}};var o=e("path"),a=n(o),s=e("resource-loader"),u=e("../extras")},{"../extras":141,path:8,"resource-loader":36}],162:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.shared=r.Resource=r.textureParser=r.getResourcePath=r.spritesheetParser=r.parseBitmapFontData=r.bitmapFontParser=r.Loader=void 0;var i=e("./bitmapFontParser");Object.defineProperty(r,"bitmapFontParser",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(r,"parseBitmapFontData",{enumerable:!0,get:function(){return i.parse}});var o=e("./spritesheetParser");Object.defineProperty(r,"spritesheetParser",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(r,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var a=e("./textureParser");Object.defineProperty(r,"textureParser",{enumerable:!0,get:function(){return n(a).default}});var s=e("resource-loader");Object.defineProperty(r,"Resource",{enumerable:!0,get:function(){return s.Resource}});var u=e("../core/Application"),l=n(u),c=e("./loader"),h=n(c);r.Loader=h.default;var d=new h.default;d.destroy=function(){},r.shared=d;var f=l.default.prototype;f._loader=null,Object.defineProperty(f,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?d:new h.default}return this._loader}}),f._parentDestroy=f.destroy,f.destroy=function(e,t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e,t)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("resource-loader"),u=n(s),l=e("resource-loader/lib/middlewares/parsing/blob"),c=e("eventemitter3"),h=n(c),d=e("./textureParser"),f=n(d),p=e("./spritesheetParser"),g=n(p),v=e("./bitmapFontParser"),m=n(v),y=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,r,n));h.default.call(a);for(var s=0;s<t._pixiMiddleware.length;++s)a.use(t._pixiMiddleware[s]());return a.onStart.add(function(e){return a.emit("start",e)}),a.onProgress.add(function(e,t){return a.emit("progress",e,t)}),a.onError.add(function(e,t,r){return a.emit("error",e,t,r)}),a.onLoad.add(function(e,t){return a.emit("load",e,t)}),a.onComplete.add(function(e,t){return a.emit("complete",e,t)}),a}return a(t,e),t.addPixiMiddleware=function(e){t._pixiMiddleware.push(e)},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(u.default);r.default=y;for(var _ in h.default.prototype)y.prototype[_]=h.default.prototype[_];y._pixiMiddleware=[l.blobMiddlewareFactory,f.default,g.default,m.default];var x=u.default.Resource;x.setExtensionXhrType("fnt",x.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return e.isDataUrl?e.data.meta.image:s.default.resolve(e.url.replace(t,""),e.data.meta.image)}r.__esModule=!0,r.default=function(){return function(e,t){var r=e.name+"_image";if(!e.data||e.type!==o.Resource.TYPE.JSON||!e.data.frames||this.resources[r])return void t();var n={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},a=i(e,this.baseUrl);this.add(r,a,n,function(r){if(r.error)return void t(r.error);var n=new u.Spritesheet(r.texture.baseTexture,e.data,e.url);n.parse(function(){e.spritesheet=n,e.textures=n.textures,t()})})}},r.getResourcePath=i;var o=e("resource-loader"),a=e("url"),s=n(a),u=e("../core")},{"../core":65,"resource-loader":36,url:38}],165:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.default=function(){return function(e,t){e.data&&e.type===i.Resource.TYPE.IMAGE&&(e.texture=a.default.fromLoader(e.data,e.url,e.name)),t()}};var i=e("resource-loader"),o=e("../core/textures/Texture"),a=n(o)},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("../core"),c=i(l),h=e("../core/textures/Texture"),d=n(h),f=new c.Point,p=new c.Polygon,g=function(e){function t(r,n,i,s,u){o(this,t);var l=a(this,e.call(this));return l._texture=r||d.default.EMPTY,l.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),l.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),l.indices=s||new Uint16Array([0,1,3,2]),l.dirty=0,l.indexDirty=0,l.vertexDirty=0,l.autoUpdate=!0,l.blendMode=c.BLEND_MODES.NORMAL,l.canvasPadding=c.settings.MESH_CANVAS_PADDING,l.drawMode=u||t.DRAW_MODES.TRIANGLE_MESH,l.shader=null,l.tintRgb=new Float32Array([1,1,1]),l._glDatas={},l._uvTransform=new c.TextureMatrix(l._texture),l.uploadUvTransform=!1,l.pluginName="mesh",l}return s(t,e),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,f);for(var r=this.vertices,n=p.points,i=this.indices,o=this.indices.length,a=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,s=0;s+2<o;s+=a){var u=2*i[s],l=2*i[s+1],c=2*i[s+2];if(n[0]=r[u],n[1]=r[u+1],n[2]=r[l],n[3]=r[l+1],n[4]=r[c],n[5]=r[c+1],p.contains(f.x,f.y))return!0}return!1},t.prototype.destroy=function(t){for(var r in this._glDatas){var n=this._glDatas[r];n.destroy?n.destroy():(n.vertexBuffer&&(n.vertexBuffer.destroy(),n.vertexBuffer=null),n.indexBuffer&&(n.indexBuffer.destroy(),n.indexBuffer=null),n.uvBuffer&&(n.uvBuffer.destroy(),n.uvBuffer=null),n.vao&&(n.vao.destroy(),n.vao=null))}this._glDatas=null,e.prototype.destroy.call(this,t)},u(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return c.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=c.utils.hex2rgb(e,this.tintRgb)}}]),t}(c.Container);r.default=g,g.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./Plane"),l=n(u),c=10,h=function(e){function t(r,n,a,s,u){i(this,t);var l=o(this,e.call(this,r,4,4));return l._origWidth=r.orig.width,l._origHeight=r.orig.height,l._width=l._origWidth,l._height=l._origHeight,l._leftWidth="undefined"!=typeof n?n:c,l._rightWidth="undefined"!=typeof s?s:c,l._topHeight="undefined"!=typeof a?a:c,l._bottomHeight="undefined"!=typeof u?u:c,l.refresh(!0),l}return a(t,e),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,t=this._topHeight+this._bottomHeight,r=this._height>t?1:this._height/t;e[9]=e[11]=e[13]=e[15]=this._topHeight*r,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*r,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,t=this._leftWidth+this._rightWidth,r=this._width>t?1:this._width/t;e[2]=e[10]=e[18]=e[26]=this._leftWidth*r,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*r,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._renderCanvas=function(e){var t=e.context;t.globalAlpha=this.worldAlpha,e.setBlendMode(this.blendMode);var r=this.worldTransform,n=e.resolution;e.roundPixels?t.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):t.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n);var i=this._texture.baseTexture,o=i.source,a=i.width*i.resolution,s=i.height*i.resolution;this.drawSegment(t,o,a,s,0,1,10,11),this.drawSegment(t,o,a,s,2,3,12,13),this.drawSegment(t,o,a,s,4,5,14,15),this.drawSegment(t,o,a,s,8,9,18,19),this.drawSegment(t,o,a,s,10,11,20,21),this.drawSegment(t,o,a,s,12,13,22,23),this.drawSegment(t,o,a,s,16,17,26,27),this.drawSegment(t,o,a,s,18,19,28,29),this.drawSegment(t,o,a,s,20,21,30,31)},t.prototype.drawSegment=function(e,t,r,n,i,o,a,s){var u=this.uvs,l=this.vertices,c=(u[a]-u[i])*r,h=(u[s]-u[o])*n,d=l[a]-l[i],f=l[s]-l[o];c<1&&(c=1),h<1&&(h=1),d<1&&(d=1),f<1&&(f=1),e.drawImage(t,u[i]*r,u[o]*n,c,h,l[i],l[o],d,f)},t.prototype._refresh=function(){e.prototype._refresh.call(this);var t=this.uvs,r=this._texture;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var n=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},s(t,[{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),t}(l.default);r.default=h},{"./Plane":168}],168:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./Mesh"),u=n(s),l=function(e){function t(r,n,a){i(this,t);var s=o(this,e.call(this,r));return s._ready=!0,s.verticesX=n||10,s.verticesY=a||10,s.drawMode=u.default.DRAW_MODES.TRIANGLES,s.refresh(),s}return a(t,e),t.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,r=[],n=[],i=[],o=[],a=this.verticesX-1,s=this.verticesY-1,u=e.width/a,l=e.height/s,c=0;c<t;c++){var h=c%this.verticesX,d=c/this.verticesX|0;r.push(h*u,d*l),i.push(h/a,d/s)}for(var f=a*s,p=0;p<f;p++){var g=p%a,v=p/a|0,m=v*this.verticesX+g,y=v*this.verticesX+g+1,_=(v+1)*this.verticesX+g,x=(v+1)*this.verticesX+g+1;o.push(m,y,_),o.push(y,x,_)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(i),this.colors=new Float32Array(n),this.indices=new Uint16Array(o),this.dirty++,this.indexDirty++,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){u.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(u.default);r.default=l},{"./Mesh":166}],169:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./Mesh"),u=n(s),l=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,r));return a.points=n,a.vertices=new Float32Array(4*n.length),a.uvs=new Float32Array(4*n.length),a.colors=new Float32Array(2*n.length),a.indices=new Uint16Array(2*n.length),a.autoUpdate=!0,a.refresh(),a}return a(t,e),t.prototype._refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,r=this.indices,n=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var i=e.length,o=1;o<i;o++){var a=4*o,s=o/(i-1);t[a]=s,t[a+1]=0,t[a+2]=s,t[a+3]=1,a=2*o,n[a]=1,n[a+1]=1,a=2*o,r[a]=a,r[a+1]=a+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},t.prototype.refreshVertices=function(){var e=this.points;if(!(e.length<1))for(var t=e[0],r=void 0,n=0,i=0,o=this.vertices,a=e.length,s=0;s<a;s++){var u=e[s],l=4*s;r=s<e.length-1?e[s+1]:u,i=-(r.x-t.x),n=r.y-t.y;var c=10*(1-s/(a-1));c>1&&(c=1);var h=Math.sqrt(n*n+i*i),d=this._texture.height/2;n/=h,i/=h,n*=d,i*=d,o[l]=u.x+n,o[l+1]=u.y+i,o[l+2]=u.x-n,o[l+3]=u.y-i,t=u}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},t}(u.default);r.default=l},{"./Mesh":166}],170:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=e("../../core"),s=i(a),u=e("../Mesh"),l=n(u),c=function(){function e(t){o(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,r=t.context,n=e.worldTransform,i=t.resolution;t.roundPixels?r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.context.globalAlpha=e.worldAlpha,t.setBlendMode(e.blendMode),e.drawMode===l.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},e.prototype._renderTriangleMesh=function(e){for(var t=e.vertices.length/2,r=0;r<t-2;r++){var n=2*r;this._renderDrawTriangle(e,n,n+2,n+4)}},e.prototype._renderTriangles=function(e){for(var t=e.indices,r=t.length,n=0;n<r;n+=3){var i=2*t[n],o=2*t[n+1],a=2*t[n+2];this._renderDrawTriangle(e,i,o,a)}},e.prototype._renderDrawTriangle=function(e,t,r,n){var i=this.renderer.context,o=e.uvs,a=e.vertices,s=e._texture;if(s.valid){var u=s.baseTexture,l=u.source,c=u.width,h=u.height,d=void 0,f=void 0,p=void 0,g=void 0,v=void 0,m=void 0;if(e.uploadUvTransform){var y=e._uvTransform.mapCoord;d=(o[t]*y.a+o[t+1]*y.c+y.tx)*u.width,f=(o[r]*y.a+o[r+1]*y.c+y.tx)*u.width,p=(o[n]*y.a+o[n+1]*y.c+y.tx)*u.width,g=(o[t]*y.b+o[t+1]*y.d+y.ty)*u.height,v=(o[r]*y.b+o[r+1]*y.d+y.ty)*u.height,m=(o[n]*y.b+o[n+1]*y.d+y.ty)*u.height}else d=o[t]*u.width,f=o[r]*u.width,p=o[n]*u.width,g=o[t+1]*u.height,v=o[r+1]*u.height,m=o[n+1]*u.height;var _=a[t],x=a[r],b=a[n],S=a[t+1],T=a[r+1],w=a[n+1],E=e.canvasPadding/this.renderer.resolution;if(E>0){var C=E/Math.abs(e.worldTransform.a),R=E/Math.abs(e.worldTransform.d),O=(_+x+b)/3,M=(S+T+w)/3,P=_-O,A=S-M,I=Math.sqrt(P*P+A*A);_=O+P/I*(I+C),S=M+A/I*(I+R),P=x-O,A=T-M,I=Math.sqrt(P*P+A*A),x=O+P/I*(I+C),T=M+A/I*(I+R),P=b-O,A=w-M,I=Math.sqrt(P*P+A*A),b=O+P/I*(I+C),w=M+A/I*(I+R)}i.save(),i.beginPath(),i.moveTo(_,S),i.lineTo(x,T),i.lineTo(b,w),i.closePath(),i.clip();var D=d*v+g*p+f*m-v*p-g*f-d*m,k=_*v+g*b+x*m-v*b-g*x-_*m,F=d*x+_*p+f*b-x*p-_*f-d*b,L=d*v*b+g*x*p+_*f*m-_*v*p-g*f*b-d*x*m,B=S*v+g*w+T*m-v*w-g*T-S*m,N=d*T+S*p+f*w-T*p-S*f-d*w,X=d*v*w+g*T*p+S*f*m-S*v*p-g*f*w-d*T*m;i.transform(k/D,B/D,F/D,N/D,L/D,X/D),i.drawImage(l,0,0,c*u.resolution,h*u.resolution,0,0,c,h),i.restore(),this.renderer.invalidateBlendMode()}},e.prototype.renderMeshFlat=function(e){var t=this.renderer.context,r=e.vertices,n=r.length/2;t.beginPath();for(var i=1;i<n-2;++i){var o=2*i,a=r[o],s=r[o+1],u=r[o+2],l=r[o+3],c=r[o+4],h=r[o+5];t.moveTo(a,s),t.lineTo(u,l),t.lineTo(c,h)}t.fillStyle="#FF0000",t.fill(),t.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();r.default=c,s.CanvasRenderer.registerPlugin("mesh",c)},{"../../core":65,"../Mesh":166}],171:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./Mesh");Object.defineProperty(r,"Mesh",{enumerable:!0,get:function(){return n(i).default}});var o=e("./webgl/MeshRenderer");Object.defineProperty(r,"MeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var a=e("./canvas/CanvasMeshRenderer");Object.defineProperty(r,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(a).default}});var s=e("./Plane");Object.defineProperty(r,"Plane",{enumerable:!0,get:function(){return n(s).default}});var u=e("./NineSlicePlane");Object.defineProperty(r,"NineSlicePlane",{enumerable:!0,get:function(){return n(u).default}});var l=e("./Rope");Object.defineProperty(r,"Rope",{enumerable:!0,get:function(){return n(l).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../core"),l=i(u),c=e("pixi-gl-core"),h=n(c),d=e("../Mesh"),f=n(d),p=(e("path"),l.Matrix.IDENTITY),g=function(e){function t(r){o(this,t);var n=a(this,e.call(this,r));return n.shader=null,n}return s(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new l.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},t.prototype.render=function(e){var t=this.renderer,r=t.gl,n=e._texture;if(n.valid){var i=e._glDatas[t.CONTEXT_UID];i||(t.bindVao(null),i={shader:this.shader,vertexBuffer:h.default.GLBuffer.createVertexBuffer(r,e.vertices,r.STREAM_DRAW),uvBuffer:h.default.GLBuffer.createVertexBuffer(r,e.uvs,r.STREAM_DRAW),indexBuffer:h.default.GLBuffer.createIndexBuffer(r,e.indices,r.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty,vertexDirty:e.vertexDirty},i.vao=new h.default.VertexArrayObject(r).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),e._glDatas[t.CONTEXT_UID]=i),t.bindVao(i.vao),e.dirty!==i.dirty&&(i.dirty=e.dirty,i.uvBuffer.upload(e.uvs)),e.indexDirty!==i.indexDirty&&(i.indexDirty=e.indexDirty,i.indexBuffer.upload(e.indices)),e.vertexDirty!==i.vertexDirty&&(i.vertexDirty=e.vertexDirty,i.vertexBuffer.upload(e.vertices)),t.bindShader(i.shader),i.shader.uniforms.uSampler=t.bindTexture(n),t.state.setBlendMode(l.utils.correctBlendMode(e.blendMode,n.baseTexture.premultipliedAlpha)),i.shader.uniforms.uTransform&&(e.uploadUvTransform?i.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):i.shader.uniforms.uTransform=p.toArray(!0)),i.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),i.shader.uniforms.uColor=l.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,i.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var o=e.drawMode===f.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;i.vao.draw(o,e.indices.length,0)}},t}(l.ObjectRenderer);r.default=g,l.WebGLRenderer.registerPlugin("mesh",g)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../core"),l=n(u),c=e("../core/utils"),h=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,n=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i(this,t);var u=o(this,e.call(this)),c=16384;return a>c&&(a=c),a>r&&(a=r),u._properties=[!1,!0,!1,!1,!1],u._maxSize=r,u._batchSize=a,u._glBuffers={},u._bufferUpdateIDs=[],u._updateID=0,u.interactiveChildren=!1,u.blendMode=l.BLEND_MODES.NORMAL,u.autoResize=s,u.roundPixels=!0,u.baseTexture=null,u.setProperties(n),u._tint=0,u.tintRgb=new Float32Array(4),u.tint=16777215,u}return a(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,r=this.worldTransform,n=!0,i=0,o=0,a=0,s=0;e.setBlendMode(this.blendMode),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var l=this.children[u];if(l.visible){var c=l._texture.frame;if(t.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)===0)n&&(t.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution,r.ty*e.resolution),n=!1),i=l.anchor.x*(-c.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-c.height*l.scale.y)+l.position.y+.5,a=c.width*l.scale.x,s=c.height*l.scale.y;else{n||(n=!0),l.displayObjectUpdateTransform();var h=l.worldTransform;e.roundPixels?t.setTransform(h.a,h.b,h.c,h.d,h.tx*e.resolution|0,h.ty*e.resolution|0):t.setTransform(h.a,h.b,h.c,h.d,h.tx*e.resolution,h.ty*e.resolution),i=l.anchor.x*-c.width+.5,o=l.anchor.y*-c.height+.5,a=c.width,s=c.height}var d=l._texture.baseTexture.resolution;t.drawImage(l._texture.baseTexture.source,c.x*d,c.y*d,c.width*d,c.height*d,i*e.resolution,o*e.resolution,a*e.resolution,s*e.resolution)}}}},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},s(t,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,(0,c.hex2rgb)(e,this.tintRgb)}}]),t}(l.Container);r.default=h},{"../core":65,"../core/utils":125}],174:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./ParticleContainer");Object.defineProperty(r,"ParticleContainer",{enumerable:!0,get:function(){return n(i).default}});var o=e("./webgl/ParticleRenderer");Object.defineProperty(r,"ParticleRenderer",{enumerable:!0,get:function(){return n(o).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=e("pixi-gl-core"),a=n(o),s=e("../../core/utils/createIndicesForQuads"),u=n(s),l=function(){function e(t,r,n,o){i(this,e),this.gl=t,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(var a=0;a<r.length;++a){var s=r[a];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},n[a]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.gl,t=0;this.indices=(0,u.default)(this.size),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=t,t+=n.size,this.dynamicStride+=n.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=a.default.GLBuffer.createVertexBuffer(e,i,e.STREAM_DRAW);var o=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var l=this.staticProperties[s];l.offset=o,o+=l.size,this.staticStride+=l.size}var c=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=a.default.GLBuffer.createVertexBuffer(e,c,e.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(e).addIndex(this.indexBuffer);for(var h=0;h<this.dynamicProperties.length;++h){var d=this.dynamicProperties[h];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,e.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*d.offset):this.vao.addAttribute(this.dynamicBuffer,d.attribute,e.FLOAT,!1,4*this.dynamicStride,4*d.offset)}for(var f=0;f<this.staticProperties.length;++f){var p=this.staticProperties[f];p.unsignedByte?this.vao.addAttribute(this.staticBuffer,p.attribute,e.UNSIGNED_BYTE,!0,4*this.staticStride,4*p.offset):this.vao.addAttribute(this.staticBuffer,p.attribute,e.FLOAT,!1,4*this.staticStride,4*p.offset)}},e.prototype.uploadDynamic=function(e,t,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(e,t,r,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},e.prototype.uploadStatic=function(e,t,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(e,t,r,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},e.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},e}();r.default=l},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":15}],176:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../core"),l=i(u),c=e("./ParticleShader"),h=n(c),d=e("./ParticleBuffer"),f=n(d),p=e("../../core/utils"),g=function(e){function t(r){o(this,t);var n=a(this,e.call(this,r));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new l.Matrix,n.CONTEXT_UID=0,n}return s(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new h.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(e){var t=e.children,r=e._maxSize,n=e._batchSize,i=this.renderer,o=t.length;if(0!==o){o>r&&(o=r);var a=e._glBuffers[i.CONTEXT_UID];a||(a=e._glBuffers[i.CONTEXT_UID]=this.generateBuffers(e));var s=t[0]._texture.baseTexture;this.renderer.setBlendMode(l.utils.correctBlendMode(e.blendMode,s.premultipliedAlpha));var u=i.gl,c=e.worldTransform.copy(this.tempMatrix);c.prepend(i._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=c.toArray(!0),this.shader.uniforms.uColor=l.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,s.premultipliedAlpha),this.shader.uniforms.uSampler=i.bindTexture(s);for(var h=!1,d=0,f=0;d<o;d+=n,f+=1){var p=o-d;if(p>n&&(p=n),f>=a.length){if(!e.autoResize)break;a.push(this._generateOneMoreBuffer(e))}var g=a[f];g.uploadDynamic(t,d,p);var v=e._bufferUpdateIDs[f]||0;h=h||g._updateID<v,h&&(g._updateID=e._updateID,g.uploadStatic(t,d,p)),i.bindVao(g.vao),g.vao.draw(u.TRIANGLES,6*p)}}},t.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,r=[],n=e._maxSize,i=e._batchSize,o=e._properties,a=0;a<n;a+=i)r.push(new f.default(t,this.properties,o,i));return r},t.prototype._generateOneMoreBuffer=function(e){var t=this.renderer.gl,r=e._batchSize,n=e._properties;return new f.default(t,this.properties,n,r)},t.prototype.uploadVertices=function(e,t,r,n,i,o){for(var a=0,s=0,u=0,l=0,c=0;c<r;++c){var h=e[t+c],d=h._texture,f=h.scale.x,p=h.scale.y,g=d.trim,v=d.orig;g?(s=g.x-h.anchor.x*v.width,a=s+g.width,l=g.y-h.anchor.y*v.height,u=l+g.height):(a=v.width*(1-h.anchor.x),s=v.width*-h.anchor.x,u=v.height*(1-h.anchor.y),l=v.height*-h.anchor.y),n[o]=s*f,n[o+1]=l*p,n[o+i]=a*f,n[o+i+1]=l*p,n[o+2*i]=a*f,n[o+2*i+1]=u*p,n[o+3*i]=s*f,n[o+3*i+1]=u*p,o+=4*i}},t.prototype.uploadPosition=function(e,t,r,n,i,o){for(var a=0;a<r;a++){var s=e[t+a].position;n[o]=s.x,n[o+1]=s.y,n[o+i]=s.x,n[o+i+1]=s.y,n[o+2*i]=s.x,n[o+2*i+1]=s.y,n[o+3*i]=s.x,n[o+3*i+1]=s.y,o+=4*i}},t.prototype.uploadRotation=function(e,t,r,n,i,o){for(var a=0;a<r;a++){var s=e[t+a].rotation;n[o]=s,n[o+i]=s,n[o+2*i]=s,n[o+3*i]=s,o+=4*i}},t.prototype.uploadUvs=function(e,t,r,n,i,o){for(var a=0;a<r;++a){var s=e[t+a]._texture._uvs;s?(n[o]=s.x0,n[o+1]=s.y0,n[o+i]=s.x1,n[o+i+1]=s.y1,n[o+2*i]=s.x2,n[o+2*i+1]=s.y2,n[o+3*i]=s.x3,n[o+3*i+1]=s.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},t.prototype.uploadTint=function(e,t,r,n,i,o){for(var a=0;a<r;++a){var s=e[t+a],u=s._texture.baseTexture.premultipliedAlpha,l=s.alpha,c=l<1&&u?(0,p.premultiplyTint)(s._tintRGB,l):s._tintRGB+(255*l<<24);n[o]=c,n[o+i]=c,n[o+2*i]=c,n[o+3*i]=c,o+=4*i}},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(l.ObjectRenderer);r.default=g,l.WebGLRenderer.registerPlugin("particle",g)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../core/Shader"),u=n(s),l=function(e){function t(r){return i(this,t),o(this,e.call(this,r,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")));
}return a(t,e),t}(u.default);r.default=l},{"../../core/Shader":44}],178:[function(e,t,r){"use strict";Math.sign||(Math.sign=function(e){return e=Number(e),0===e||isNaN(e)?e:e>0?1:-1})},{}],179:[function(e,t,r){"use strict";Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e})},{}],180:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=e("object-assign"),o=n(i);Object.assign||(Object.assign=o.default)},{"object-assign":6}],181:[function(e,t,r){"use strict";e("./Object.assign"),e("./requestAnimationFrame"),e("./Math.sign"),e("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Number.isInteger":179,"./Object.assign":180,"./requestAnimationFrame":182}],182:[function(e,t,r){(function(e){"use strict";var t=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!e.performance||!e.performance.now){var r=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-r}}for(var n=Date.now(),i=["ms","moz","webkit","o"],o=0;o<i.length&&!e.requestAnimationFrame;++o){var a=i[o];e.requestAnimationFrame=e[a+"RequestAnimationFrame"],e.cancelAnimationFrame=e[a+"CancelAnimationFrame"]||e[a+"CancelRequestAnimationFrame"]}e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var r=Date.now(),i=t+n-r;return i<0&&(i=0),n=r,setTimeout(function(){n=Date.now(),e(performance.now())},i)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){return clearTimeout(e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],183:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){var r=!1;if(e&&e._textures&&e._textures.length)for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof p.Texture){var i=e._textures[n].baseTexture;t.indexOf(i)===-1&&(t.push(i),r=!0)}return r}function s(e,t){return e instanceof p.BaseTexture&&(t.indexOf(e)===-1&&t.push(e),!0)}function u(e,t){if(e._texture&&e._texture instanceof p.Texture){var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function l(e,t){return t instanceof p.Text&&(t.updateText(!0),!0)}function c(e,t){if(t instanceof p.TextStyle){var r=t.toFontString();return p.TextMetrics.measureFont(r),!0}return!1}function h(e,t){if(e instanceof p.Text){t.indexOf(e.style)===-1&&t.push(e.style),t.indexOf(e)===-1&&t.push(e);var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function d(e,t){return e instanceof p.TextStyle&&(t.indexOf(e)===-1&&t.push(e),!0)}r.__esModule=!0;var f=e("../core"),p=i(f),g=e("./limiters/CountLimiter"),v=n(g),m=p.ticker.shared;p.settings.UPLOADS_PER_FRAME=4;var y=function(){function e(t){var r=this;o(this,e),this.limiter=new v.default(p.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(h),this.registerFindHook(d),this.registerFindHook(a),this.registerFindHook(s),this.registerFindHook(u),this.registerUploadHook(l),this.registerUploadHook(c)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,m.addOnce(this.tick,this,p.UPDATE_PRIORITY.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)m.addOnce(this.tick,this,p.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(var o=0,a=i.length;o<a;o++)i[o]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof p.Container)for(var n=e.children.length-1;n>=0;n--)this.add(e.children[n]);return this},e.prototype.destroy=function(){this.ticking&&m.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();r.default=y},{"../core":65,"./limiters/CountLimiter":186}],184:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(t instanceof c.BaseTexture){var r=t.source,n=0===r.width?e.canvas.width:Math.min(e.canvas.width,r.width),i=0===r.height?e.canvas.height:Math.min(e.canvas.height,r.height);return e.ctx.drawImage(r,0,0,n,i,0,0,e.canvas.width,e.canvas.height),!0}return!1}r.__esModule=!0;var l=e("../../core"),c=i(l),h=e("../BasePrepare"),d=n(h),f=16,p=function(e){function t(r){o(this,t);var n=a(this,e.call(this,r));return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=f,n.canvas.height=f,n.ctx=n.canvas.getContext("2d"),n.registerUploadHook(u),n}return s(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(d.default);r.default=p,c.CanvasRenderer.registerPlugin("prepare",p)},{"../../core":65,"../BasePrepare":183}],185:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./webgl/WebGLPrepare");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return n(i).default}});var o=e("./canvas/CanvasPrepare");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return n(o).default}});var a=e("./BasePrepare");Object.defineProperty(r,"BasePrepare",{enumerable:!0,get:function(){return n(a).default}});var s=e("./limiters/CountLimiter");Object.defineProperty(r,"CountLimiter",{enumerable:!0,get:function(){return n(s).default}});var u=e("./limiters/TimeLimiter");Object.defineProperty(r,"TimeLimiter",{enumerable:!0,get:function(){return n(u).default}})},{"./BasePrepare":183,"./canvas/CanvasPrepare":184,"./limiters/CountLimiter":186,"./limiters/TimeLimiter":187,"./webgl/WebGLPrepare":188}],186:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(t){n(this,e),this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();r.default=i},{}],187:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(t){n(this,e),this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();r.default=i},{}],188:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return t instanceof d.BaseTexture&&(t._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(t),!0)}function l(e,t){return t instanceof d.Graphics&&((t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(t),!0)}function c(e,t){return e instanceof d.Graphics&&(t.push(e),!0)}r.__esModule=!0;var h=e("../../core"),d=i(h),f=e("../BasePrepare"),p=n(f),g=function(e){function t(r){o(this,t);var n=a(this,e.call(this,r));return n.uploadHookHelper=n.renderer,n.registerFindHook(c),n.registerUploadHook(u),n.registerUploadHook(l),n}return s(t,e),t}(p.default);r.default=g,d.WebGLRenderer.registerPlugin("prepare",g)},{"../../core":65,"../BasePrepare":183}],189:[function(e,t,r){(function(t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.loader=r.prepare=r.particles=r.mesh=r.loaders=r.interaction=r.filters=r.extras=r.extract=r.accessibility=void 0;var o=e("./polyfill");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./core");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var s=e("./deprecation"),u=i(s),l=e("./accessibility"),c=n(l),h=e("./extract"),d=n(h),f=e("./extras"),p=n(f),g=e("./filters"),v=n(g),m=e("./interaction"),y=n(m),_=e("./loaders"),x=n(_),b=e("./mesh"),S=n(b),T=e("./particles"),w=n(T),E=e("./prepare"),C=n(E);a.utils.mixins.performMixins();var R=x.shared||null;r.accessibility=c,r.extract=d,r.extras=p,r.filters=v,r.interaction=y,r.loaders=x,r.mesh=S,r.particles=w,r.prepare=C,r.loader=R,"function"==typeof u.default&&(0,u.default)(r),t.PIXI=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":181,"./prepare":185}]},{},[189])(189)});var __filters=function(e,t){"use strict";var r="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",n="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float gamma;\nuniform float contrast;\nuniform float saturation;\nuniform float brightness;\nuniform float red;\nuniform float green;\nuniform float blue;\nuniform float alpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (c.a > 0.0) {\n        c.rgb /= c.a;\n\n        vec3 rgb = pow(c.rgb, vec3(1. / gamma));\n        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);\n        rgb.r *= red;\n        rgb.g *= green;\n        rgb.b *= blue;\n        c.rgb = rgb * brightness;\n\n        c.rgb *= c.a;\n    }\n\n    gl_FragColor = c * alpha;\n}\n",i=function(e){function t(t){e.call(this,r,n),Object.assign(this,{gamma:1,saturation:1,contrast:1,brightness:1,red:1,green:1,blue:1,alpha:1},t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e,t,r,n){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,e.applyFilter(this,t,r,n)},t}(t.Filter),o=r,a="\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}",s="\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n",u=function(e){function r(r,n,i){void 0===r&&(r=4),void 0===n&&(n=3),void 0===i&&(i=!1),e.call(this,o,i?s:a),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new t.Point,this.pixelSize=1,this._clamp=i,this._kernels=null,Array.isArray(r)?this.kernels=r:(this._blur=r,this.quality=n)}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return r.prototype.apply=function(e,t,r,n){var i,o=this.pixelSize.x/t.size.width,a=this.pixelSize.y/t.size.height;if(1===this._quality||0===this._blur)i=this._kernels[0]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,t,r,n);else{for(var s,u=e.getRenderTarget(!0),l=t,c=u,h=this._quality-1,d=0;d<h;d++)i=this._kernels[d]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,l,c,!0),s=l,l=c,c=s;i=this._kernels[h]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,l,r,n),e.returnRenderTarget(u)}},r.prototype._generateKernels=function(){var e=this._blur,t=this._quality,r=[e];if(e>0)for(var n=e,i=e/t,o=1;o<t;o++)n-=i,r.push(n);this._kernels=r},n.kernels.get=function(){return this._kernels},n.kernels.set=function(e){Array.isArray(e)&&e.length>0?(this._kernels=e,this._quality=e.length,this._blur=Math.max.apply(Math,e)):(this._kernels=[0],this._quality=1)},n.clamp.get=function(){return this._clamp},n.pixelSize.set=function(e){"number"==typeof e?(this._pixelSize.x=e,this._pixelSize.y=e):Array.isArray(e)?(this._pixelSize.x=e[0],this._pixelSize.y=e[1]):e instanceof t.Point?(this._pixelSize.x=e.x,this._pixelSize.y=e.y):(this._pixelSize.x=1,this._pixelSize.y=1)},n.pixelSize.get=function(){return this._pixelSize},n.quality.get=function(){return this._quality},n.quality.set=function(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels()},n.blur.get=function(){return this._blur},n.blur.set=function(e){this._blur=e,this._generateKernels()},Object.defineProperties(r.prototype,n),r}(t.Filter),l=r,c="\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n",h=function(e){function t(t){void 0===t&&(t=.5),e.call(this,l,c),this.threshold=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={threshold:{configurable:!0}};return r.threshold.get=function(){return this.uniforms.threshold},r.threshold.set=function(e){this.uniforms.threshold=e},Object.defineProperties(t.prototype,r),t}(t.Filter),d="uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n",f=function(e){function r(r){e.call(this,l,d),"number"==typeof r&&(r={threshold:r}),r=Object.assign({threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:t.settings.RESOLUTION},r),this.bloomScale=r.bloomScale,this.brightness=r.brightness;var n=r.kernels,i=r.blur,o=r.quality,a=r.pixelSize,s=r.resolution;this._extractFilter=new h(r.threshold),this._extractFilter.resolution=s,this._blurFilter=n?new u(n):new u(i,o),this.pixelSize=a,this.resolution=s}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={resolution:{configurable:!0},threshold:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return r.prototype.apply=function(e,t,r,n,i){var o=e.getRenderTarget(!0);this._extractFilter.apply(e,t,o,!0,i);var a=e.getRenderTarget(!0);this._blurFilter.apply(e,o,a,!0,i),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=a,e.applyFilter(this,t,r,n),e.returnRenderTarget(a),e.returnRenderTarget(o)},n.resolution.get=function(){return this._resolution},n.resolution.set=function(e){this._resolution=e,this._extractFilter&&(this._extractFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)},n.threshold.get=function(){return this._extractFilter.threshold},n.threshold.set=function(e){this._extractFilter.threshold=e},n.kernels.get=function(){return this._blurFilter.kernels},n.kernels.set=function(e){this._blurFilter.kernels=e},n.blur.get=function(){return this._blurFilter.blur},n.blur.set=function(e){this._blurFilter.blur=e},n.quality.get=function(){return this._blurFilter.quality},n.quality.set=function(e){this._blurFilter.quality=e},n.pixelSize.get=function(){return this._blurFilter.pixelSize},n.pixelSize.set=function(e){this._blurFilter.pixelSize=e},Object.defineProperties(r.prototype,n),r}(t.Filter),p=r,g="varying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n    return floor( coord / size ) * size;\n}\n\nvec2 getMod(vec2 coord, vec2 size)\n{\n    return mod( coord , size) / size;\n}\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    // get the rounded color..\n    vec2 pixCoord = pixelate(coord, vec2(pixelSize));\n    pixCoord = unmapCoord(pixCoord);\n\n    vec4 color = texture2D(uSampler, pixCoord);\n\n    // determine the character to use\n    float gray = (color.r + color.g + color.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    // get the mod..\n    vec2 modd = getMod(coord, vec2(pixelSize));\n\n    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);\n\n}",v=function(e){function t(t){void 0===t&&(t=8),e.call(this,p,g),this.size=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={size:{configurable:!0}};return r.size.get=function(){return this.uniforms.pixelSize},r.size.set=function(e){this.uniforms.pixelSize=e},Object.defineProperties(t.prototype,r),t}(t.Filter),m=r,y="precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float transformX;\nuniform float transformY;\nuniform vec3 lightColor;\nuniform float lightAlpha;\nuniform vec3 shadowColor;\nuniform float shadowAlpha;\n\nvoid main(void) {\n    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float light = texture2D(uSampler, vTextureCoord - transform).a;\n    float shadow = texture2D(uSampler, vTextureCoord + transform).a;\n\n    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));\n    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));\n    gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n",_=function(e){function r(t){void 0===t&&(t={}),e.call(this,m,y),this.uniforms.lightColor=new Float32Array(3),this.uniforms.shadowColor=new Float32Array(3),t=Object.assign({rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},t),this.rotation=t.rotation,this.thickness=t.thickness,this.lightColor=t.lightColor,this.lightAlpha=t.lightAlpha,this.shadowColor=t.shadowColor,this.shadowAlpha=t.shadowAlpha}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={rotation:{configurable:!0},thickness:{configurable:!0},lightColor:{configurable:!0},lightAlpha:{configurable:!0},shadowColor:{configurable:!0},shadowAlpha:{configurable:!0}};return r.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},n.rotation.get=function(){return this._angle/t.DEG_TO_RAD},n.rotation.set=function(e){this._angle=e*t.DEG_TO_RAD,this._updateTransform()},n.thickness.get=function(){return this._thickness},n.thickness.set=function(e){this._thickness=e,this._updateTransform()},n.lightColor.get=function(){return t.utils.rgb2hex(this.uniforms.lightColor)},n.lightColor.set=function(e){t.utils.hex2rgb(e,this.uniforms.lightColor)},n.lightAlpha.get=function(){return this.uniforms.lightAlpha},n.lightAlpha.set=function(e){this.uniforms.lightAlpha=e},n.shadowColor.get=function(){return t.utils.rgb2hex(this.uniforms.shadowColor)},n.shadowColor.set=function(e){t.utils.hex2rgb(e,this.uniforms.shadowColor)},n.shadowAlpha.get=function(){return this.uniforms.shadowAlpha},n.shadowAlpha.set=function(e){this.uniforms.shadowAlpha=e},Object.defineProperties(r.prototype,n),r}(t.Filter),x=t.filters,b=x.BlurXFilter,S=x.BlurYFilter,T=x.AlphaFilter,w=function(e){function r(r,n,i,o){var a,s;void 0===r&&(r=2),void 0===n&&(n=4),void 0===i&&(i=t.settings.RESOLUTION),void 0===o&&(o=5),e.call(this),"number"==typeof r?(a=r,s=r):r instanceof t.Point?(a=r.x,s=r.y):Array.isArray(r)&&(a=r[0],s=r[1]),this.blurXFilter=new b(a,n,i,o),this.blurYFilter=new S(s,n,i,o),this.blurYFilter.blendMode=t.BLEND_MODES.SCREEN,this.defaultFilter=new T}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={blur:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0}};return r.prototype.apply=function(e,t,r){var n=e.getRenderTarget(!0);this.defaultFilter.apply(e,t,r),this.blurXFilter.apply(e,t,n),this.blurYFilter.apply(e,n,r),e.returnRenderTarget(n)},n.blur.get=function(){return this.blurXFilter.blur},n.blur.set=function(e){this.blurXFilter.blur=this.blurYFilter.blur=e},n.blurX.get=function(){return this.blurXFilter.blur},n.blurX.set=function(e){this.blurXFilter.blur=e},n.blurY.get=function(){return this.blurYFilter.blur},n.blurY.set=function(e){this.blurYFilter.blur=e},Object.defineProperties(r.prototype,n),r}(t.Filter),E=r,C="uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n",R=function(e){function t(t,r,n){e.call(this,E,C),this.uniforms.dimensions=new Float32Array(2),this.center=t||[.5,.5],this.radius=r||100,this.strength=n||1}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={radius:{configurable:!0},strength:{configurable:!0},center:{configurable:!0}};return t.prototype.apply=function(e,t,r,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,e.applyFilter(this,t,r,n)},r.radius.get=function(){return this.uniforms.radius},r.radius.set=function(e){this.uniforms.radius=e},r.strength.get=function(){return this.uniforms.strength},r.strength.set=function(e){this.uniforms.strength=e},r.center.get=function(){return this.uniforms.center},r.center.set=function(e){this.uniforms.center=e},Object.defineProperties(t.prototype,r),t}(t.Filter),O=r,M="\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform sampler2D colorMap;\n\nuniform float _mix;\nuniform float _size;\nuniform float _sliceSize;\nuniform float _slicePixelSize;\nuniform float _sliceInnerSize;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord.xy);\n\n    float sliceIndex = color.b * (_size - 1.0);\n    float zSlice0 = floor(sliceIndex);\n    float zSlice1 = ceil(sliceIndex);\n\n    float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;\n    float s0 = xOffset + zSlice0 * _sliceSize;\n    float s1 = xOffset + zSlice1 * _sliceSize;\n    vec4 slice0Color = texture2D(colorMap, vec2(s0, color.g));\n    vec4 slice1Color = texture2D(colorMap, vec2(s1, color.g));\n    vec4 adjusted = mix(slice0Color, slice1Color, fract(sliceIndex));\n\n    gl_FragColor = mix(color, adjusted, _mix);\n}\n",P=function(e){function r(t,r,n){void 0===r&&(r=!1),void 0===n&&(n=1),e.call(this,O,M),this._size=0,this._sliceSize=0,this._slicePixelSize=0,this._sliceInnerSize=0,this._scaleMode=null,this._nearest=!1,this.nearest=r,this.mix=n,this.colorMap=t}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={colorSize:{configurable:!0},colorMap:{configurable:!0},nearest:{configurable:!0}};return r.prototype.apply=function(e,t,r,n){this.uniforms._mix=this.mix,e.applyFilter(this,t,r,n)},n.colorSize.get=function(){return this._size},n.colorMap.get=function(){return this._colorMap},n.colorMap.set=function(e){e instanceof t.Texture||(e=t.Texture.from(e)),e&&e.baseTexture&&(e.baseTexture.scaleMode=this._scaleMode,e.baseTexture.mipmap=!1,this._size=e.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=e),this._colorMap=e},n.nearest.get=function(){return this._nearest},n.nearest.set=function(e){this._nearest=e,this._scaleMode=e?t.SCALE_MODES.NEAREST:t.SCALE_MODES.LINEAR;var r=this._colorMap;r&&r.baseTexture&&(r.baseTexture._glTextures={},r.baseTexture.scaleMode=this._scaleMode,r.baseTexture.mipmap=!1,r._updateID++,r.baseTexture.emit("update",r.baseTexture))},r.prototype.updateColorMap=function(){var e=this._colorMap;e&&e.baseTexture&&(e._updateID++,e.baseTexture.emit("update",e.baseTexture),this.colorMap=e)},r.prototype.destroy=function(t){this._colorMap&&this._colorMap.destroy(t),e.prototype.destroy.call(this)},Object.defineProperties(r.prototype,n),r}(t.Filter),A=r,I="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 originalColor;\nuniform vec3 newColor;\nuniform float epsilon;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    float doReplace = step(colorDistance, epsilon);\n    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);\n}\n",D=function(e){function r(t,r,n){void 0===t&&(t=16711680),void 0===r&&(r=0),void 0===n&&(n=.4),e.call(this,A,I),this.uniforms.originalColor=new Float32Array(3),this.uniforms.newColor=new Float32Array(3),this.originalColor=t,this.newColor=r,this.epsilon=n}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={originalColor:{configurable:!0},newColor:{configurable:!0},epsilon:{configurable:!0}};return n.originalColor.set=function(e){var r=this.uniforms.originalColor;"number"==typeof e?(t.utils.hex2rgb(e,r),this._originalColor=e):(r[0]=e[0],r[1]=e[1],r[2]=e[2],this._originalColor=t.utils.rgb2hex(r))},n.originalColor.get=function(){return this._originalColor},n.newColor.set=function(e){var r=this.uniforms.newColor;"number"==typeof e?(t.utils.hex2rgb(e,r),this._newColor=e):(r[0]=e[0],r[1]=e[1],r[2]=e[2],this._newColor=t.utils.rgb2hex(r))},n.newColor.get=function(){return this._newColor},n.epsilon.set=function(e){this.uniforms.epsilon=e},n.epsilon.get=function(){return this.uniforms.epsilon;
},Object.defineProperties(r.prototype,n),r}(t.Filter),k=r,F="precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",L=function(e){function t(t,r,n){e.call(this,k,F),this.uniforms.texelSize=new Float32Array(9),this.matrix=t,this.width=r,this.height=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={matrix:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return r.matrix.get=function(){return this.uniforms.matrix},r.matrix.set=function(e){this.uniforms.matrix=new Float32Array(e)},r.width.get=function(){return 1/this.uniforms.texelSize[0]},r.width.set=function(e){this.uniforms.texelSize[0]=1/e},r.height.get=function(){return 1/this.uniforms.texelSize[1]},r.height.set=function(e){this.uniforms.texelSize[1]=1/e},Object.defineProperties(t.prototype,r),t}(t.Filter),B=r,N="precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n",X=function(e){function t(){e.call(this,B,N)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(t.Filter),j=r,U="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    vec2 dir = vec2(coord - vec2(0.5, 0.5));\n\n    float _c = curvature > 0. ? curvature : 1.;\n    float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n    vec2 uv = dir * k;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0) {\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n",Y=function(e){function t(t){e.call(this,j,U),this.uniforms.dimensions=new Float32Array(2),this.time=0,this.seed=0,Object.assign(this,{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},t)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={curvature:{configurable:!0},lineWidth:{configurable:!0},lineContrast:{configurable:!0},verticalLine:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return t.prototype.apply=function(e,t,r,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,this.uniforms.seed=this.seed,this.uniforms.time=this.time,e.applyFilter(this,t,r,n)},r.curvature.set=function(e){this.uniforms.curvature=e},r.curvature.get=function(){return this.uniforms.curvature},r.lineWidth.set=function(e){this.uniforms.lineWidth=e},r.lineWidth.get=function(){return this.uniforms.lineWidth},r.lineContrast.set=function(e){this.uniforms.lineContrast=e},r.lineContrast.get=function(){return this.uniforms.lineContrast},r.verticalLine.set=function(e){this.uniforms.verticalLine=e},r.verticalLine.get=function(){return this.uniforms.verticalLine},r.noise.set=function(e){this.uniforms.noise=e},r.noise.get=function(){return this.uniforms.noise},r.noiseSize.set=function(e){this.uniforms.noiseSize=e},r.noiseSize.get=function(){return this.uniforms.noiseSize},r.vignetting.set=function(e){this.uniforms.vignetting=e},r.vignetting.get=function(){return this.uniforms.vignetting},r.vignettingAlpha.set=function(e){this.uniforms.vignettingAlpha=e},r.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},r.vignettingBlur.set=function(e){this.uniforms.vignettingBlur=e},r.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(t.prototype,r),t}(t.Filter),z=r,W="precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 filterArea;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * filterArea.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",G=function(e){function t(t,r){void 0===t&&(t=1),void 0===r&&(r=5),e.call(this,z,W),this.scale=t,this.angle=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={scale:{configurable:!0},angle:{configurable:!0}};return r.scale.get=function(){return this.uniforms.scale},r.scale.set=function(e){this.uniforms.scale=e},r.angle.get=function(){return this.uniforms.angle},r.angle.set=function(e){this.uniforms.angle=e},Object.defineProperties(t.prototype,r),t}(t.Filter),H=r,V="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n\n    // Un-premultiply alpha before applying the color\n    if (sample.a > 0.0) {\n        sample.rgb /= sample.a;\n    }\n\n    // Premultiply alpha again\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}",q=function(e){function r(r){r&&r.constructor!==Object&&(console.warn("DropShadowFilter now uses options instead of (rotation, distance, blur, color, alpha)"),r={rotation:r},void 0!==arguments[1]&&(r.distance=arguments[1]),void 0!==arguments[2]&&(r.blur=arguments[2]),void 0!==arguments[3]&&(r.color=arguments[3]),void 0!==arguments[4]&&(r.alpha=arguments[4])),r=Object.assign({rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:t.settings.RESOLUTION},r),e.call(this);var n=r.kernels,i=r.blur,o=r.quality,a=r.pixelSize,s=r.resolution;this._tintFilter=new t.Filter(H,V),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.resolution=s,this._blurFilter=n?new u(n):new u(i,o),this.pixelSize=a,this.resolution=s,this.targetTransform=new t.Matrix;var l=r.shadowOnly,c=r.rotation,h=r.distance,d=r.alpha,f=r.color;this.shadowOnly=l,this.rotation=c,this.distance=h,this.alpha=d,this.color=f,this._updatePadding()}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={resolution:{configurable:!0},distance:{configurable:!0},rotation:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return r.prototype.apply=function(e,t,r,n){var i=e.getRenderTarget();i.transform=this.targetTransform,this._tintFilter.apply(e,t,i,!0),i.transform=null,this._blurFilter.apply(e,i,r),!0!==this.shadowOnly&&e.applyFilter(this,t,r,n),e.returnRenderTarget(i)},r.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},r.prototype._updateTargetTransform=function(){this.targetTransform.tx=this.distance*Math.cos(this.angle),this.targetTransform.ty=this.distance*Math.sin(this.angle)},n.resolution.get=function(){return this._resolution},n.resolution.set=function(e){this._resolution=e,this._tintFilter&&(this._tintFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)},n.distance.get=function(){return this._distance},n.distance.set=function(e){this._distance=e,this._updatePadding(),this._updateTargetTransform()},n.rotation.get=function(){return this.angle/t.DEG_TO_RAD},n.rotation.set=function(e){this.angle=e*t.DEG_TO_RAD,this._updateTargetTransform()},n.alpha.get=function(){return this._tintFilter.uniforms.alpha},n.alpha.set=function(e){this._tintFilter.uniforms.alpha=e},n.color.get=function(){return t.utils.rgb2hex(this._tintFilter.uniforms.color)},n.color.set=function(e){t.utils.hex2rgb(e,this._tintFilter.uniforms.color)},n.kernels.get=function(){return this._blurFilter.kernels},n.kernels.set=function(e){this._blurFilter.kernels=e},n.blur.get=function(){return this._blurFilter.blur},n.blur.set=function(e){this._blurFilter.blur=e,this._updatePadding()},n.quality.get=function(){return this._blurFilter.quality},n.quality.set=function(e){this._blurFilter.quality=e},n.pixelSize.get=function(){return this._blurFilter.pixelSize},n.pixelSize.set=function(e){this._blurFilter.pixelSize=e},Object.defineProperties(r.prototype,n),r}(t.Filter),K=r,Z="precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float strength;\nuniform vec4 filterArea;\n\n\nvoid main(void)\n{\n\tvec2 onePixel = vec2(1.0 / filterArea);\n\n\tvec4 color;\n\n\tcolor.rgb = vec3(0.5);\n\n\tcolor -= texture2D(uSampler, vTextureCoord - onePixel) * strength;\n\tcolor += texture2D(uSampler, vTextureCoord + onePixel) * strength;\n\n\tcolor.rgb = vec3((color.r + color.g + color.b) / 3.0);\n\n\tfloat alpha = texture2D(uSampler, vTextureCoord).a;\n\n\tgl_FragColor = vec4(color.rgb * alpha, alpha);\n}\n",Q=function(e){function t(t){void 0===t&&(t=5),e.call(this,K,Z),this.strength=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={strength:{configurable:!0}};return r.strength.get=function(){return this.uniforms.strength},r.strength.set=function(e){this.uniforms.strength=e},Object.defineProperties(t.prototype,r),t}(t.Filter),J=r,$="// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n",ee=function(e){function r(r){void 0===r&&(r={}),e.call(this,J,$),this.uniforms.dimensions=new Float32Array(2),r=Object.assign({slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},r),this.direction=r.direction,this.red=r.red,this.green=r.green,this.blue=r.blue,this.offset=r.offset,this.fillMode=r.fillMode,this.average=r.average,this.seed=r.seed,this.minSize=r.minSize,this.sampleSize=r.sampleSize,this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=t.Texture.fromCanvas(this._canvas,t.SCALE_MODES.NEAREST),this._slices=0,this.slices=r.slices}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={sizes:{configurable:!0},offsets:{configurable:!0},slices:{configurable:!0},direction:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return r.prototype.apply=function(e,t,r,n){var i=t.sourceFrame.width,o=t.sourceFrame.height;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/i,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,e.applyFilter(this,t,r,n)},r.prototype._randomizeSizes=function(){var e=this._sizes,t=this._slices-1,r=this.sampleSize,n=Math.min(this.minSize/r,.9/this._slices);if(this.average){for(var i=this._slices,o=1,a=0;a<t;a++){var s=o/(i-a),u=Math.max(s*(1-.6*Math.random()),n);e[a]=u,o-=u}e[t]=o}else{for(var l=1,c=Math.sqrt(1/this._slices),h=0;h<t;h++){var d=Math.max(c*l*Math.random(),n);e[h]=d,l-=d}e[t]=l}this.shuffle()},r.prototype.shuffle=function(){for(var e=this._sizes,t=this._slices-1;t>0;t--){var r=Math.random()*t>>0,n=e[t];e[t]=e[r],e[r]=n}},r.prototype._randomizeOffsets=function(){for(var e=0;e<this._slices;e++)this._offsets[e]=Math.random()*(Math.random()<.5?-1:1)},r.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},r.prototype.redraw=function(){var e,t=this.sampleSize,r=this.texture,n=this._canvas.getContext("2d");n.clearRect(0,0,8,t);for(var i=0,o=0;o<this._slices;o++){e=Math.floor(256*this._offsets[o]);var a=this._sizes[o]*t,s=e>0?e:0,u=e<0?-e:0;n.fillStyle="rgba("+s+", "+u+", 0, 1)",n.fillRect(0,i>>0,t,a+1>>0),i+=a}r.baseTexture.emit("update",r.baseTexture),this.uniforms.displacementMap=r},n.sizes.set=function(e){for(var t=Math.min(this._slices,e.length),r=0;r<t;r++)this._sizes[r]=e[r]},n.sizes.get=function(){return this._sizes},n.offsets.set=function(e){for(var t=Math.min(this._slices,e.length),r=0;r<t;r++)this._offsets[r]=e[r]},n.offsets.get=function(){return this._offsets},n.slices.get=function(){return this._slices},n.slices.set=function(e){this._slices!==e&&(this._slices=e,this.uniforms.slices=e,this._sizes=this.uniforms.slicesWidth=new Float32Array(e),this._offsets=this.uniforms.slicesOffset=new Float32Array(e),this.refresh())},n.direction.get=function(){return this._direction},n.direction.set=function(e){if(this._direction!==e){this._direction=e;var r=e*t.DEG_TO_RAD;this.uniforms.sinDir=Math.sin(r),this.uniforms.cosDir=Math.cos(r)}},n.red.get=function(){return this.uniforms.red},n.red.set=function(e){this.uniforms.red=e},n.green.get=function(){return this.uniforms.green},n.green.set=function(e){this.uniforms.green=e},n.blue.get=function(){return this.uniforms.blue},n.blue.set=function(e){this.uniforms.blue=e},r.prototype.destroy=function(){this.texture.destroy(!0),this.texture=null,this._canvas=null,this.red=null,this.green=null,this.blue=null,this._sizes=null,this._offsets=null},Object.defineProperties(r.prototype,n),r}(t.Filter);ee.TRANSPARENT=0,ee.ORIGINAL=1,ee.LOOP=2,ee.CLAMP=3,ee.MIRROR=4;var te=r,re="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float distance;\nuniform float outerStrength;\nuniform float innerStrength;\nuniform vec4 glowColor;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float totalAlpha = 0.0;\n    float maxTotalAlpha = 0.0;\n    float cosAngle;\n    float sinAngle;\n    vec2 displaced;\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\n       cosAngle = cos(angle);\n       sinAngle = sin(angle);\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\n           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;\n           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;\n           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n           totalAlpha += (distance - curDistance) * curColor.a;\n           maxTotalAlpha += (distance - curDistance);\n       }\n    }\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\n\n    ownColor.a = max(ownColor.a, 0.0001);\n    ownColor.rgb = ownColor.rgb / ownColor.a;\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\n}\n",ne=function(e){function r(t,r,n,i,o){void 0===t&&(t=10),void 0===r&&(r=4),void 0===n&&(n=0),void 0===i&&(i=16777215),void 0===o&&(o=.1),e.call(this,te,re.replace(/%QUALITY_DIST%/gi,""+(1/o/t).toFixed(7)).replace(/%DIST%/gi,""+t.toFixed(7))),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.distance=t,this.color=i,this.outerStrength=r,this.innerStrength=n}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={color:{configurable:!0},distance:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0}};return n.color.get=function(){return t.utils.rgb2hex(this.uniforms.glowColor)},n.color.set=function(e){t.utils.hex2rgb(e,this.uniforms.glowColor)},n.distance.get=function(){return this.uniforms.distance},n.distance.set=function(e){this.uniforms.distance=e},n.outerStrength.get=function(){return this.uniforms.outerStrength},n.outerStrength.set=function(e){this.uniforms.outerStrength=e},n.innerStrength.get=function(){return this.uniforms.innerStrength},n.innerStrength.set=function(e){this.uniforms.innerStrength=e},Object.defineProperties(r.prototype,n),r}(t.Filter),ie=r,oe="vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n",ae="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n}\n",se=function(e){function r(r){e.call(this,ie,ae.replace("${perlin}",oe)),this.uniforms.dimensions=new Float32Array(2),"number"==typeof r&&(console.warn("GodrayFilter now uses options instead of (angle, gain, lacunarity, time)"),r={angle:r},void 0!==arguments[1]&&(r.gain=arguments[1]),void 0!==arguments[2]&&(r.lacunarity=arguments[2]),void 0!==arguments[3]&&(r.time=arguments[3])),r=Object.assign({angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0]},r),this._angleLight=new t.Point,this.angle=r.angle,this.gain=r.gain,this.lacunarity=r.lacunarity,this.parallel=r.parallel,this.center=r.center,this.time=r.time}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={angle:{configurable:!0},gain:{configurable:!0},lacunarity:{configurable:!0}};return r.prototype.apply=function(e,t,r,n){var i=t.sourceFrame,o=i.width,a=i.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=a,this.uniforms.aspect=a/o,this.uniforms.time=this.time,e.applyFilter(this,t,r,n)},n.angle.get=function(){return this._angle},n.angle.set=function(e){this._angle=e;var r=e*t.DEG_TO_RAD;this._angleLight.x=Math.cos(r),this._angleLight.y=Math.sin(r)},n.gain.get=function(){return this.uniforms.gain},n.gain.set=function(e){this.uniforms.gain=e},n.lacunarity.get=function(){return this.uniforms.lacunarity},n.lacunarity.set=function(e){this.uniforms.lacunarity=e},Object.defineProperties(r.prototype,n),r}(t.Filter),ue=r,le="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uVelocity;\nuniform int uKernelSize;\nuniform float uOffset;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\n// Notice:\n// the perfect way:\n//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);\n// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.\n// So use uKernelSize directly.\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    vec2 velocity = uVelocity / filterArea.xy;\n    float offset = -uOffset / length(uVelocity) - 0.5;\n    int k = uKernelSize - 1;\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n        vec2 bias = velocity * (float(i) / float(k) + offset);\n        color += texture2D(uSampler, vTextureCoord + bias);\n    }\n    gl_FragColor = color / float(uKernelSize);\n}\n",ce=function(e){function r(r,n,i){void 0===r&&(r=[0,0]),void 0===n&&(n=5),void 0===i&&(i=0),e.call(this,ue,le),this.uniforms.uVelocity=new Float32Array(2),this._velocity=new t.ObservablePoint(this.velocityChanged,this),this.velocity=r,this.kernelSize=n,this.offset=i}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={velocity:{configurable:!0},offset:{configurable:!0}};return r.prototype.apply=function(e,t,r,n){var i=this.velocity,o=i.x,a=i.y;this.uniforms.uKernelSize=0!==o||0!==a?this.kernelSize:0,e.applyFilter(this,t,r,n)},n.velocity.set=function(e){Array.isArray(e)?this._velocity.set(e[0],e[1]):(e instanceof t.Point||e instanceof t.ObservablePoint)&&this._velocity.copy(e)},n.velocity.get=function(){return this._velocity},r.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y},n.offset.set=function(e){this.uniforms.uOffset=e},n.offset.get=function(){return this.uniforms.uOffset},Object.defineProperties(r.prototype,n),r}(t.Filter),he=r,de="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float epsilon;\n\nconst int MAX_COLORS = %maxColors%;\n\nuniform vec3 originalColors[MAX_COLORS];\nuniform vec3 targetColors[MAX_COLORS];\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    float alpha = gl_FragColor.a;\n    if (alpha < 0.0001)\n    {\n      return;\n    }\n\n    vec3 color = gl_FragColor.rgb / alpha;\n\n    for(int i = 0; i < MAX_COLORS; i++)\n    {\n      vec3 origColor = originalColors[i];\n      if (origColor.r < 0.0)\n      {\n        break;\n      }\n      vec3 colorDiff = origColor - color;\n      if (length(colorDiff) < epsilon)\n      {\n        vec3 targetColor = targetColors[i];\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\n        return;\n      }\n    }\n}\n",fe=function(e){function r(t,r,n){void 0===r&&(r=.05),void 0===n&&(n=null),n=n||t.length,e.call(this,he,de.replace(/%maxColors%/g,n)),
this.epsilon=r,this._maxColors=n,this._replacements=null,this.uniforms.originalColors=new Float32Array(3*n),this.uniforms.targetColors=new Float32Array(3*n),this.replacements=t}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={replacements:{configurable:!0},maxColors:{configurable:!0},epsilon:{configurable:!0}};return n.replacements.set=function(e){var r=this.uniforms.originalColors,n=this.uniforms.targetColors,i=e.length;if(i>this._maxColors)throw"Length of replacements ("+i+") exceeds the maximum colors length ("+this._maxColors+")";r[3*i]=-1;for(var o=0;o<i;o++){var a=e[o],s=a[0];"number"==typeof s?s=t.utils.hex2rgb(s):a[0]=t.utils.rgb2hex(s),r[3*o]=s[0],r[3*o+1]=s[1],r[3*o+2]=s[2];var u=a[1];"number"==typeof u?u=t.utils.hex2rgb(u):a[1]=t.utils.rgb2hex(u),n[3*o]=u[0],n[3*o+1]=u[1],n[3*o+2]=u[2]}this._replacements=e},n.replacements.get=function(){return this._replacements},r.prototype.refresh=function(){this.replacements=this._replacements},n.maxColors.get=function(){return this._maxColors},n.epsilon.set=function(e){this.uniforms.epsilon=e},n.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(r.prototype,n),r}(t.Filter),pe=r,ge="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n",ve=function(e){function t(t,r){void 0===r&&(r=0),e.call(this,pe,ge),this.uniforms.dimensions=new Float32Array(2),"number"==typeof t?(this.seed=t,t=null):this.seed=r,Object.assign(this,{sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},t)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={sepia:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},scratch:{configurable:!0},scratchDensity:{configurable:!0},scratchWidth:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return t.prototype.apply=function(e,t,r,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,this.uniforms.seed=this.seed,e.applyFilter(this,t,r,n)},r.sepia.set=function(e){this.uniforms.sepia=e},r.sepia.get=function(){return this.uniforms.sepia},r.noise.set=function(e){this.uniforms.noise=e},r.noise.get=function(){return this.uniforms.noise},r.noiseSize.set=function(e){this.uniforms.noiseSize=e},r.noiseSize.get=function(){return this.uniforms.noiseSize},r.scratch.set=function(e){this.uniforms.scratch=e},r.scratch.get=function(){return this.uniforms.scratch},r.scratchDensity.set=function(e){this.uniforms.scratchDensity=e},r.scratchDensity.get=function(){return this.uniforms.scratchDensity},r.scratchWidth.set=function(e){this.uniforms.scratchWidth=e},r.scratchWidth.get=function(){return this.uniforms.scratchWidth},r.vignetting.set=function(e){this.uniforms.vignetting=e},r.vignetting.get=function(){return this.uniforms.vignetting},r.vignettingAlpha.set=function(e){this.uniforms.vignettingAlpha=e},r.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},r.vignettingBlur.set=function(e){this.uniforms.vignettingBlur=e},r.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(t.prototype,r),t}(t.Filter),me=r,ye="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n",_e=function(e){function r(t,n,i){void 0===t&&(t=1),void 0===n&&(n=0),void 0===i&&(i=.1);var o=Math.max(i*r.MAX_SAMPLES,r.MIN_SAMPLES),a=(2*Math.PI/o).toFixed(7);e.call(this,me,ye.replace(/\$\{angleStep\}/,a)),this.uniforms.thickness=new Float32Array([0,0]),this.thickness=t,this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.color=n,this.quality=i}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={color:{configurable:!0}};return r.prototype.apply=function(e,t,r,n){this.uniforms.thickness[0]=this.thickness/t.size.width,this.uniforms.thickness[1]=this.thickness/t.size.height,e.applyFilter(this,t,r,n)},n.color.get=function(){return t.utils.rgb2hex(this.uniforms.outlineColor)},n.color.set=function(e){t.utils.hex2rgb(e,this.uniforms.outlineColor)},Object.defineProperties(r.prototype,n),r}(t.Filter);_e.MIN_SAMPLES=1,_e.MAX_SAMPLES=100;var xe=r,be="precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec2 size;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n\treturn floor( coord / size ) * size;\n}\n\nvoid main(void)\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = pixelate(coord, size);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord);\n}\n",Se=function(e){function t(t){void 0===t&&(t=10),e.call(this,xe,be),this.size=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={size:{configurable:!0}};return r.size.get=function(){return this.uniforms.size},r.size.set=function(e){"number"==typeof e&&(e=[e,e]),this.uniforms.size=e},Object.defineProperties(t.prototype,r),t}(t.Filter),Te=r,we="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float uRadian;\nuniform vec2 uCenter;\nuniform float uRadius;\nuniform int uKernelSize;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    float aspect = filterArea.y / filterArea.x;\n    vec2 center = uCenter.xy / filterArea.xy;\n    float gradient = uRadius / filterArea.x * 0.3;\n    float radius = uRadius / filterArea.x - gradient * 0.5;\n    int k = uKernelSize - 1;\n\n    vec2 coord = vTextureCoord;\n    vec2 dir = vec2(center - coord);\n    float dist = length(vec2(dir.x, dir.y * aspect));\n\n    float radianStep = uRadian;\n    if (radius >= 0.0 && dist > radius) {\n        float delta = dist - radius;\n        float gap = gradient;\n        float scale = 1.0 - abs(delta / gap);\n        if (scale <= 0.0) {\n            gl_FragColor = color;\n            return;\n        }\n        radianStep *= scale;\n    }\n    radianStep /= float(k);\n\n    float s = sin(radianStep);\n    float c = cos(radianStep);\n    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n\n        coord -= center;\n        coord.y *= aspect;\n        coord = rotationMatrix * coord;\n        coord.y /= aspect;\n        coord += center;\n\n        vec4 sample = texture2D(uSampler, coord);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample;\n    }\n\n    gl_FragColor = color / float(uKernelSize);\n}\n",Ee=function(e){function t(t,r,n,i){void 0===t&&(t=0),void 0===r&&(r=[0,0]),void 0===n&&(n=5),void 0===i&&(i=-1),e.call(this,Te,we),this._angle=0,this.angle=t,this.center=r,this.kernelSize=n,this.radius=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={angle:{configurable:!0},center:{configurable:!0},radius:{configurable:!0}};return t.prototype.apply=function(e,t,r,n){this.uniforms.uKernelSize=0!==this._angle?this.kernelSize:0,e.applyFilter(this,t,r,n)},r.angle.set=function(e){this._angle=e,this.uniforms.uRadian=e*Math.PI/180},r.angle.get=function(){return this._angle},r.center.get=function(){return this.uniforms.uCenter},r.center.set=function(e){this.uniforms.uCenter=e},r.radius.get=function(){return this.uniforms.uRadius},r.radius.set=function(e){(e<0||e===1/0)&&(e=-1),this.uniforms.uRadius=e},Object.defineProperties(t.prototype,r),t}(t.Filter),Ce=r,Re="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n",Oe=function(e){function t(t){e.call(this,Ce,Re),this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,{mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},t)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={mirror:{configurable:!0},boundary:{configurable:!0},amplitude:{configurable:!0},waveLength:{configurable:!0},alpha:{configurable:!0}};return t.prototype.apply=function(e,t,r,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,this.uniforms.time=this.time,e.applyFilter(this,t,r,n)},r.mirror.set=function(e){this.uniforms.mirror=e},r.mirror.get=function(){return this.uniforms.mirror},r.boundary.set=function(e){this.uniforms.boundary=e},r.boundary.get=function(){return this.uniforms.boundary},r.amplitude.set=function(e){this.uniforms.amplitude[0]=e[0],this.uniforms.amplitude[1]=e[1]},r.amplitude.get=function(){return this.uniforms.amplitude},r.waveLength.set=function(e){this.uniforms.waveLength[0]=e[0],this.uniforms.waveLength[1]=e[1]},r.waveLength.get=function(){return this.uniforms.waveLength},r.alpha.set=function(e){this.uniforms.alpha[0]=e[0],this.uniforms.alpha[1]=e[1]},r.alpha.get=function(){return this.uniforms.alpha},Object.defineProperties(t.prototype,r),t}(t.Filter),Me=r,Pe="precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",Ae=function(e){function t(t,r,n){void 0===t&&(t=[-10,0]),void 0===r&&(r=[0,10]),void 0===n&&(n=[0,0]),e.call(this,Me,Pe),this.red=t,this.green=r,this.blue=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return r.red.get=function(){return this.uniforms.red},r.red.set=function(e){this.uniforms.red=e},r.green.get=function(){return this.uniforms.green},r.green.set=function(e){this.uniforms.green=e},r.blue.get=function(){return this.uniforms.blue},r.blue.set=function(e){this.uniforms.blue=e},Object.defineProperties(t.prototype,r),t}(t.Filter),Ie=r,De="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n",ke=function(e){function t(t,r,n){void 0===t&&(t=[0,0]),void 0===r&&(r={}),void 0===n&&(n=0),e.call(this,Ie,De),this.center=t,Array.isArray(r)&&(console.warn("Deprecated Warning: ShockwaveFilter params Array has been changed to options Object."),r={}),r=Object.assign({amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},r),this.amplitude=r.amplitude,this.wavelength=r.wavelength,this.brightness=r.brightness,this.speed=r.speed,this.radius=r.radius,this.time=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={center:{configurable:!0},amplitude:{configurable:!0},wavelength:{configurable:!0},brightness:{configurable:!0},speed:{configurable:!0},radius:{configurable:!0}};return t.prototype.apply=function(e,t,r,n){this.uniforms.time=this.time,e.applyFilter(this,t,r,n)},r.center.get=function(){return this.uniforms.center},r.center.set=function(e){this.uniforms.center=e},r.amplitude.get=function(){return this.uniforms.amplitude},r.amplitude.set=function(e){this.uniforms.amplitude=e},r.wavelength.get=function(){return this.uniforms.wavelength},r.wavelength.set=function(e){this.uniforms.wavelength=e},r.brightness.get=function(){return this.uniforms.brightness},r.brightness.set=function(e){this.uniforms.brightness=e},r.speed.get=function(){return this.uniforms.speed},r.speed.set=function(e){this.uniforms.speed=e},r.radius.get=function(){return this.uniforms.radius},r.radius.set=function(e){this.uniforms.radius=e},Object.defineProperties(t.prototype,r),t}(t.Filter),Fe=r,Le="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLightmap;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\nuniform vec4 ambientColor;\nvoid main() {\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;\n    vec4 light = texture2D(uLightmap, lightCoord);\n    vec3 ambient = ambientColor.rgb * ambientColor.a;\n    vec3 intensity = ambient + light.rgb;\n    vec3 finalColor = diffuseColor.rgb * intensity;\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n",Be=function(e){function r(t,r,n){void 0===r&&(r=0),void 0===n&&(n=1),e.call(this,Fe,Le),this.uniforms.dimensions=new Float32Array(2),this.uniforms.ambientColor=new Float32Array([0,0,0,n]),this.texture=t,this.color=r}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={texture:{configurable:!0},color:{configurable:!0},alpha:{configurable:!0}};return r.prototype.apply=function(e,t,r,n){this.uniforms.dimensions[0]=t.sourceFrame.width,this.uniforms.dimensions[1]=t.sourceFrame.height,e.applyFilter(this,t,r,n)},n.texture.get=function(){return this.uniforms.uLightmap},n.texture.set=function(e){this.uniforms.uLightmap=e},n.color.set=function(e){var r=this.uniforms.ambientColor;"number"==typeof e?(t.utils.hex2rgb(e,r),this._color=e):(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],this._color=t.utils.rgb2hex(r))},n.color.get=function(){return this._color},n.alpha.get=function(){return this.uniforms.ambientColor[3]},n.alpha.set=function(e){this.uniforms.ambientColor[3]=e},Object.defineProperties(r.prototype,n),r}(t.Filter),Ne=r,Xe="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n",je=function(e){function r(r,n,i,o){void 0===r&&(r=100),void 0===n&&(n=600),void 0===i&&(i=null),void 0===o&&(o=null),e.call(this,Ne,Xe),this.uniforms.blur=r,this.uniforms.gradientBlur=n,this.uniforms.start=i||new t.Point(0,window.innerHeight/2),this.uniforms.end=o||new t.Point(600,window.innerHeight/2),this.uniforms.delta=new t.Point(30,30),this.uniforms.texSize=new t.Point(window.innerWidth,window.innerHeight),this.updateDelta()}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return r.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},n.blur.get=function(){return this.uniforms.blur},n.blur.set=function(e){this.uniforms.blur=e},n.gradientBlur.get=function(){return this.uniforms.gradientBlur},n.gradientBlur.set=function(e){this.uniforms.gradientBlur=e},n.start.get=function(){return this.uniforms.start},n.start.set=function(e){this.uniforms.start=e,this.updateDelta()},n.end.get=function(){return this.uniforms.end},n.end.set=function(e){this.uniforms.end=e,this.updateDelta()},Object.defineProperties(r.prototype,n),r}(t.Filter),Ue=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.updateDelta=function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(e*e+t*t);this.uniforms.delta.x=e/r,this.uniforms.delta.y=t/r},t}(je),Ye=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.updateDelta=function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,r=Math.sqrt(e*e+t*t);this.uniforms.delta.x=-t/r,this.uniforms.delta.y=e/r},t}(je),ze=function(e){function t(t,r,n,i){void 0===t&&(t=100),void 0===r&&(r=600),void 0===n&&(n=null),void 0===i&&(i=null),e.call(this),this.tiltShiftXFilter=new Ue(t,r,n,i),this.tiltShiftYFilter=new Ye(t,r,n,i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return t.prototype.apply=function(e,t,r){var n=e.getRenderTarget(!0);this.tiltShiftXFilter.apply(e,t,n),this.tiltShiftYFilter.apply(e,n,r),e.returnRenderTarget(n)},r.blur.get=function(){return this.tiltShiftXFilter.blur},r.blur.set=function(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e},r.gradientBlur.get=function(){return this.tiltShiftXFilter.gradientBlur},r.gradientBlur.set=function(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e},r.start.get=function(){return this.tiltShiftXFilter.start},r.start.set=function(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e},r.end.get=function(){return this.tiltShiftXFilter.end},r.end.set=function(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e},Object.defineProperties(t.prototype,r),t}(t.Filter),We=r,Ge="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n",He=function(e){function t(t,r,n){void 0===t&&(t=200),void 0===r&&(r=4),void 0===n&&(n=20),e.call(this,We,Ge),this.radius=t,this.angle=r,this.padding=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={offset:{configurable:!0},radius:{configurable:!0},angle:{configurable:!0}};return r.offset.get=function(){return this.uniforms.offset},r.offset.set=function(e){this.uniforms.offset=e},r.radius.get=function(){return this.uniforms.radius},r.radius.set=function(e){this.uniforms.radius=e},r.angle.get=function(){return this.uniforms.angle},r.angle.set=function(e){this.uniforms.angle=e},Object.defineProperties(t.prototype,r),t}(t.Filter),Ve=r,qe="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = 32.0;\n\nfloat random(vec3 scale, float seed) {\n    // use the fragment position for a different seed per-pixel\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n",Ke=function(e){function t(t,r,n,i){void 0===t&&(t=.1),void 0===r&&(r=[0,0]),void 0===n&&(n=0),void 0===i&&(i=-1),e.call(this,Ve,qe),this.center=r,this.strength=t,this.innerRadius=n,this.radius=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={center:{configurable:!0},strength:{configurable:!0},innerRadius:{configurable:!0},radius:{configurable:!0}};return r.center.get=function(){return this.uniforms.uCenter},r.center.set=function(e){this.uniforms.uCenter=e},r.strength.get=function(){return this.uniforms.uStrength},r.strength.set=function(e){this.uniforms.uStrength=e},r.innerRadius.get=function(){return this.uniforms.uInnerRadius},r.innerRadius.set=function(e){this.uniforms.uInnerRadius=e},r.radius.get=function(){return this.uniforms.uRadius},r.radius.set=function(e){(e<0||e===1/0)&&(e=-1),this.uniforms.uRadius=e},Object.defineProperties(t.prototype,r),t}(t.Filter);return e.AdjustmentFilter=i,e.AdvancedBloomFilter=f,e.AsciiFilter=v,e.BevelFilter=_,e.BloomFilter=w,e.BulgePinchFilter=R,e.ColorMapFilter=P,e.ColorReplaceFilter=D,e.ConvolutionFilter=L,e.CrossHatchFilter=X,e.CRTFilter=Y,e.DotFilter=G,e.DropShadowFilter=q,e.EmbossFilter=Q,e.GlitchFilter=ee,e.GlowFilter=ne,e.GodrayFilter=se,e.KawaseBlurFilter=u,e.MotionBlurFilter=ce,e.MultiColorReplaceFilter=fe,e.OldFilmFilter=ve,e.OutlineFilter=_e,e.PixelateFilter=Se,e.RadialBlurFilter=Ee,e.ReflectionFilter=Oe,e.RGBSplitFilter=Ae,e.ShockwaveFilter=ke,e.SimpleLightmapFilter=Be,e.TiltShiftFilter=ze,e.TiltShiftAxisFilter=je,e.TiltShiftXFilter=Ue,e.TiltShiftYFilter=Ye,e.TwistFilter=He,e.ZoomBlurFilter=Ke,e}({},PIXI);Object.assign(PIXI.filters,this?this.__filters:__filters),SkyEngine.Figure=CLASS(e=>{e.generateGraphics=(e=>{let t=e.color,r=e.border,n=(e.blendMode,new PIXI.Graphics);if(void 0!==t&&(isNaN(t)!==!0?n.beginFill(t):n.beginFill(parseInt(t.substring(1),16))),void 0!==r){let e=r.split(" "),t=REAL(e[0]),i=(e[1],e[2]);n.lineStyle(t,parseInt(i.substring(1),16),1)}return n.zIndex=-9999999,n});return{preset:()=>{return SkyEngine.Node},init:(e,t)=>{let r,n;e.setGraphics=(e=>{r=e,t.addToPixiContainer(r)});OVERRIDE(t.setBlendMode,e=>{n=t.setBlendMode=(n=>{e(n),void 0!==r&&(r.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()))})});let i;OVERRIDE(t.removeBlendMode,e=>{i=t.removeBlendMode=(()=>{e(),void 0!==r&&(r.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()))})});let o;OVERRIDE(t.remove,e=>{o=t.remove=(()=>{r=void 0,e()})})}}}),SkyEngine.FixedNode=CLASS({preset:()=>{return SkyEngine.Node},init:(e,t,r)=>{
let n;void 0!==r&&(n=r.followScreenRatio),void 0===n&&(n=0);let i,o=0,a=0;OVERRIDE(t.step,e=>{i=t.step=(r=>{if(1!==n){let e=SkyEngine.Screen.getCameraFollowX()-SkyEngine.Screen.getX(),r=SkyEngine.Screen.getCameraFollowY()-SkyEngine.Screen.getY();t.setX(t.getX()+(e-o)*(1-n)/t.getRealScaleX()),t.setY(t.getY()+(r-a)*(1-n)/t.getRealScaleY()),o=e,a=r}e(r)})})}}),SkyEngine.StateSet=CLASS({preset:()=>{return SkyEngine.Node},init:(e,t,r)=>{let n,i,o={},a=t.setStateNode=(e=>{let r=e.state,n=e.node;void 0!==o[name]&&o[name].remove(),n.hide(),t.append(n),o[r]=n});EACH(r.stateNodes,(e,t)=>{a({state:t,node:e})});let s=t.setState=((e,t)=>{void 0!==i&&(o[n].off("animationend",i),i=void 0),n=e,i=t,EACH(o,(e,t)=>{e.hide()});let r=o[n];void 0!==r&&r.show(),void 0!==i&&r.on("animationend",i)});s(r.baseState);t.getState=(()=>{return n})}}),SkyEngine.SubScreen=CLASS({preset:()=>{return SkyEngine.Node},init:(e,t,r)=>{let n=r.style,i=r.width,o=r.height,a=r.isDebugMode,s=DIV({style:COMBINE([{position:"relative"},n])}),u=CANVAS().appendTo(s),l=new PIXI.autoDetectRenderer({view:u.getEl(),transparent:!0}),c=new PIXI.Container;c.addChild(e.getPixiContainer());let h,d,f,p,g,v,m,y,_,x,b,S=0,T=0;if(a===!0||BROWSER_CONFIG.SkyEngine.isDebugMode===!0){let e=DIV({style:{position:"absolute",left:5,top:5,fontSize:12,zIndex:999999}}).appendTo(s);INTERVAL(.1,()=>{void 0!==f&&(e.empty(),e.append("FPS: "+parseInt(1/f)))})}EACH(["tap","touchstart","touchend"],e=>{u.on(e,r=>{let n,a=t=>{if(n!==!0&&(REVERSE_EACH(t.getChildren(),a),t.checkIsRemoved()!==!0&&t.checkIsEventExists(e)===!0&&t.checkTouch(r.getLeft()-u.getLeft()-i/2,r.getTop()-u.getTop()-o/2)===!0)){let i=SkyEngine.E(r);t.fireEvent({eventName:e,e:i}),i.checkIsBubblingStoped()===!0&&(n=!0)}};a(t)})});let w=LOOP(e=>{f=e,f>.03&&(f=.03),t.checkIsPaused()!==!0&&(SkyEngine.Delay.step(f),SkyEngine.Interval.step(f),t.step(f)),D.step(f),c.x=i/2-A(),c.y=o/2-I(),l.render(c)}),E=t.setSize=(e=>{i=e.width,o=e.height,s.addStyle({width:i,height:o}),u.addStyle({width:i,height:o}),u.setSize({width:i*devicePixelRatio,height:o*devicePixelRatio}),l.resize(i,o)});E({width:i,height:o}),t.on("remove",()=>{w.remove()});let C,R=t.cameraFollowX=(e=>{v=e.target,p=e.centerX,void 0===p&&(p=0),y=e.minX,x=e.maxX}),O=t.cameraFollowY=(e=>{m=e.target,g=e.centerY,void 0===g&&(g=0),_=e.minY,b=e.maxY}),M=(t.cameraFollow=(e=>{R(e),O(e)}),t.cameraUnfollowX=(()=>{v=void 0,y=void 0,x=void 0,S=0})),P=t.cameraUnfollowY=(()=>{m=void 0,_=void 0,b=void 0,T=0}),A=(t.cameraUnfollow=(()=>{M(),P()}),t.getCameraFollowX=(()=>{return void 0===v?S:v.checkIsRemoved()===!0?(v=void 0,S):(S=v.getRealX()-p,void 0!==y&&S<y?y:void 0!==x&&S>x?x:S)})),I=t.getCameraFollowY=(()=>{return void 0===m?T:m.checkIsRemoved()===!0?(m=void 0,T):(T=m.getRealY()-g,void 0!==_&&T<_?_:void 0!==b&&T>b?b:T)}),D=(t.getLeft=(()=>{return h}),t.getTop=(()=>{return d}),t.getWidth=(()=>{return i}),t.getHeight=(()=>{return o}),t.getCanvas=(()=>{return u}),t.getPixiRenderer=(()=>{return l}),SkyEngine.Node());t.getNonePausableNode=(()=>{return D});OVERRIDE(t.appendTo,e=>{C=t.appendTo=(e=>{return s.appendTo(e),t})});let k;OVERRIDE(t.remove,e=>{k=t.remove=(()=>{e(),s.remove()})})}}),SkyEngine.Circle=CLASS(e=>{let t=(e.findRaycastPoints=((e,t,r,n,i,o,a,s,u,l)=>{let c=l*e+u*t-r,h=-u*e+l*t-n;i*=a,o*=s;let d=i/2,f=o/2,p=99999,g=(1-c*p/d/d*f*f)/h+n;p+=r;let v=-99999,m=(1-c*v/d/d*f*f)/h+n;return v+=r,SkyEngine.Line.findCircleIntersectionPoints(0,0,p,g,v,m,1,1,0,1,r,n,i,o,1,1,u,l)}),e.generateGraphics=(e=>{let t=e.width,r=e.height,n=SkyEngine.Figure.generateGraphics(e);return n.drawEllipse(0,0,t/2,r/2,0,0,2*Math.PI),n}));return{preset:()=>{return SkyEngine.Figure},init:(r,n,i)=>{let o=i.width,a=i.height,s=i.color,u=i.border,l=SkyEngine.Util.Collision.checkPointInCircle,c=SkyEngine.Util.Collision.checkLineCircle,h=SkyEngine.Util.Collision.checkRectCircle,d=SkyEngine.Util.Collision.checkCircleCircle;n.setWidth=(e=>{o=e}),n.getWidth=(()=>{return o}),n.setHeight=(e=>{a=e}),n.getHeight=(()=>{return a});OVERRIDE(n.checkPoint,e=>{n.checkPoint=((t,r)=>{return l(t,r,n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0||e(t,r)===!0})});let f;OVERRIDE(n.checkArea,e=>{f=n.checkArea=(t=>{if(t.type===SkyEngine.Line){if(c(t.getDrawingX(),t.getDrawingY(),t.getStartX(),t.getStartY(),t.getEndX(),t.getEndY(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos(),n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0)return!0}else if(t.type===SkyEngine.Rect){if(h(t.getDrawingX(),t.getDrawingY(),t.getWidth(),t.getHeight(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos(),n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0)return!0}else if(t.type===SkyEngine.Circle&&d(t.getDrawingX(),t.getDrawingY(),t.getWidth(),t.getHeight(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos(),n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0)return!0;return e(t)})});let p;OVERRIDE(n.checkOffScreen,e=>{p=n.checkOffScreen=(()=>{return h(SkyEngine.Screen.getCameraFollowX(),SkyEngine.Screen.getCameraFollowY(),SkyEngine.Screen.getWidth(),SkyEngine.Screen.getHeight(),1,1,0,1,n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())!==!0&&e()})}),r.setGraphics(t({width:o,height:a,color:s,border:u,blendMode:n.getBlendMode()}));let g;OVERRIDE(n.drawArea,e=>{g=n.drawArea=(t=>{t.drawEllipse(n.getX(),n.getY(),o/2,a/2),e(t)})});n.findRaycastPoints=((t,r)=>{return e.findRaycastPoints(t,r,n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())})}}}),SkyEngine.Line=CLASS(e=>{let t=e.findLineIntersectionPoint=((e,t,r,n,i,o,a,s,u,l,c,h,d,f,p,g,v,m,y,_)=>{if(SkyEngine.Util.Collision.checkLineLine(e,t,r,n,i,o,a,s,u,l,c,h,d,f,p,g,v,m,y,_)===!0){r*=a,n*=s;let x=e+l*r+u*n,b=t+u*r+l*n;i*=a,o*=s;let S=e+l*i+u*o,T=t+u*i+l*o;d*=v,f*=m;let w=c+_*d+y*f,E=h+y*d+_*f;p*=v,g*=m;let C=c+_*p+y*g,R=h+y*p+_*g,O=(S-x)*(R-E)-(C-w)*(T-b);return{x:((S*b-T*x)*(C-w)-(S-x)*(C*E-R*w))/O,y:((S*b-T*x)*(R-E)-(T-b)*(C*E-R*w))/O}}}),r=e.findRectIntersectionPoints=((e,r,n,i,o,a,s,u,l,c,h,d,f,p,g,v,m,y)=>{let _=[];n*=s,i*=u;let x=e+c*n+l*i,b=r+l*n+c*i;o*=s,a*=u;let S,T,w,E,C,R,O,M,P=e+c*o+l*a,A=r+l*o+c*a;f*=g/2,p*=v/2;let I=y*f,D=y*p,k=-m*f,F=-m*p;S=h-I-F,T=d+k-D,w=h+I-F,E=d-k-D,C=h+I+F,R=d-k+D,O=h-I+F,M=d+k+D;let L=t(0,0,x,b,P,A,1,1,0,1,0,0,S,T,w,E,1,1,0,1);return void 0!==L&&_.push(L),L=t(0,0,x,b,P,A,1,1,0,1,0,0,w,E,C,R,1,1,0,1),void 0!==L&&_.push(L),L=t(0,0,x,b,P,A,1,1,0,1,0,0,C,R,O,M,1,1,0,1),void 0!==L&&_.push(L),L=t(0,0,x,b,P,A,1,1,0,1,0,0,O,M,S,T,1,1,0,1),void 0!==L&&_.push(L),_}),n=e.findCircleIntersectionPoints=((e,t,r,n,i,o,a,s,u,l,c,h,d,f,p,g,v,m)=>{let y=[];if(SkyEngine.Util.Collision.checkLineCircle(e,t,r,n,i,o,a,s,u,l,c,h,d,f,p,g,v,m)===!0){r*=a,n*=s;let _=e+l*r+u*n-c,x=t+u*r+l*n-h;i*=a,o*=s;let b=e+l*i+u*o-c,S=t+u*i+l*o-h,T=m*_+v*x,w=-v*_+m*x,E=m*b+v*S,C=-v*b+m*S;d*=p,f*=g;let R=d/2,O=f/2,M=(C-w)/(E-T),P=w-M*T,A=M*M*R*R+O*O,I=2*M*P*R*R,D=R*R*P*P-R*R*O*O,k=I*I-4*A*D;if(k>0){let e=(-I+Math.sqrt(k))/(2*A),t=M*e+P,r=(-I-Math.sqrt(k))/(2*A),n=M*r+P;(T<E?T:E)<=e&&e<=(T<E?E:T)&&(w<C?w:C)<=t&&t<=(w<C?C:w)&&y.push({x:m*e-v*t+c,y:v*e+m*t+h}),(T<E?T:E)<=r&&r<=(T<E?E:T)&&(w<C?w:C)<=n&&n<=(w<C?C:w)&&y.push({x:m*r-v*n+c,y:v*r+m*n+h})}else if(0===k){let e=-I/(2*A),t=M*e+P;(T<E?T:E)<=e&&e<=(T<E?E:T)&&(w<C?w:C)<=t&&t<=(w<C?C:w)&&y.push({x:m*e-v*t+c,y:v*e+m*t+h})}}return y}),i=e.findPolygonIntersectionPoints=((e,r,n,i,o,a,s,u,l,c,h,d,f,p,g,v,m)=>{let y=[];n*=s,i*=u;let _=e+c*n+l*i,x=r+l*n+c*i;o*=s,a*=u;let b=e+c*o+l*a,S=r+l*o+c*a,T=f.length;for(let w=0,E=T-1;w<T;E=w,w+=1){let e=f[w].x*p,r=f[w].y*g,n=f[E].x*p,i=f[E].y*g,o=h+m*e-v*r,a=d+v*e+m*r,s=h+m*n-v*i,u=d+v*n+m*i,l=t(0,0,_,x,b,S,1,1,0,1,0,0,o,a,s,u,1,1,0,1);void 0!==l&&y.push(l)}return y}),o=e.generateGraphics=(e=>{let t=e.startX,r=e.startY,n=e.endX,i=e.endY,o=(e.border,SkyEngine.Figure.generateGraphics(e));return o.moveTo(t,r),o.lineTo(n,i),o});return{preset:()=>{return SkyEngine.Figure},init:(e,a,s)=>{let u=s.startX,l=s.startY,c=s.endX,h=s.endY,d=s.border,f=s.isEndless,p=SkyEngine.Util.Collision.checkLineLine,g=SkyEngine.Util.Collision.checkLineRect;f===!0&&(Math.abs(c-u)<Math.abs(h-l)?(c=((h-l<0?-999999:999999)-l)/(h-l)*(c-u)+u,h=h-l<0?-999999:999999):(h=(h-l)/(c-u)*((c-u<0?-999999:999999)-u)+l,c=c-u<0?-999999:999999));let v;a.setStartX=(e=>{u=e}),a.getStartX=(()=>{return u}),a.setStartY=(e=>{l=e}),a.getStartY=(()=>{return l}),a.setEndX=(e=>{c=e}),a.getEndX=(()=>{return c}),a.setEndY=(e=>{h=e}),a.getEndY=(()=>{return h});OVERRIDE(a.checkArea,e=>{v=a.checkArea=(t=>{return t.type===SkyEngine.Line&&p(t.getDrawingX(),t.getDrawingY(),t.getStartX(),t.getStartY(),t.getEndX(),t.getEndY(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos(),a.getDrawingX(),a.getDrawingY(),u,l,c,h,a.getRealScaleX(),a.getRealScaleY(),a.getRealSin(),a.getRealCos())===!0||e(t)})});let m;OVERRIDE(a.checkOffScreen,e=>{m=a.checkOffScreen=(()=>{return g(a.getDrawingX(),a.getDrawingY(),u,l,c,h,a.getRealScaleX(),a.getRealScaleY(),a.getRealSin(),a.getRealCos(),SkyEngine.Screen.getCameraFollowX(),SkyEngine.Screen.getCameraFollowY(),SkyEngine.Screen.getWidth(),SkyEngine.Screen.getHeight(),1,1,0,1)!==!0&&e()})}),e.setGraphics(o({startX:u,startY:l,endX:c,endY:h,border:d,blendMode:a.getBlendMode()}));let y;OVERRIDE(a.drawArea,e=>{y=a.drawArea=(t=>{t.moveTo(a.getX()+u,a.getY()+l),t.lineTo(a.getX()+c,a.getY()+h),e(t)})});a.findIntersectionPoints=(e=>{let o=[];if(e.checkIsInstanceOf(SkyEngine.Line)===!0){let r=t(a.getDrawingX(),a.getDrawingY(),u,l,c,h,a.getRealScaleX(),a.getRealScaleY(),a.getRealSin(),a.getRealCos(),e.getDrawingX(),e.getDrawingY(),e.getStartX(),e.getStartY(),e.getEndX(),e.getEndY(),e.getRealScaleX(),e.getRealScaleY(),e.getRealSin(),e.getRealCos());void 0!==r&&o.push(r)}else e.checkIsInstanceOf(SkyEngine.Rect)===!0?o=r(a.getDrawingX(),a.getDrawingY(),u,l,c,h,a.getRealScaleX(),a.getRealScaleY(),a.getRealSin(),a.getRealCos(),e.getDrawingX(),e.getDrawingY(),e.getWidth(),e.getHeight(),e.getRealScaleX(),e.getRealScaleY(),e.getRealSin(),e.getRealCos()):e.checkIsInstanceOf(SkyEngine.Circle)===!0?o=n(a.getDrawingX(),a.getDrawingY(),u,l,c,h,a.getRealScaleX(),a.getRealScaleY(),a.getRealSin(),a.getRealCos(),e.getDrawingX(),e.getDrawingY(),e.getWidth(),e.getHeight(),e.getRealScaleX(),e.getRealScaleY(),e.getRealSin(),e.getRealCos()):e.checkIsInstanceOf(SkyEngine.Polygon)===!0&&(o=i(a.getDrawingX(),a.getDrawingY(),u,l,c,h,a.getRealScaleX(),a.getRealScaleY(),a.getRealSin(),a.getRealCos(),e.getDrawingX(),e.getDrawingY(),e.getPoints(),e.getRealScaleX(),e.getRealScaleY(),e.getRealSin(),e.getRealCos()));return o})}}}),SkyEngine.Polygon=CLASS(e=>{let t=(e.findRaycastPoints=((e,t,r,n,i,o,a,s,u)=>{let l,c,h,d,f,p,g=i.length;for(let v=0;v<g;v+=1){let g=i[v].x*o,m=i[v].y*a,y=r+u*g-s*m,_=n+s*g+u*m,x=y-e,b=_-t,S=Math.acos(x/Math.sqrt(x*x+b*b));b>0&&(S=Math.PI+Math.PI-S),(void 0==l||l>S)&&(l=S,c=y,h=_),(void 0==d||d<S)&&(d=S,f=y,p=_)}return void 0===l?[]:[{x:c,y:h},{x:f,y:p}]}),e.generateGraphics=(e=>{let t=e.points,r=SkyEngine.Figure.generateGraphics(e);if(t.length>0){r.moveTo(t[0].x,t[0].y);for(let e=1;e<t.length;e+=1){let n=t[e];r.lineTo(n.x,n.y)}r.lineTo(t[0].x,t[0].y)}return r}));return{preset:()=>{return SkyEngine.Figure},init:(r,n,i)=>{let o=i.points,a=i.color,s=i.border,u=SkyEngine.Util.Collision.checkPointInPolygon,l=SkyEngine.Util.Collision.checkLinePolygon,c=SkyEngine.Util.Collision.checkRectPolygon,h=SkyEngine.Util.Collision.checkCirclePolygon,d=SkyEngine.Util.Collision.checkPolygonPolygon;n.getPoints=(()=>{return o}),n.setColor=(e=>{e=_color}),n.getColor=(()=>{return a});OVERRIDE(n.checkPoint,e=>{n.checkPoint=((t,r)=>{return u(t,r,n.getDrawingX(),n.getDrawingY(),o,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0||e(t,r)===!0})});let f;OVERRIDE(n.checkArea,e=>{f=n.checkArea=(t=>{if(t.type===SkyEngine.Line){if(l(t.getDrawingX(),t.getDrawingY(),t.getStartX(),t.getStartY(),t.getEndX(),t.getEndY(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos(),n.getDrawingX(),n.getDrawingY(),o,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0)return!0}else if(t.type===SkyEngine.Rect){if(c(t.getDrawingX(),t.getDrawingY(),t.getWidth(),t.getHeight(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos(),n.getDrawingX(),n.getDrawingY(),o,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0)return!0}else if(t.type===SkyEngine.Circle){if(h(t.getDrawingX(),t.getDrawingY(),t.getWidth(),t.getHeight(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos(),n.getDrawingX(),n.getDrawingY(),o,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0)return!0}else if(t.type===SkyEngine.Polygon&&d(t.getDrawingX(),t.getDrawingY(),t.getPoints(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos(),n.getDrawingX(),n.getDrawingY(),o,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0)return!0;return e(t)})});let p;OVERRIDE(n.checkOffScreen,e=>{p=n.checkOffScreen=(()=>{return c(SkyEngine.Screen.getCameraFollowX(),SkyEngine.Screen.getCameraFollowY(),SkyEngine.Screen.getWidth(),SkyEngine.Screen.getHeight(),1,1,0,1,n.getDrawingX(),n.getDrawingY(),o,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())!==!0&&e()})}),r.setGraphics(t({points:o,color:a,border:s,blendMode:n.getBlendMode()}));let g;OVERRIDE(n.drawArea,e=>{g=n.drawArea=(t=>{if(o.length>0){t.moveTo(o[0].x,o[0].y);for(let e=1;e<o.length;e+=1){let r=o[e];t.lineTo(r.x,r.y)}t.lineTo(o[0].x,o[0].y)}e(t)})});n.findRaycastPoints=((t,r)=>{return e.findRaycastPoints(t,r,n.getDrawingX(),n.getDrawingY(),o,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())})}}}),SkyEngine.Rect=CLASS(e=>{let t=(e.findRaycastPoints=((e,t,r,n,i,o,a,s,u,l)=>{let c,h,d,f,p,g,v,m;i*=a,o*=s;let y=l*i/2,_=l*o/2,x=-u*i/2,b=-u*o/2;c=r-y-b,h=n+x-_,d=r+y-b,f=n-x-_,p=r+y+b,g=n-x+_,v=r-y+b,m=n+x+_;let S=c-e,T=h-t,w=Math.acos(S/Math.sqrt(S*S+T*T));T>0&&(w=Math.PI+Math.PI-w);let E=w,C=c,R=h,O=w,M=c,P=h;return S=d-e,T=f-t,w=Math.acos(S/Math.sqrt(S*S+T*T)),T>0&&(w=Math.PI+Math.PI-w),E>w&&(E=w,C=d,R=f),O<w&&(O=w,M=d,P=f),S=p-e,T=g-t,w=Math.acos(S/Math.sqrt(S*S+T*T)),T>0&&(w=Math.PI+Math.PI-w),E>w&&(E=w,C=p,R=g),O<w&&(O=w,M=p,P=g),S=v-e,T=m-t,w=Math.acos(S/Math.sqrt(S*S+T*T)),T>0&&(w=Math.PI+Math.PI-w),E>w&&(E=w,C=v,R=m),O<w&&(O=w,M=v,P=m),[{x:C,y:R},{x:M,y:P}]}),e.generateGraphics=(e=>{let t=e.width,r=e.height,n=SkyEngine.Figure.generateGraphics(e);return n.drawRect(-t/2,-r/2,t,r),n}));return{preset:()=>{return SkyEngine.Figure},init:(r,n,i)=>{let o=i.width,a=i.height,s=i.color,u=i.border,l=SkyEngine.Util.Collision.checkPointInRect,c=SkyEngine.Util.Collision.checkLineRect,h=SkyEngine.Util.Collision.checkRectRect;n.setWidth=(e=>{o=e}),n.getWidth=(()=>{return o}),n.setHeight=(e=>{a=e}),n.getHeight=(()=>{return a}),n.setColor=(e=>{e=_color}),n.getColor=(()=>{return s});OVERRIDE(n.checkPoint,e=>{n.checkPoint=((t,r)=>{return l(t,r,n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0||e(t,r)===!0})});let d;OVERRIDE(n.checkArea,e=>{d=n.checkArea=(t=>{if(t.type===SkyEngine.Line){if(c(t.getDrawingX(),t.getDrawingY(),t.getStartX(),t.getStartY(),t.getEndX(),t.getEndY(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos(),n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0)return!0}else if(t.type===SkyEngine.Rect&&h(t.getDrawingX(),t.getDrawingY(),t.getWidth(),t.getHeight(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos(),n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())===!0)return!0;return e(t)})});let f;OVERRIDE(n.checkOffScreen,e=>{f=n.checkOffScreen=(()=>{return h(SkyEngine.Screen.getCameraFollowX(),SkyEngine.Screen.getCameraFollowY(),SkyEngine.Screen.getWidth(),SkyEngine.Screen.getHeight(),1,1,0,1,n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())!==!0&&e()})}),r.setGraphics(t({width:o,height:a,color:s,border:u,blendMode:n.getBlendMode()}));let p;OVERRIDE(n.drawArea,e=>{p=n.drawArea=(t=>{t.drawRect(n.getX()-o/2,n.getY()-a/2,o,a),e(t)})});n.findRaycastPoints=((t,r)=>{return e.findRaycastPoints(t,r,n.getDrawingX(),n.getDrawingY(),o,a,n.getRealScaleX(),n.getRealScaleY(),n.getRealSin(),n.getRealCos())})}}}),SkyEngine.Background=CLASS({preset:()=>{return SkyEngine.FixedNode},init:(e,t,r)=>{let n=r.src,i=r.isNotToRepeatX,o=r.isNotToRepeatY,a=r.leftMargin,s=r.rightMargin,u=r.topMargin,l=r.bottomMargin;void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=0);let c,h,d,f,p=new Image,g=()=>{if(i===!0&&o===!0){if(0===f.length){let e=new PIXI.Sprite.fromImage(n);e.x=-c/2,e.y=-h/2,e.zIndex=-9999999,e.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()),f.push(e),t.addToPixiContainer(e)}}else if(i===!0){let e=-h/2,r=(SkyEngine.Screen.getCameraFollowY()-SkyEngine.Screen.getY())/SkyEngine.Screen.getRealScaleY()/t.getRealScaleY(),i=SkyEngine.Screen.getHeight()/2/SkyEngine.Screen.getRealScaleY()/t.getRealScaleY();for(let o=0;o<f.length;o+=1){let e=f[o];(e.y+t.getY()<r-i-(u+h+l)||e.y+t.getY()>r+i)&&(t.removeFromPixiContainer(e),f.splice(o,1),o-=1)}for(;r-i<e+t.getY();)e-=u+h+l;for(;e+t.getY()<r+i;){let r;for(let i=0;i<f.length;i+=1){let t=f[i];t.y===e&&(r=!0)}if(r!==!0){let r=new PIXI.Sprite.fromImage(n);r.x=-c/2,r.y=e,r.zIndex=-9999999,r.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()),f.push(r),t.addToPixiContainer(r)}e+=u+h+l}}else if(o===!0){let e=-c/2,r=(SkyEngine.Screen.getCameraFollowX()-SkyEngine.Screen.getX())/SkyEngine.Screen.getRealScaleX()/t.getRealScaleX(),i=SkyEngine.Screen.getWidth()/2/SkyEngine.Screen.getRealScaleX()/t.getRealScaleX();for(let o=0;o<f.length;o+=1){let e=f[o];(e.x+t.getX()<r-i-(a+c+s)||e.x+t.getX()>r+i)&&(t.removeFromPixiContainer(e),f.splice(o,1),o-=1)}for(;r-i<e+t.getX();)e-=a+c+s;for(;e+t.getX()<r+i;){let r;for(let i=0;i<f.length;i+=1){let t=f[i];t.x===e&&(r=!0)}if(r!==!0){let r=new PIXI.Sprite.fromImage(n);r.x=e,r.y=-h/2,r.zIndex=-9999999,r.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()),f.push(r),t.addToPixiContainer(r)}e+=a+c+s}}else{let e=-c/2,r=-h/2,i=(SkyEngine.Screen.getCameraFollowX()-SkyEngine.Screen.getX())/SkyEngine.Screen.getRealScaleX()/t.getRealScaleX(),o=(SkyEngine.Screen.getCameraFollowY()-SkyEngine.Screen.getY())/SkyEngine.Screen.getRealScaleY()/t.getRealScaleY(),d=SkyEngine.Screen.getWidth()/2/SkyEngine.Screen.getRealScaleX()/t.getRealScaleX(),p=SkyEngine.Screen.getHeight()/2/SkyEngine.Screen.getRealScaleY()/t.getRealScaleY();for(let g=0;g<f.length;g+=1){let e=f[g];(e.x+t.getX()<i-d-(a+c+s)||e.y+t.getY()<o-p-(u+h+l)||e.x+t.getX()>i+d||e.y+t.getY()>o+p)&&(t.removeFromPixiContainer(e),f.splice(g,1),g-=1)}for(;i-d<e+t.getX();)e-=a+c+s;for(;o-p<r+t.getY();)r-=u+h+l;for(;r+t.getY()<o+p;){let o=e;for(;o+t.getX()<i+d;){let e;for(let i=0;i<f.length;i+=1){let t=f[i];t.x===o&&t.y===r&&(e=!0)}if(e!==!0){let e=new PIXI.Sprite.fromImage(n);e.x=o,e.y=r,e.zIndex=-9999999,e.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()),f.push(e),t.addToPixiContainer(e)}o+=a+c+s}r+=u+h+l}}};p.onload=(()=>{if(p.onload=void 0,t.checkIsRemoved()!==!0){if(c=p.width,h=p.height,i!==!0&&o!==!0&&0===a&&0===s&&0===u&&0===l){let e=SkyEngine.Screen.getWidth()/SkyEngine.Screen.getRealScaleX()/t.getRealScaleX(),r=SkyEngine.Screen.getHeight()/SkyEngine.Screen.getRealScaleY()/t.getRealScaleY();d=new PIXI.extras.TilingSprite.fromImage(n,e,r),d.anchor.x=.5,d.anchor.y=.5,d.tilePosition.x=(e-c)/2,d.tilePosition.y=(r-h)/2,d.zIndex=-9999999,d.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()),t.addToPixiContainer(d)}else f=[],g();t.fireEvent("load")}}),p.src=n;let v;OVERRIDE(t.step,e=>{v=t.step=(r=>{if(e(r),void 0!==d){let e=SkyEngine.Screen.getWidth()/SkyEngine.Screen.getRealScaleX()/t.getRealScaleX(),r=SkyEngine.Screen.getHeight()/SkyEngine.Screen.getRealScaleY()/t.getRealScaleY();d.x=-t.getX()+(SkyEngine.Screen.getCameraFollowX()-SkyEngine.Screen.getX())/SkyEngine.Screen.getRealScaleX()/t.getRealScaleX(),d.y=-t.getY()+(SkyEngine.Screen.getCameraFollowY()-SkyEngine.Screen.getY())/SkyEngine.Screen.getRealScaleY()/t.getRealScaleY(),d.tilePosition.x=(e-c)/2-d.x,d.tilePosition.y=(r-h)/2-d.y}else void 0!==f&&g()})});let m;OVERRIDE(t.remove,e=>{m=t.remove=(()=>{p.onload=void 0,p=void 0,d=void 0,f=void 0,e()})});e.getImg=(()=>{return p}),t.getWidth=(()=>{return c}),t.getHeight=(()=>{return h})}}),SkyEngine.Image=CLASS(e=>{return{preset:()=>{return SkyEngine.Node},init:(e,t,r)=>{let n=r.src,i=r.cropTop,o=r.cropRight,a=r.cropBottom,s=r.cropLeft;void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0);let u,l,c,h,d,f,p=SkyEngine.Util.Collision.checkRectRect,g=!1,v=()=>{if(t.checkIsRemoved()!==!0&&void 0!==c){void 0!==f&&t.removeFromPixiContainer(f);let e=c-s-o,r=h-i-a,n=new PIXI.Texture(new PIXI.BaseTexture(d),new PIXI.Rectangle(s,i,e,r));f=new PIXI.Sprite.from(n),f.x=-c/2+s,f.y=-h/2+i,f.zIndex=-9999999,f.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()),t.addToPixiContainer(f)}},m=t.setSrc=(e=>{n=e;let r=new Image;void 0===d&&(d=r),r.onload=(()=>{r.onload=void 0,t.checkIsRemoved()!==!0&&(c=r.width,h=r.height,d=r,v(),t.fireEvent("load"))}),r.src=n});m(n);let y;OVERRIDE(t.setBlendMode,e=>{y=t.setBlendMode=(r=>{e(r),void 0!==f&&(f.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()))})});let _;OVERRIDE(t.removeBlendMode,e=>{_=t.removeBlendMode=(()=>{e(),void 0!==f&&(f.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()))})});let x;OVERRIDE(t.checkPoint,e=>{x=t.checkPoint=((r,i)=>{if(void 0===u){if(g!==!0){let e=new Image;e.onload=(()=>{let t=e.width,r=e.height,n=CANVAS({style:{display:"none"},width:t,height:r}).appendTo(BODY),i=n.getContext("2d");i.drawImage(e,0,0,t,r),u=i.getImageData(0,0,t,r).data,i=void 0,n.remove(),e.onload=void 0}),e.src=n,g=!0}return e(r,i)===!0}let o=r-t.getDrawingX(),a=i-t.getDrawingY(),s=Math.cos(-t.getRealRadian()),l=Math.sin(-t.getRealRadian()),d=s*o-l*a,f=s*a+l*o;return d=parseInt((d+c*t.getRealScaleX()/2)/t.getRealScaleX()),f=parseInt((f+h*t.getRealScaleY()/2)/t.getRealScaleY()),d>=0&&d<c&&f>=0&&f<h&&u[4*(f*c+d)+3]>20||e(r,i)===!0})});let b;OVERRIDE(t.checkOffScreen,e=>{b=t.checkOffScreen=(()=>{return void 0!==c&&p(SkyEngine.Screen.getCameraFollowX(),SkyEngine.Screen.getCameraFollowY(),SkyEngine.Screen.getWidth(),SkyEngine.Screen.getHeight(),1,1,0,1,t.getDrawingX(),t.getDrawingY(),c,h,t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos())!==!0&&e()})});let S;OVERRIDE(t.remove,e=>{S=t.remove=(()=>{d.onload=void 0,d=void 0,f=void 0,u=void 0,l=void 0,e()})});e.getImg=(()=>{return d}),t.crop=(e=>{void 0!==e.top&&(i=e.top),void 0!==e.right&&(o=e.right),void 0!==e.bottom&&(a=e.bottom),void 0!==e.left&&(s=e.left),v()}),t.getWidth=(()=>{return c}),t.getHeight=(()=>{return h})}}}),SkyEngine.Silhouette=CLASS(e=>{return{preset:()=>{return SkyEngine.Node},init:(e,t,r)=>{let n,i,o,a=r.src,s=r.color,u=r.border,l=r.width,c=r.height,h=SkyEngine.Util.Collision.checkRectRect;if(void 0!==u){let e=u.split(" ");n=INTEGER(e[0]),i=e[1],o=e[2]}let d,f,p,g=t.setSrc=(e=>{a=e,d=new Image,d.onload=(()=>{if(d.onload=void 0,t.checkIsRemoved()!==!0){void 0===l&&(l=d.width),void 0===c&&(c=d.height);let e=CANVAS({style:{display:"none"},width:l,height:c}).appendTo(BODY),r=e.getContext("2d");r.save(),r.drawImage(d,0,0,d.width,d.height);let a=r.getImageData(0,0,l,c);f=a.data;let h,g=f.length;for(h=0;h<g;h+=4)f[h]=0,f[h+1]=0,f[h+2]=0;if(r.clearRect(0,0,l,c),void 0!==s&&(r.putImageData(a,0,0),r.globalCompositeOperation="source-in",r.rect(0,0,l,c),r.fillStyle=s,r.fill()),r.restore(),void 0!==u){let e=SkyEngine.Util.ImageData.convertImageDataToPolygonPoints(f,l);if(e.length>0){r.beginPath(),r.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t+=1){let n=e[t];r.lineTo(n.x,n.y)}r.lineTo(e[0].x,e[0].y),r.lineWidth=n,r.strokeStyle=o,"dashed"===i?r.setLineDash([5]):"dotted"===i&&r.setLineDash([2]),r.stroke(),r.closePath()}e=void 0}d.src=e.getEl().toDataURL(),a=void 0,r=void 0,e.remove(),p=new PIXI.Sprite.fromImage(d.src),p.x=-l/2,p.y=-c/2,p.zIndex=-9999999,p.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()),t.addToPixiContainer(p),t.fireEvent("load")}}),d.src=a});g(a);let v;OVERRIDE(t.setBlendMode,e=>{v=t.setBlendMode=(r=>{e(r),void 0!==p&&(p.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()))})});let m;OVERRIDE(t.removeBlendMode,e=>{m=t.removeBlendMode=(()=>{e(),void 0!==p&&(p.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()))})});let y;OVERRIDE(t.checkPoint,e=>{y=t.checkPoint=((r,n)=>{if(void 0===f)return e(r,n)===!0;let i=r-t.getDrawingX(),o=n-t.getDrawingY(),a=Math.cos(-t.getRealRadian()),s=Math.sin(-t.getRealRadian()),u=a*i-s*o,h=a*o+s*i;return u=parseInt((u+l*t.getRealScaleX()/2)/t.getRealScaleX()),h=parseInt((h+c*t.getRealScaleY()/2)/t.getRealScaleY()),u>=0&&u<l&&h>=0&&h<c&&f[4*(h*l+u)+3]>20||e(r,n)===!0})});let _;OVERRIDE(t.checkOffScreen,e=>{_=t.checkOffScreen=(()=>{return void 0!==l&&h(SkyEngine.Screen.getCameraFollowX(),SkyEngine.Screen.getCameraFollowY(),SkyEngine.Screen.getWidth(),SkyEngine.Screen.getHeight(),1,1,0,1,t.getDrawingX(),t.getDrawingY(),l,c,t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos())!==!0&&e()})});let x;OVERRIDE(t.remove,e=>{x=t.remove=(()=>{d.onload=void 0,d=void 0,p=void 0,f=void 0,e()})});e.getImg=(()=>{return d}),t.getWidth=(()=>{return l}),t.getHeight=(()=>{return c})}}}),SkyEngine.Sprite=CLASS({preset:()=>{return SkyEngine.Node},init:(e,t,r)=>{let n,i,o,a,s,u,l,c=r.src,h=r.srcs,d=r.spriteWidth,f=r.spriteHeight,p=r.fps,g=r.frameCount,v=SkyEngine.Util.Collision.checkRectRect,m=0,y=0,_=0,x=!1;void 0===p&&(p=0),void 0!==c&&(n=new Image,n.onload=(()=>{n.onload=void 0,t.checkIsRemoved()!==!0&&(u=n.width,l=n.height,void 0===d&&(d=void 0!==g?u/g:u),void 0===f&&(f=l),void 0===g&&(g=u/d*l/f),o=new PIXI.extras.TilingSprite.fromImage(c,d,f),o.x=-d/2,o.y=-f/2,o.zIndex=-9999999,o.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()),t.addToPixiContainer(o),t.fireEvent("load"))}),n.src=c),void 0!==h&&EACH(h,(e,r)=>{let n=new Image;void 0===i&&(i=[],a=[]),n.onload=(()=>{if(n.onload=void 0,t.checkIsRemoved()!==!0){u=n.width,l=n.height,void 0===d&&(d=u),void 0===f&&(f=l),void 0===g?g=1:g+=1;let i=new PIXI.Sprite.fromImage(e);i.x=-u/2,i.y=-l/2,i.zIndex=-9999999,i.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode()),a[r]=i,t.fireEvent("load")}}),n.src=e,i.push(n)});let b,S=(t.getFrame=(()=>{return y}),t.getBeforeFrame=(()=>{return _}),t.stop=(()=>{x=!0})),T=t.resume=(()=>{x=!1});OVERRIDE(t.hide,e=>{b=t.hide=(()=>{m=0,y=0,_=0,S(),e()})});let w;OVERRIDE(t.show,e=>{w=t.show=(()=>{m=0,y=0,_=0,T(),e()})});let E;OVERRIDE(t.setBlendMode,e=>{E=t.setBlendMode=(r=>{e(r),void 0!==o&&(o.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode())),void 0!==a&&EACH(a,e=>{e.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode())})})});let C;OVERRIDE(t.removeBlendMode,e=>{C=t.removeBlendMode=(()=>{e(),void 0!==o&&(o.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode())),void 0!==a&&EACH(a,e=>{e.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(t.getBlendMode())})})});let R;OVERRIDE(t.checkOffScreen,e=>{R=t.checkOffScreen=(()=>{return void 0!==u&&v(SkyEngine.Screen.getCameraFollowX(),SkyEngine.Screen.getCameraFollowY(),SkyEngine.Screen.getWidth(),SkyEngine.Screen.getHeight(),1,1,0,1,t.getDrawingX(),t.getDrawingY(),d,f,t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos())!==!0&&e()})});let O;OVERRIDE(t.step,e=>{O=t.step=(r=>{x!==!0&&(p>0&&(m+=p*r),void 0!==g&&m>=g&&(m-=g,t.fireEvent("animationend")),_=y,y=Math.floor(m),t.checkIsRemoved()!==!0&&(void 0!==a?(void 0!==s&&t.removeFromPixiContainer(s),s=a[t.getFrame()],void 0!==s&&t.addToPixiContainer(s)):void 0!==o&&(o.tilePosition.x=-d*Math.floor(m%(u/d)),o.tilePosition.y=-f*Math.floor(m/(u/d))),t.fireEvent("framechange"))),e(r)})});let M;OVERRIDE(t.remove,e=>{M=t.remove=(()=>{h=void 0,void 0!==n&&(n.onload=void 0,n=void 0),EACH(i,e=>{e.onload=void 0}),i=void 0,o=void 0,a=void 0,s=void 0,e()})});e.getImg=(()=>{return n}),e.getImgs=(()=>{return i}),e.getRealFrame=(()=>{return m}),t.getSpriteWidth=(()=>{return d}),t.getSpriteHeight=(()=>{return f}),t.getWidth=(()=>{return u}),t.getHeight=(()=>{return l})}}),SkyEngine.ParticleSystem=CLASS(()=>{let e=(e,t)=>{return Math.random()*(t-e)+e};return{preset:()=>{return SkyEngine.Node},init:(t,r,n)=>{let i,o,a=n.particleSrc,s=n.particleFigure,u=n.particleStartX,l=n.particleStartY,c=n.particleEndX,h=n.particleEndY,d=n.particleWidth,f=n.particleHeight,p=n.particlePoints,g=n.particleColor,v=n.particleBorder,m=n.particleColorR,y=n.minParticleColorR,_=n.maxParticleColorR,x=n.particleColorG,b=n.minParticleColorG,S=n.maxParticleColorG,T=n.particleColorB,w=n.minParticleColorB,E=n.maxParticleColorB,C=n.particleCenterX,R=n.particleCenterY,O=n.particleCount,M=n.minParticleCount,P=n.maxParticleCount,A=n.particleX,I=n.minParticleX,D=n.maxParticleX,k=n.particleY,F=n.minParticleY,L=n.maxParticleY,B=n.particleLifetime,N=n.minParticleLifetime,X=n.maxParticleLifetime,j=n.particleDirection,U=n.minParticleDirection,Y=n.maxParticleDirection,z=n.particleSpeed,W=n.minParticleSpeed,G=n.maxParticleSpeed,H=n.particleAccel,V=n.particleAccelX,q=n.particleAccelY,K=n.minParticleAccel,Z=n.maxParticleAccel,Q=n.particleScale,J=n.minParticleScale,$=n.maxParticleScale,ee=n.particleScalingSpeed,te=n.minParticleScalingSpeed,re=n.maxParticleScalingSpeed,ne=(n.isParticleAngleToDirection,n.particleAngle),ie=n.minParticleAngle,oe=n.maxParticleAngle,ae=n.particleRotationSpeed,se=n.minParticleRotationSpeed,ue=n.maxParticleRotationSpeed,le=n.particleAlpha,ce=n.minParticleAlpha,he=n.maxParticleAlpha,de=n.particleFadingSpeed,fe=n.minParticleFadingSpeed,pe=n.maxParticleFadingSpeed,ge=n.particleFadingAccel;void 0===m&&(m=0),void 0===y&&(y=m),void 0===_&&(_=m),void 0===x&&(x=0),void 0===b&&(b=x),void 0===S&&(S=x),void 0===T&&(T=0),void 0===w&&(w=T),void 0===E&&(E=T),void 0===C&&(C=0),void 0===R&&(R=0),void 0===O&&(O=1),void 0===M&&(M=O),void 0===P&&(P=O),void 0===A&&(A=0),void 0===I&&(I=A),void 0===D&&(D=A),void 0===k&&(k=0),void 0===F&&(F=k),void 0===L&&(L=k),void 0===N&&(N=B),void 0===X&&(X=B),void 0===U&&(U=j),void 0===Y&&(Y=j),void 0===W&&(W=z),void 0===G&&(G=z),void 0===V&&(V=0),void 0===q&&(q=0),void 0===H&&(H=0),void 0===K&&(K=H),void 0===Z&&(Z=H),void 0===Q&&(Q=1),void 0===J&&(J=Q),void 0===$&&($=Q),void 0===ee&&(ee=0),void 0===te&&(te=ee),void 0===re&&(re=ee),void 0===ne&&(ne=0),void 0===ie&&(ie=ne),void 0===oe&&(oe=ne),void 0===ae&&(ae=0),void 0===se&&(se=ae),i=se*Math.PI/180,void 0===ue&&(ue=ae),o=ue*Math.PI/180,void 0===le&&(le=1),void 0===ce&&(ce=le),void 0===he&&(he=le),void 0===de&&(de=0),void 0===fe&&(fe=de),void 0===pe&&(pe=de);let ve,me,ye;void 0!==a?(ye=new Image,ye.onload=(()=>{ve=ye.width,void 0===d&&(d=ve),me=ye.height,void 0===f&&(f=me),ye.onload=void 0,r.fireEvent("load")}),ye.src=a):r.fireEvent("load");let _e,xe,be=[];r.burst=(t=>{_e=t,REPEAT(e(M,P),()=>{let t,n=e(U,Y)*Math.PI/180,m=Math.sin(n),x=Math.cos(n),T=e(W,G),O=e(K,Z);if(void 0!==s){let e=g;void 0===e&&(e=(1<<24)+(RANDOM({min:y,max:_})<<16)+(RANDOM({min:b,max:S})<<8)+RANDOM({min:w,max:E})),"line"===s?t=SkyEngine.Line.generateGraphics({startX:u,startY:l,endX:c,endY:h,border:v,blendMode:r.getBlendMode()}):"rect"===s?t=SkyEngine.Rect.generateGraphics({width:d,height:f,color:e,border:v,blendMode:r.getBlendMode()}):"circle"===s?t=SkyEngine.Circle.generateGraphics({width:d,height:f,color:e,border:v,blendMode:r.getBlendMode()}):"polygon"===s&&(t=SkyEngine.Circle.generateGraphics({points:p,
color:e,border:v,blendMode:r.getBlendMode()}))}void 0!==a&&(t=new PIXI.Sprite.fromImage(a),t.anchor.x=.5,t.anchor.y=.5,t.zIndex=-9999999,t.blendMode=SkyEngine.Util.BlendMode.getPixiBlendMode(r.getBlendMode())),t.x+=e(I,D),t.y+=e(F,L),t.pivot.set(C,R);let M=e(J,$);t.scale.set(M,M),t.rotation=e(ie,oe)*Math.PI/180,t.alpha=e(ce,he),r.addToPixiContainer(t),be.push({time:0,lifetime:e(N,X),scalingSpeed:e(te,re),direction:n,speedX:T*x,speedY:T*m,accelX:O*x,accelY:O*m,rotationSpeedRadian:e(i,o),fadingSpeed:e(fe,pe),pixiGraphics:t})})});OVERRIDE(r.step,e=>{xe=r.step=(t=>{for(let n=0;n<be.length;n+=1){let e=be[n],i=e.pixiGraphics;if(e.time+=t,e.time>e.lifetime)be.splice(n,1),void 0!==i&&r.removeFromPixiContainer(i),void 0!==_e&&0===be.length&&_e(r);else{e.speedX+=V*t,e.speedY+=q*t,e.speedX+=e.accelX*t,e.speedY+=e.accelY*t,i.x+=e.speedX*t,i.y+=e.speedY*t;let r=i.scale.x+e.scalingSpeed*t;r<0&&(r=0),i.scale.set(r,r),i.rotation+=e.rotationSpeedRadian*t,i.alpha+=e.fadingSpeed*t,i.alpha<0&&(i.alpha=0),void 0!==ge&&(e.fadingSpeed+=ge*t)}if(void 0===be)break}e(t)})});let Se;OVERRIDE(r.remove,e=>{Se=r.remove=(()=>{void 0!==ye&&(ye.onload=void 0,ye=void 0),be=void 0,e()})})}}}),SkyEngine.ParticleSystemOnce=CLASS({preset:()=>{return SkyEngine.ParticleSystem},init:(e,t,r)=>{t.burst(e=>{e.remove()})}}),SkyEngine.CollisionTile=CLASS({preset:()=>{return SkyEngine.Tile}}),SkyEngine.HexagonTileMap=CLASS({preset:()=>{return SkyEngine.TileMap},init:(e,t,r)=>{let n,i=r.overlapHeight;OVERRIDE(t.addTile,r=>{n=t.addTile=(r=>{let n=r.row,o=r.col,a=e.createTile(r);void 0!==a&&(a.setPosition({x:o*t.getTileWidth()+n%2*t.getTileWidth()/2,y:n*(t.getTileHeight()-i)}),a.checkIsInstanceOf(SkyEngine.CollisionTile)===!0&&a.addCollider(SkyEngine.Polygon({points:[{x:0,y:-t.getTileHeight()/2},{x:t.getTileWidth()/2,y:-t.getTileHeight()/4},{x:t.getTileWidth()/2,y:t.getTileHeight()/4},{x:0,y:t.getTileHeight()/2},{x:-t.getTileWidth()/2,y:t.getTileHeight()/4},{x:-t.getTileWidth()/2,y:-t.getTileHeight()/4}]})))})});let o;OVERRIDE(t.moveTile,r=>{o=t.moveTile=((r,n)=>{let o=r.fromRow,a=r.fromCol,s=r.toRow,u=r.toCol,l=r.speed,c=r.accel,h=e.swapTile(r),d=h.fromTile,f=h.toTile;void 0!==d&&(void 0!==l||void 0!==c?(d.moveTo({x:u*t.getTileWidth()+s%2*t.getTileWidth()/2,y:s*(t.getTileHeight()-i),speed:l,accel:c},n),n=void 0):d.setPosition({x:u*t.getTileWidth()+s%2*t.getTileWidth()/2,y:s*(t.getTileHeight()-i)})),void 0!==f&&(void 0!==l||void 0!==c?(f.moveTo({x:a*t.getTileWidth()+o%2*t.getTileWidth()/2,y:o*(t.getTileHeight()-i),speed:l,accel:c},n),n=void 0):f.setPosition({x:a*t.getTileWidth()+o%2*t.getTileWidth()/2,y:o*(t.getTileHeight()-i)}))})});let a;OVERRIDE(t.findPath,e=>{a=t.findPath=(e=>{let r=e.startRow,n=e.startCol,i=e.endRow,o=e.endCol,a=[],s=[],u=(e,r,n)=>{if(void 0!==t.getTile({row:r,col:n})&&t.checkCollisionTile({row:r,col:n})!==!0){void 0===a[r]&&(a[r]=[]);let t=e.cost+1;(void 0===a[r][n]||a[r][n]>t)&&(a[r][n]=t,s.push({parent:e,row:r,col:n,cost:t}))}};for(u({cost:-1},r,n);s.length>0;){let e=s.shift();if(e.row===i&&e.col===o){let t=[],r=e;for(;r.cost>=0;)t.unshift({row:r.row,col:r.col}),r=r.parent;return t}e.row%2===0?(u(e,e.row-1,e.col-1),u(e,e.row-1,e.col),u(e,e.row,e.col+1),u(e,e.row+1,e.col),u(e,e.row+1,e.col-1),u(e,e.row,e.col-1)):(u(e,e.row-1,e.col),u(e,e.row-1,e.col+1),u(e,e.row,e.col+1),u(e,e.row+1,e.col+1),u(e,e.row+1,e.col),u(e,e.row,e.col-1))}})})}}),SkyEngine.IsometricTileMap=CLASS({preset:()=>{return SkyEngine.TileMap},init:(e,t,r)=>{let n;OVERRIDE(t.addTile,r=>{n=t.addTile=(r=>{let n=r.row,i=r.col,o=e.createTile(r);void 0!==o&&(o.setPosition({x:i*t.getTileWidth()+n%2*t.getTileWidth()/2,y:n*t.getTileHeight()/2}),o.checkIsInstanceOf(SkyEngine.CollisionTile)===!0&&o.addCollider(SkyEngine.Polygon({points:[{x:0,y:-t.getTileHeight()/2},{x:t.getTileWidth()/2,y:0},{x:0,y:t.getTileHeight()/2},{x:-t.getTileWidth()/2,y:0}]})))})});let i;OVERRIDE(t.moveTile,r=>{i=t.moveTile=((r,n)=>{let i=r.fromRow,o=r.fromCol,a=r.toRow,s=r.toCol,u=r.speed,l=r.accel,c=e.swapTile(r),h=c.fromTile,d=c.toTile;void 0!==h&&(void 0!==u||void 0!==l?(h.moveTo({x:s*t.getTileWidth()+a%2*t.getTileWidth()/2,y:a*t.getTileHeight()/2,speed:u,accel:l},n),n=void 0):h.setPosition({x:s*t.getTileWidth()+a%2*t.getTileWidth()/2,y:a*t.getTileHeight()/2})),void 0!==d&&(void 0!==u||void 0!==l?(d.moveTo({x:o*t.getTileWidth()+i%2*t.getTileWidth()/2,y:i*t.getTileHeight()/2,speed:u,accel:l},n),n=void 0):d.setPosition({x:o*t.getTileWidth()+i%2*t.getTileWidth()/2,y:i*t.getTileHeight()/2}))})});let o;OVERRIDE(t.findPath,e=>{o=t.findPath=(e=>{let r=e.startRow,n=e.startCol,i=e.endRow,o=e.endCol,a=[],s=[],u=(e,r,n)=>{if(void 0!==t.getTile({row:r,col:n})&&t.checkCollisionTile({row:r,col:n})!==!0){void 0===a[r]&&(a[r]=[]);let t=e.cost+1;(void 0===a[r][n]||a[r][n]>t)&&(a[r][n]=t,s.push({parent:e,row:r,col:n,cost:t}))}};for(u({cost:-1},r,n);s.length>0;){let e=s.shift();if(e.row===i&&e.col===o){let t=[],r=e;for(;r.cost>=0;)t.unshift({row:r.row,col:r.col}),r=r.parent;return t}e.row%2===0?(u(e,e.row-1,e.col-1),u(e,e.row-1,e.col),u(e,e.row+1,e.col-1),u(e,e.row+1,e.col)):(u(e,e.row-1,e.col),u(e,e.row-1,e.col+1),u(e,e.row+1,e.col),u(e,e.row+1,e.col+1))}})})}}),SkyEngine.Tile=CLASS({preset:()=>{return SkyEngine.Node}}),SkyEngine.TileMap=CLASS({preset:()=>{return SkyEngine.Node},init:(e,t,r)=>{let n=r.tileWidth,i=r.tileHeight,o=r.tileSet,a=r.tileKeyMap;void 0===o&&(o={}),void 0===a&&(a=[]);let s,u=[],l=(t.getTileWidth=(()=>{return n}),t.getTileHeight=(()=>{return i}),e.createTile=(e=>{let r=e.row,n=e.col,i=e.tile,s=e.key;return void 0!==s&&void 0!==o[s]&&(i=o[s](r,n),void 0===a[r]&&(a[r]=[]),a[r][n]=s),void 0!==i&&(t.append(i),void 0===u[r]&&(u[r]=[]),u[r][n]=i),i})),c=(t.addTile=(e=>{let t=e.row,r=e.col,o=l(e);void 0!==o&&(o.setPosition({x:r*n,y:t*i}),o.checkIsInstanceOf(SkyEngine.CollisionTile)===!0&&o.addCollider(SkyEngine.Rect({width:n,height:i})))}),t.getTileKey=(e=>{let t=e.row,r=e.col;if(void 0!==a&&void 0!==a[t])return a[t][r]}),t.getTile=(e=>{let t=e.row,r=e.col;if(void 0!==u[t])return u[t][r]})),h=e.swapTile=(e=>{let t,r=e.fromRow,n=e.fromCol,i=e.toRow,o=e.toCol;void 0===a[i]?a[i]=[]:t=a[i][o],void 0===a[r]?a[r]=[]:a[i][o]=a[r][n],a[r][n]=t;let s;void 0!==u[r]&&(s=u[r][n]);let l;return void 0!==u[i]&&(l=u[i][o]),void 0===u[i]&&(u[i]=[]),u[i][o]=s,void 0===l?void 0!==u[r]&&(u[r][n]=void 0):(void 0===u[r]&&(u[r]=[]),u[r][n]=l),{fromTile:s,toTile:l}});t.moveTile=((e,t)=>{let r=e.fromRow,o=e.fromCol,a=e.toRow,s=e.toCol,u=e.speed,l=e.accel,c=h(e),d=c.fromTile,f=c.toTile;void 0!==d&&(void 0!==u||void 0!==l?(d.moveTo({x:s*n,y:a*i,speed:u,accel:l},t),t=void 0):d.setPosition({x:s*n,y:a*i})),void 0!==f&&(void 0!==u||void 0!==l?(f.moveTo({x:o*n,y:r*i,speed:u,accel:l},t),t=void 0):f.setPosition({x:o*n,y:r*i}))}),t.removeTile=(e=>{let t=e.row,r=e.col;void 0!==a[t]&&(a[t][r]=void 0),void 0!==u[t]&&void 0!==u[t][r]&&(u[t][r].remove(),u[t][r]=void 0)});OVERRIDE(t.empty,e=>{s=t.empty=(()=>{a=[],u=[],e()})});let d=t.checkCollisionTile=(e=>{let t=e.row,r=e.col;return void 0!==u[t]&&void 0!==u[t][r]&&u[t][r].checkIsInstanceOf(SkyEngine.CollisionTile)===!0});t.findPath=(e=>{let t=e.startRow,r=e.startCol,n=e.endRow,i=e.endCol,o=[],a=[],s=(e,t,r)=>{if(void 0!==c({row:t,col:r})&&d({row:t,col:r})!==!0){void 0===o[t]&&(o[t]=[]);let n=e.cost+1;(void 0===o[t][r]||o[t][r]>n)&&(o[t][r]=n,a.push({parent:e,row:t,col:r,cost:n}))}};for(s({cost:-1},t,r);a.length>0;){let e=a.shift();if(e.row===n&&e.col===i){let t=[],r=e;for(;r.cost>=0;)t.unshift({row:r.row,col:r.col}),r=r.parent;return t}s(e,e.row-1,e.col),s(e,e.row,e.col+1),s(e,e.row+1,e.col),s(e,e.row,e.col-1)}})},afterInit:(e,t,r)=>{let n=r.tileMap,i=r.tileKeyMap;void 0!==n&&(EACH(n,(e,r)=>{EACH(e,(e,n)=>{void 0!==e&&t.addTile({row:r,col:n,tile:e})})}),n=void 0),void 0!==i&&EACH(i,(e,r)=>{EACH(e,(e,n)=>{t.addTile({row:r,col:n,key:e})})})}}),SkyEngine("Util").BlendMode=OBJECT({init:(e,t)=>{t.getPixiBlendMode=(e=>{return"multiply"===e?PIXI.BLEND_MODES.MULTIPLY:"screen"===e?PIXI.BLEND_MODES.SCREEN:"overlay"===e?PIXI.BLEND_MODES.OVERLAY:PIXI.BLEND_MODES.NORMAL})}}),SkyEngine("Util").Collision=OBJECT({init:(e,t)=>{let r=(e,t,r)=>{return(t-e)*(r-e)<=0},n=t.checkPointInRect=((e,t,n,i,o,a,s,u,l,c)=>{e-=n,t-=i;let h=n+c*e+l*t,d=i-l*e+c*t;return o*=s,a*=u,n-=o/2,i-=a/2,r(h,n,n+o)===!0&&r(d,i,i+a)===!0}),i=t.checkPointInCircle=((e,t,r,n,i,o,a,s,u,l)=>{e-=r,t-=n,i*=a,o*=s;let c=2*(l*e+u*t)/i,h=2*(u*e-l*t)/o;return c*c+h*h<=1}),o=t.checkPointInPolygon=((e,t,r,n,i,o,a,s,u)=>{e-=r,t-=n;let l=r+u*e+s*t,c=n-s*e+u*t;l-=r,c-=n;let h=!1,d=i.length;for(let f=0,p=d-1;f<d;p=f,f+=1){let e=i[f].x*o,t=i[f].y*a,r=i[p].x*o,n=i[p].y*a;t>c!=n>c&&l<(r-e)*(c-t)/(n-t)+e&&(h=!h)}return h}),a=t.checkLineLine=((e,t,r,n,i,o,a,s,u,l,c,h,d,f,p,g,v,m,y,_)=>{r*=a,n*=s;let x=e+l*r+u*n,b=t+u*r+l*n;i*=a,o*=s;let S=e+l*i+u*o,T=t+u*i+l*o;d*=v,f*=m;let w=c+_*d+y*f,E=h+y*d+_*f;p*=v,g*=m;let C=c+_*p+y*g,R=h+y*p+_*g,O=(S-x)*(R-E)-(C-w)*(T-b);if(0===O)return!1;{let e=((R-E)*(C-x)+(w-C)*(R-b))/O,t=((b-T)*(C-x)+(S-x)*(R-b))/O;return 0<=e&&e<=1&&0<=t&&t<=1}}),s=(t.checkLineRect=((e,t,r,i,o,s,u,l,c,h,d,f,p,g,v,m,y,_)=>{r*=u,i*=l;let x=e+h*r+c*i,b=t+c*r+h*i;if(n(x,b,d,f,p,g,v,m,y,_)===!0)return!0;o*=u,s*=l;let S=e+h*o+c*s,T=t+c*o+h*s;if(n(S,T,d,f,p,g,v,m,y,_)===!0)return!0;let w,E,C,R,O,M,P,A;p*=v/2,g*=m/2;let I=_*p,D=_*g,k=-y*p,F=-y*g;return w=d-I-F,E=f+k-D,C=d+I-F,R=f-k-D,O=d+I+F,M=f-k+D,P=d-I+F,A=f+k+D,a(0,0,x,b,S,T,1,1,0,1,0,0,w,E,C,R,1,1,0,1)===!0||a(0,0,x,b,S,T,1,1,0,1,0,0,C,R,O,M,1,1,0,1)===!0||a(0,0,x,b,S,T,1,1,0,1,0,0,O,M,P,A,1,1,0,1)===!0||a(0,0,x,b,S,T,1,1,0,1,0,0,P,A,w,E,1,1,0,1)===!0}),t.checkLineCircle=((e,t,n,o,a,u,l,c,h,d,f,p,g,v,m,y,_,x)=>{n*=l,o*=c;let b=e+d*n+h*o,S=t+h*n+d*o;if(i(b,S,f,p,g,v,m,y,_,x)===!0)return!0;a*=l,u*=c;let T=e+d*a+h*u,w=t+h*a+d*u;if(i(T,w,f,p,g,v,m,y,_,x)===!0)return!0;b-=f,S-=p,T-=f,w-=p;let E=x*b+_*S,C=-_*b+x*S,R=x*T+_*w,O=-_*T+x*w;g*=m,v*=y;let M=(O-C)/(R-E);if(Math.abs(M)>1024)return s(0,0,C,E,O,R,1,1,0,1,0,0,v,g,1,1,0,1);if(i(R,O,0,0,g,v,1,1,0,1)===!0)return!0;let P=g*g/4,A=v*v/4,I=C-M*E,D=1/P+M*M/A,k=2*M*I/A,F=I*I/A-1,L=k*k-4*D*F;return!(L<0)&&(L=Math.sqrt(L),D*=2,r((-k-L)/D,E,R)===!0||r((-k+L)/D,E,R)===!0)})),u=(t.checkLinePolygon=((e,t,r,n,i,s,u,l,c,h,d,f,p,g,v,m,y)=>{r*=u,n*=l;let _=e+h*r+c*n,x=t+c*r+h*n;if(o(_,x,d,f,p,g,v,m,y)===!0)return!0;i*=u,s*=l;let b=e+h*i+c*s,S=t+c*i+h*s;if(o(b,S,d,f,p,g,v,m,y)===!0)return!0;let T=p.length;for(let w=0,E=T-1;w<T;E=w,w+=1){let e=p[w].x*g,t=p[w].y*v,r=p[E].x*g,n=p[E].y*v,i=d+y*e-m*t,o=f+m*e+y*t,s=d+y*r-m*n,u=f+m*r+y*n;if(a(0,0,_,x,b,S,1,1,0,1,0,0,i,o,s,u,1,1,0,1)===!0)return!0}return!1}),t.checkRectRect=((e,t,r,i,o,s,u,l,c,h,d,f,p,g,v,m)=>{r*=o,i*=s,d*=p,f*=g;let y,_,x,b,S,T,w,E,C=l*r/2,R=l*i/2,O=-u*r/2,M=-u*i/2;if(y=e-C-M,_=t+O-R,x=e+C-M,b=t-O-R,S=e+C+M,T=t-O+R,w=e-C+M,E=t+O+R,n(y,_,c,h,d,f,1,1,v,m)===!0||n(x,b,c,h,d,f,1,1,v,m)===!0||n(S,T,c,h,d,f,1,1,v,m)===!0||n(w,E,c,h,d,f,1,1,v,m)===!0)return!0;let P,A,I,D,k,F,L,B,N=m*d/2,X=m*f/2,j=-v*d/2,U=-v*f/2;return P=c-N-U,A=h+j-X,I=c+N-U,D=h-j-X,k=c+N+U,F=h-j+X,L=c-N+U,B=h+j+X,n(P,A,e,t,r,i,1,1,u,l)===!0||n(I,D,e,t,r,i,1,1,u,l)===!0||n(k,F,e,t,r,i,1,1,u,l)===!0||n(L,B,e,t,r,i,1,1,u,l)===!0||(a(0,0,y,_,x,b,1,1,0,1,0,0,P,A,I,D,1,1,0,1)===!0||a(0,0,y,_,x,b,1,1,0,1,0,0,I,D,k,F,1,1,0,1)===!0||a(0,0,y,_,x,b,1,1,0,1,0,0,k,F,L,B,1,1,0,1)===!0||a(0,0,y,_,x,b,1,1,0,1,0,0,L,B,P,A,1,1,0,1)===!0||a(0,0,x,b,S,T,1,1,0,1,0,0,P,A,I,D,1,1,0,1)===!0||a(0,0,x,b,S,T,1,1,0,1,0,0,I,D,k,F,1,1,0,1)===!0||a(0,0,x,b,S,T,1,1,0,1,0,0,k,F,L,B,1,1,0,1)===!0||a(0,0,x,b,S,T,1,1,0,1,0,0,L,B,P,A,1,1,0,1)===!0||a(0,0,S,T,w,E,1,1,0,1,0,0,P,A,I,D,1,1,0,1)===!0||a(0,0,S,T,w,E,1,1,0,1,0,0,I,D,k,F,1,1,0,1)===!0||a(0,0,S,T,w,E,1,1,0,1,0,0,k,F,L,B,1,1,0,1)===!0||a(0,0,S,T,w,E,1,1,0,1,0,0,L,B,P,A,1,1,0,1)===!0||a(0,0,w,E,y,_,1,1,0,1,0,0,P,A,I,D,1,1,0,1)===!0||a(0,0,w,E,y,_,1,1,0,1,0,0,I,D,k,F,1,1,0,1)===!0||a(0,0,w,E,y,_,1,1,0,1,0,0,k,F,L,B,1,1,0,1)===!0||a(0,0,w,E,y,_,1,1,0,1,0,0,L,B,P,A,1,1,0,1)===!0)}),t.checkRectCircle=((e,t,r,o,a,u,l,c,h,d,f,p,g,v,m,y)=>{if(n(h,d,e,t,r,o,a,u,l,c)===!0)return!0;let _,x,b,S,T,w,E,C;r*=a/2,o*=u/2;let R=c*r,O=c*o,M=-l*r,P=-l*o;return _=e-R-P,x=t+M-O,b=e+R-P,S=t-M-O,T=e+R+P,w=t-M+O,E=e-R+P,C=t+M+O,i(_,x,h,d,f,p,g,v,m,y)===!0||i(b,S,h,d,f,p,g,v,m,y)===!0||i(T,w,h,d,f,p,g,v,m,y)===!0||i(E,C,h,d,f,p,g,v,m,y)===!0||(f*=g,p*=v,s(0,0,_,x,b,S,1,1,0,1,h,d,f,p,1,1,m,y)===!0||s(0,0,b,S,T,w,1,1,0,1,h,d,f,p,1,1,m,y)===!0||s(0,0,T,w,E,C,1,1,0,1,h,d,f,p,1,1,m,y)===!0||s(0,0,E,C,_,x,1,1,0,1,h,d,f,p,1,1,m,y)===!0)}),t.checkRectPolygon=((e,t,r,i,s,u,l,c,h,d,f,p,g,v,m)=>{r*=s,i*=u;let y,_,x,b,S,T,w,E,C=c*r/2,R=c*i/2,O=-l*r/2,M=-l*i/2;if(y=e-C-M,_=t+O-R,x=e+C-M,b=t-O-R,S=e+C+M,T=t-O+R,w=e-C+M,E=t+O+R,o(y,_,h,d,f,p,g,v,m)===!0||o(x,b,h,d,f,p,g,v,m)===!0||o(S,T,h,d,f,p,g,v,m)===!0||o(w,E,h,d,f,p,g,v,m)===!0)return!0;let P=f.length;for(let A=0,I=P-1;A<P;I=A,A+=1){let o=f[A].x*p,s=f[A].y*g,u=h+m*o-v*s,C=d+v*o+m*s;if(n(u,C,e,t,r,i,1,1,l,c)===!0)return!0;let R=f[I].x*p,O=f[I].y*g,M=h+m*R-v*O,P=d+v*R+m*O;if(a(0,0,y,_,x,b,1,1,0,1,0,0,u,C,M,P,1,1,0,1)===!0||a(0,0,x,b,S,T,1,1,0,1,0,0,u,C,M,P,1,1,0,1)===!0||a(0,0,S,T,w,E,1,1,0,1,0,0,u,C,M,P,1,1,0,1)===!0||a(0,0,w,E,y,_,1,1,0,1,0,0,u,C,M,P,1,1,0,1)===!0)return!0}return!1}),(e,t,r,n,i)=>{if(0===i)return!0;if(0===e)return 0!==t||(0!==r?n*n-4*r*i>=0:0!==n);let o=t/e,a=r/e,s=n/e,u=i/e,l=(8*a-3*o*o)/8,c=(o*o*o-4*o*a+8*s)/8,h=(-3*o*o*o*o+256*u-64*s*o+16*o*o*a)/256,d=256*h*h*h-128*l*l*h*h+144*l*c*c*h-27*c*c*c*c+16*l*l*l*l*h-4*l*l*l*c*c,f=8*l,p=64*h-16*l*l;return d<0||d>0&&f<0&&p<0||0===d&&(0!==p||f<=0)}),l=(e,t,r,n,i,o,a,s,l,c,h,d)=>{let f=(s/=a)-(t/=e),p=(l/=a)-(r/=e),g=(c/=a)-(n/=e),v=(h/=a)-(i/=e),m=(d/=a)-(o/=e);if(0===f&&0===g)return u(0,0,p,v,m);let y=t*l-s*r,_=t*h+n*l-s*i-c*r,x=t*d+n*h-s*o-c*i,b=n*d-c*o,S=p*p-y*f,T=2*p*v-f*_-g*y,w=v*v+2*p*m-f*x-g*_,E=2*v*m-g*x-f*b,C=m*m-g*b;return u(S,T,w,E,C)};t.checkCircleCircle=((e,t,r,n,o,a,s,u,c,h,d,f,p,g,v,m)=>{r*=o,n*=a,d*=p,f*=g,c-=e,h-=t,e=t=0;let y=((r>n?r:n)+(d>f?d:f))/2;if(c*c+h*h>y*y)return!1;if(i(c,h,e,t,r,n,1,1,s,u)===!0||i(e,t,c,h,d,f,1,1,v,m)===!0)return!0;let _=u*e+s*t,x=-s*e+u*t;s=-s;let b=r*r/4,S=n*n/4,T=u*u/b+s*s/S,w=-2*u*s/b+2*u*s/S,E=s*s/b+u*u/S,C=-2*_*u/b-2*x*s/S,R=2*_*s/b-2*x*u/S,O=_*_/b+x*x/S-1;_=m*c+v*h,x=-v*c+m*h,v=-v,b=d*d/4,S=f*f/4;let M=m*m/b+v*v/S,P=-2*m*v/b+2*m*v/S,A=v*v/b+m*m/S,I=-2*_*m/b-2*x*v/S,D=2*_*v/b-2*x*m/S,k=_*_/b+x*x/S-1;return l(T,w,E,C,R,O,M,P,A,I,D,k)&&l(E,w,T,R,C,O,A,P,M,D,I,k)}),t.checkCirclePolygon=((e,t,r,n,a,u,l,c,h,d,f,p,g,v,m)=>{if(o(e,t,h,d,f,p,g,v,m)===!0)return!0;r*=a,n*=u;let y=f.length;for(let _=0,x=y-1;_<y;x=_,_+=1){let o=f[_].x*p,a=f[_].y*g,u=h+m*o-v*a,y=d+v*o+m*a;if(i(u,y,e,t,r,n,1,1,l,c)===!0)return!0;let b=f[x].x*p,S=f[x].y*g,T=h+m*b-v*S,w=d+v*b+m*S;if(s(0,0,u,y,T,w,1,1,0,1,e,t,r,n,1,1,l,c)===!0)return!0}return!1}),t.checkPolygonPolygon=((e,t,r,n,i,s,u,l,c,h,d,f,p,g)=>{let v=r.length,m=h.length;for(let y=0,_=m-1;y<m;_=y,y+=1){let a=h[y].x*d,v=h[y].y*f,m=l+g*a-p*v,_=c+p*a+g*v;if(o(m,_,e,t,r,n,i,s,u)===!0)return!0}for(let y=0,_=v-1;y<v;_=y,y+=1){let v=r[y].x*n,x=r[y].y*i,b=e+u*v-s*x,S=t+s*v+u*x;if(o(b,S,l,c,h,d,f,p,g)===!0)return!0;let T=r[_].x*n,w=r[_].y*i,E=e+u*T-s*w,C=t+s*T+u*w;for(let R=0,O=m-1;R<m;O=R,R+=1){let e=h[R].x*d,t=h[R].y*f,r=l+g*e-p*t,n=c+p*e+g*t,i=h[O].x*d,o=h[O].y*f,s=l+g*i-p*o,u=c+p*i+g*o;if(a(0,0,b,S,E,C,1,1,0,1,0,0,r,n,s,u,1,1,0,1)===!0)return!0}}return!1})}}),SkyEngine("Util").ImageData=OBJECT({init:(e,t)=>{const r=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1],n=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0];let i=t.checkImageDataPointIsTransparent=((e,t,r,n)=>{return e[4*(n*t+r)+3]<=20});t.convertImageDataToPolygonPoints=((e,t)=>{let o,a,s,u,l=0,c=0,h=[];for(;;){if(i(e,t,l,c)!==!0){s=l,u=c;break}0===l?(l=c+1,c=0):(l-=1,c+=1)}l=s,c=u;let d=0,f=0;do{let s=0;if(i(e,t,l-1,c-1)!==!0&&(s+=1),i(e,t,l,c-1)!==!0&&(s+=2),i(e,t,l-1,c)!==!0&&(s+=4),i(e,t,l,c)!==!0&&(s+=8),6===s)d=a===-1?-1:1,f=0;else if(9===s)d=0,f=1===o?-1:1;else{if(!(s<15))break;d=r[s],f=n[s]}if(d!==o&&f!==a&&(h.push({x:l,y:c}),o=d,a=f),l+=d,c+=f,l<0||c<0)break}while(s!==l||u!==c);return h})}});